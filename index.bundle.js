webpackJsonp([1],{1003:function(e,t,n){"use strict";var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,n,l){return n&&e(t.prototype,n),l&&e(t,l),t}}(),o=n(234),i={DESKTOP:0,MOBILE:1},r=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),l(t,[{key:"convertResponsiveMode",value:function(e){return"mobile"===(e||"").toLowerCase()?this.MOBILE:this.DESKTOP}},{key:"toResponsiveMode",value:function(e){return e===this.MOBILE?"mobile":null}}]),t}();e.exports=new r},1004:function(e,t,n){"use strict";var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,n,l){return n&&e(t.prototype,n),l&&e(t,l),t}}(),o=n(234),i=n(490),r={ALL:0,TEAM:1},s=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),l(t,[{key:"isRestricted",value:function(e){return r.TEAM===e}},{key:"canView",value:function(e,t){return!this.isRestricted(e)||i.isTeamMember(t)}}]),t}();e.exports=new s(r)},1024:function(e,t){},1073:function(e,t,n){"use strict";var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,n,l){return n&&e(t.prototype,n),l&&e(t,l),t}}();function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=n(1074),r="(?:[\\.?,;!\\)]{0,1})($|\\s)",s="[\\.%\\+\\-a-z0-9]+@(?:[a-z0-9-]+\\.)+(?:[a-z0-9]{2,15})",u={},a=function(e,t){var n=e+"::://"+t;u[n]||(u[n]=new RegExp(e,t));var l=u[n];return l.lastIndex=0,l},c=function(){return a((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[\\+@]")+"("+s+")"+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:r),"ig")},d=function(){return a((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\\@")+"([\\S]+)"+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:r),"ig")},p=function(){return a("\\[~([a-z0-9]{24})(?::\\+([\\.%\\+\\-a-z0-9]+@(?:[a-z0-9-]+\\.)+(?:[a-z0-9]{2,15})))?\\]"+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:r),"ig")},h=a("\\b(https?:\\/\\/|www\\.)[-a-zA-Z0-9:%_\\+.~#?&/=]{1,}\\.[a-z]{2,}\\b([-a-zA-Z0-9:%_\\+.~#?&\\/=\\[\\]]*)?","ig"),m=function(){function e(t,n){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.commentText=n||"",this.mentionParser=t,this.mentionWrapper=new i}return l(e,[{key:"getEmails",value:function(){for(var e=c(),t=this.commentText||"",n=e.exec(t),l=[];n;)l.push(n[1]),n=e.exec(t);return l}},{key:"getMissingEmails",value:function(){var e=new Set(this.getEmails()),t=this.mentionParser.getMentionsData();return[].concat(o(e)).filter(function(e){return!t.find(function(t){return t.data.email===e})})}},{key:"getMentionedData",value:function(){var e=this.mentionParser.getMentionsData(),t=[],n=function(n,l){var o=e.find(function(e){return e.data.slug===l||e.data.email===l});o&&(t.find(function(e){return e.mentionId===o.mentionId})||t.push(o))};return this.commentText.replace(d("\\@",""),n),this.commentText.replace(c("[\\+@]",""),n),t}},{key:"changeEmailPrefix",value:function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+",n=c(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"@"),l=this.commentText.replace(n,function(e){return""+t+e.substring(1)});return new e(this.mentionParser,l)}},{key:"changeToHashesByRegExp",value:function(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fallback,l=void 0!==n&&n,o=this.mentionParser.getMentionsData(),i=this.commentText.replace(t,function(e,t){var n,i,r=o.find(function(e){return e.data.slug===t||e.data.email===t});if(r&&r.mentionId){var s=e.substring(1+t.length);return i=["[~",(n=r).mentionId],l&&n.data.email&&(i.push(":+"),i.push(n.data.email)),i.push("]"),i.join("")+s}return e});return new e(this.mentionParser,i)}},{key:"changeSlugsToHashes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.changeToHashesByRegExp(d(),e)}},{key:"changeEmailsToHashes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.changeToHashesByRegExp(c(),e)}},{key:"changeAllToHashes",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).fallback,t=void 0!==e&&e;return this.changeSlugsToHashes({fallback:t}).changeEmailsToHashes({fallback:t})}},{key:"setMentionsWrapper",value:function(e,t,n){this.mentionWrapper.setWrapper(e,t,n)}},{key:"changeHashesToSlugs",value:function(){var t=this,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).html,l=void 0!==n&&n,o=this.mentionParser.getMentionsData(),i=this.commentText.replace(p(),function(n,i,r){var s=function(o){var i=n.indexOf("]"),r=n.slice(i+1);if(l){var s=e.replaceHashSpaces(o);return""+t.mentionWrapper.wrapText(s)+r}return""+o+r},u=o.find(function(e){return e.mentionId===i});return u?s("user"===u.type?"@"+u.data.slug:"+"+u.data.email):r?(o.push({mentionId:i,type:"fallback",data:{email:r}}),s("+"+r)):n});return new e(this.mentionParser,i)}},{key:"getMentions",value:function(){var e=this.mentionParser.getMentionsData(),t=[];return this.commentText.replace(p(),function(n,l){var o=e.find(function(e){return e.mentionId===l});t.push(o)}),[].concat(o(new Set(t)))}},{key:"getCommentText",value:function(){return this.commentText}},{key:"setCommentText",value:function(e){this.commentText=e}},{key:"wrapLinks",value:function(){var t=this.commentText.replace(h,function(e,t){return'<a href="'+("www."===t?"http://":"")+e+'" target="_blank">'+e+"</a>"});return new e(this.mentionParser,t)}},{key:"wrapUnsavedInvites",value:function(){var t=a("((^|\\s)[\\+@]"+s+")","ig"),n=this.commentText.replace(t,""+this.mentionWrapper.wrapText("$1"));return new e(this.mentionParser,n)}}]),e}();m.replaceHashSpaces=function(e){return e.replace("_",'<span style="opacity: 0; display: inline-block; width: 4px;" class="u-invisible t-mentions-spacer">_</span>')},e.exports=m},1074:function(e,t,n){"use strict";var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,n,l){return n&&e(t.prototype,n),l&&e(t,l),t}}(),o=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.tagName="span",this.classNames="u-text--action",this.style=""}return l(e,[{key:"setWrapper",value:function(e,t,n){this.tagName=i(e)?this.tagName:e,this.classNames=i(t)?this.classNames:t,this.style=i(n)?this.style:n}},{key:"wrapText",value:function(e){var t=this.tagName;return"<"+t+' class="'+this.classNames+'" style="'+this.style+'">'+e+"</"+t+">"}}]),e}();function i(e){return"string"==typeof e&&0===e.length}e.exports=o},1094:function(e,t){},234:function(e,t,n){"use strict";var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,n,l){return n&&e(t.prototype,n),l&&e(t,l),t}}(),o=new WeakMap,i=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),Object.assign(this,t),o.set(this,t)}return l(e,[{key:"getValueMap",value:function(){return o.get(this)}},{key:"fromString",value:function(e){if(e){var t=this.getValueMap(),n=Object.keys(t),l=e.toUpperCase(),o=n.find(function(e){return e.toUpperCase()===l});return t.hasOwnProperty(o)?t[o]:null}}},{key:"contains",value:function(e){var t=this.getValueMap();return!!Object.keys(t).find(function(n){return t[n]===e})}}]),e}();e.exports=i},241:function(e,t,n){"use strict";var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,n,l){return n&&e(t.prototype,n),l&&e(t,l),t}}(),o=n(1073),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.setMentionsData(t)}return l(e,[{key:"getMentionsData",value:function(){return this.mentionsData}},{key:"setMentionsData",value:function(e){return this.mentionsData=e,this}},{key:"parseComment",value:function(e){return new o(this,e)}}]),e}();e.exports=i},281:function(e,t){function n(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=281},29:function(e,t,n){"use strict";var l=n(490),o=n(1003),i=n(1004);e.exports={roles:l,displayModes:o,visibilities:i}},490:function(e,t,n){"use strict";var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,n,l){return n&&e(t.prototype,n),l&&e(t,l),t}}(),o=n(234),i=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),l(t,[{key:"isTeamMember",value:function(e){return e>0}},{key:"isOwner",value:function(e){return[this.OWNER].indexOf(e)>=0}},{key:"canManage",value:function(e){return[this.MANAGE,this.OWNER].indexOf(e)>=0}},{key:"canEditPage",value:function(e){return[this.MANAGE,this.OWNER,this.EDIT].indexOf(e)>=0}},{key:"needsIntroduction",value:function(e){return e<=this.GUEST}},{key:"getRole",value:function(e){return this.isOwner(e)?"OWNER":this.canManage(e)?"MANAGE":this.canEditPage(e)?"EDIT":this.isTeamMember(e)?"VIEW":"NONE"}}]),t}();e.exports=new i({GUEST:-1,NONE:0,VIEW:1,EDIT:2,MANAGE:3,OWNER:4,USER:1,ADMIN:3})},666:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var t=n(10),l=n(669),o=n(0),i=n(1094);n.n(i),"production"===e.env.ENV&&Object(o.enableProdMode)(),Object(t.platformBrowser)().bootstrapModuleFactory(l.a)}.call(t,n(47))},669:function(e,t,n){"use strict";var l=n(0),o=new l.InjectionToken("Registered Reducers"),i=function(){},r=function(e){this.viewContainerRef=e},s=n(282),u=n(670),a=n(671),c=n(181),d=n(82),p=n(63),h=n(54),m=n(182),f=n(3),v=n(10),g=n(183),y=n(72),b=n(287),E=n(98),S=n(184),C=n(109),A=n(35),I=n(28),T=function(){function e(){}return e.isAnonymous=function(e){return"number"==typeof e.id&&e.id<0},e.getInitials=function(t){return e.isAnonymous(t)?"":["firstName","lastName"].reduce(function(e,n){return t[n]?e.concat(t[n].substring(0,1)):e},"")},e}(),_=function(){function e(){this.cssClass={}}return e.prototype.ngOnInit=function(){var e;this.initials=T.getInitials(this.user),this.avatar=this.user.avatar,this.avatar&&(this.ngStyle={"background-image":"url("+this.avatar+")"}),this.size&&(this.cssClass=((e={})["c-illustration--"+this.size]=!0,e)),this.cssClass["c-illustration--empty"]=!this.avatar,this.cssClass["c-illustration--member"]=!this.avatar&&!this.initials.length},e.prototype.showInitials=function(){return!T.isAnonymous(this.user)&&!this.avatar&&this.initials.length>0},e}(),O=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function w(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"span",[["class","u-text--action u-text--small u-text--upper"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),l["ɵted"](3,null,["",""])),(e()(),l["ɵted"](-1,null,[" "]))],null,function(e,t){e(t,3,0,t.component.initials)})}function M(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"span",[["class","c-illustration u-bg--primary"]],null,null,null,null,null)),l["ɵdid"](1,278528,null,0,f.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵdid"](2,278528,null,0,f.NgStyle,[l.KeyValueDiffers,l.ElementRef,l.Renderer],{ngStyle:[0,"ngStyle"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,w)),l["ɵdid"](5,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,1,0,"c-illustration u-bg--primary",n.cssClass),e(t,2,0,n.ngStyle),e(t,5,0,n.showInitials())},null)}var D=function(){function e(){}return e.prototype.transform=function(e,t){void 0===t&&(t=!1);var n="";return T.isAnonymous(e)?n="anonymous guest":(e.firstName&&(n=e.firstName),e.lastName&&!t&&(n+=" "+e.lastName),!n.length&&e.email&&(n=e.email.split("@")[0]),n.length||(n="...")),n},e}(),k=function(){function e(e){this.myElement=e,this.disablePreviousArrow=!1,this.disableNextArrow=!1,this.showPreviousArrow=!1,this.showNextArrow=!1,this.itemOffset=0}return e.prototype.ngOnChanges=function(e){var t=this;if(e.items.currentValue){var n=e.items.currentValue.length;setTimeout(function(){n>6?(t.showNextArrow=!0,t.showPreviousArrow=!0,t.onUsersChange()):t.disableArrows()},0)}},e.prototype.disableArrows=function(){var e=this.itemsContainer.nativeElement,t=this.itemsWrapper.nativeElement;this.showNextArrow=!1,this.showPreviousArrow=!1,this.itemOffset=0,t.style.width="auto",e.style.transform="translateX(0)"},e.prototype.onUsersChange=function(){var e=this.itemsContainer.nativeElement,t=this.itemsWrapper.nativeElement;this.itemWidth=e.children[0].clientWidth,t.style.width=6*this.itemWidth+50+4+"px",this.itemOffset+this.items.length<=6&&(this.itemOffset=this.itemOffset+1,e.style.transform="translateX("+this.itemOffset*(this.itemWidth+10)+"px)"),this.checkArrowsDisplay()},e.prototype.checkArrowsDisplay=function(){var e=this.items.length>6;this.disableNextArrow=!(e&&this.itemOffset+this.items.length>6),this.disablePreviousArrow=!(e&&this.itemOffset<0)},e.prototype.onNextClick=function(){this.itemOffset+this.items.length!==6&&(this.itemOffset=this.itemOffset-1,this.onArrowClick())},e.prototype.onPrevClick=function(){0!==this.itemOffset&&(this.itemOffset=this.itemOffset+1,this.onArrowClick())},e.prototype.onArrowClick=function(){this.itemsContainer.nativeElement.style.transform="translateX("+this.itemOffset*(this.itemWidth+10)+"px)",this.checkArrowsDisplay()},e}(),R=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function P(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,12,"div",[],null,[[null,"mouseenter"]],function(e,t,n){var o=!0;return"mouseenter"===t&&(o=!1!==l["ɵnov"](e,3).mouseEnterHandler(n)&&o),o},null,null)),l["ɵdid"](1,278528,null,0,f.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer],{ngClass:[0,"ngClass"]},null),l["ɵpod"](2,{"l-group__item t-teammember":0,"t-teammember--online":1,"t-teammember--offline":2}),l["ɵdid"](3,212992,null,0,S.IpTooltipDirective,[l.ElementRef,C.IpTooltipService,v.DOCUMENT,l.ViewContainerRef,l.ChangeDetectorRef],{content:[0,"content"]},null),l["ɵppd"](4,1),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](6,0,null,null,5,"ip-button",[["size","small"],["type","floating"]],[[2,"u-pointer-none",null]],null,null,A.b,A.a)),l["ɵdid"](7,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],{size:[0,"size"],type:[1,"type"]},null),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵeld"](9,0,null,1,1,"ip-avatar",[["ip-custom",""]],null,null,null,M,O)),l["ɵdid"](10,114688,null,0,_,[],{user:[0,"user"]},null),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](0,null,null,0))],function(e,t){e(t,1,0,e(t,2,0,!0,t.context.$implicit.teammember,!t.context.$implicit.online)),e(t,3,0,l["ɵunv"](t,3,0,e(t,4,0,l["ɵnov"](t.parent,0),t.context.$implicit))),e(t,7,0,"small","floating"),e(t,10,0,t.context.$implicit)},function(e,t){e(t,6,0,l["ɵnov"](t,7).disabled)})}function H(e){return l["ɵvid"](0,[l["ɵpid"](0,D,[]),l["ɵqud"](402653184,1,{itemsContainer:0}),l["ɵqud"](402653184,2,{itemsWrapper:0}),(e()(),l["ɵeld"](3,0,null,null,24,"div",[["class","l-group l-group--ver-center l-group--block l-group--hor-right"],["style","padding-top:2px"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](5,0,null,null,5,"div",[["class","l-group__item"]],[[2,"u-hidden",null]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](7,0,null,null,2,"ip-button",[["icon","keyboard_arrow_left"],["size","large"],["type","clean"]],[[2,"u-pointer-none",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.onPrevClick()&&l),l},A.b,A.a)),l["ɵdid"](8,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],{size:[0,"size"],icon:[1,"icon"],type:[2,"type"],disabled:[3,"disabled"]},null),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](12,0,[[2,0],["itemsWrapper",1]],null,7,"div",[["class","l-group__item"],["style","overflow:hidden;padding:2px"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](14,0,[[1,0],["itemsContainer",1]],null,4,"div",[["class","l-group l-group--ver-center"],["style","transition:transform .3s"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,P)),l["ɵdid"](17,802816,null,0,f.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](21,0,null,null,5,"div",[["class","l-group__item"]],[[2,"u-hidden",null]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](23,0,null,null,2,"ip-button",[["icon","keyboard_arrow_right"],["size","large"],["type","clean"]],[[2,"u-pointer-none",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.onNextClick()&&l),l},A.b,A.a)),l["ɵdid"](24,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],{size:[0,"size"],icon:[1,"icon"],type:[2,"type"],disabled:[3,"disabled"]},null),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,8,0,"large","keyboard_arrow_left","clean",n.disablePreviousArrow),e(t,17,0,n.items),e(t,24,0,"large","keyboard_arrow_right","clean",n.disableNextArrow)},function(e,t){var n=t.component;e(t,5,0,!n.showPreviousArrow),e(t,7,0,l["ɵnov"](t,8).disabled),e(t,21,0,!n.showNextArrow),e(t,23,0,l["ɵnov"](t,24).disabled)})}var x=n(397),N=n(110),V=n(398),L=n(84),U=n(935),$=n(111),F=n(85),j=n(32),B=n(205),G=n(26),z=n(86),q=n(45),W=n(6),K=(n(936),n(477)),Y=n(46),X=n(1),J=n(55),Z=new l.InjectionToken("window.injection");function Q(){return window}var ee=function(){function e(e){this.window=e,this.roomHash=this.window.location.pathname.split("/").pop()}return Object.defineProperty(e.prototype,"roomHash",{get:function(){return this._roomHash},set:function(e){this._roomHash=e},enumerable:!0,configurable:!0}),e}(),te="/api/v1",ne="RHf506xJFjCrO2VkKWRteBchftIrVy4O",le=960,oe=function(){function e(e,t){this.http=e,this.paramsService=t,this.user$=new J.BehaviorSubject(this.user)}return Object.defineProperty(e.prototype,"user",{get:function(){return this._user},set:function(e){this._user=e,this.user$.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.user.id},enumerable:!0,configurable:!0}),e.prototype.isAnonymous=function(){return T.isAnonymous(this.user)},e.prototype.setIntroModalSeen=function(){return this.http.post(te+"/introModalSeen?roomHash="+this.paramsService.roomHash,{}).map(function(e){return e.json()})},e}(),ie=n(29),re=function(){function e(e,t,n){this.currentUserService=e,this.http=t,this.paramsService=n,this.appToken=""}return e.prototype.getCurrentUser=function(){return this.currentUserService?this.currentUserService.user:{}},e.prototype.can=function(e,t){return void 0===t&&(t=!0),!(!t||!ie.roles.canManage(this.getCurrentUser().role))||this.getCurrentUser().id===e.id},e.prototype.isManager=function(e){return ie.roles.canManage(e.role)},e.prototype.isTeamMember=function(e){return ie.roles.isTeamMember(e.role)},e.prototype.isAnonymous=function(e){return this.getCurrentUser().role===ie.roles.GUEST},e.prototype.canEditPage=function(e){return ie.roles.canEditPage(e.role)},e.prototype.canEditComment=function(e){return this.can(e,!1)},e.prototype.canDeleteComment=function(e){return this.can(e)},e.prototype.canDeleteOrEditComment=function(e){return this.can(e)},e.prototype.canChangeVisibilityOfHotspot=function(e,t,n){if(void 0===n&&(n="everyone"),!e.persistant)return!0;if(t){var l=ie.roles.canManage(this.getCurrentUser().role),o=this.getCurrentUser().id===e.author.id,i=!this.hasCommentsOfOtherUser(t);if("everyone"===n)return l||o&&i;if("team"===n)return!this.hasCommentsOfGuestUser(t)&&(l||o&&i)}return!1},e.prototype.hasCommentsOfOtherUser=function(e){var t=this.getCurrentUser().id;return e.some(function(e){return e.author.id!==t})},e.prototype.hasCommentsOfGuestUser=function(e){var t=this;return e.some(function(e){return!t.isTeamMember(e.author)})},e.prototype.getPreviewAccess=function(){var e=this,t=new Y.i;return t.set("roomHash",this.paramsService.roomHash),this.http.get(te+"/has-access",{search:t}).map(function(e){return e.json()}).map(function(t){return e.passwordChanged=t.data.passwordChanged,!0===t.success&&t.data.access}).catch(function(e){return X.Observable.of(!1)})},e.prototype.checkAccess=function(e){return this.http.post(te+"/room/password",{password:e,roomHash:this.paramsService.roomHash}).map(function(e){return e.json()}).map(function(e){return e.success&&e.data.access})},e.prototype.getAppToken=function(){var e=this;return this.appToken?X.Observable.of(this.appToken):this.http.get("https://app.instapage.com/api/secured/token/generate",{withCredentials:!0}).map(function(e){return e.json().data.token}).do(function(t){e.appToken=t||""}).catch(function(){return X.Observable.of("")})},e.prototype.setTrialWarningAsSeen=function(e){var t=new Y.d({"Content-Type":"application/x-www-form-urlencoded"}),n=new Y.g({headers:t,withCredentials:!0}),l=this.prepareFormData({feature:e,personal:!0});return this.http.post("https://app.instapage.com/api/secured/products/set-feature-modal-as-seen",l,n).map(function(e){return e.json().data})},e.prototype.prepareFormData=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")},e}(),se=n(19),ue=function(){function e(){}return e.prototype.switchToDesktop=function(){return{type:e.SWITCH_TO_DESKTOP}},e.prototype.switchToMobile=function(){return{type:e.SWITCH_TO_MOBILE}},e.prototype.changeVariation=function(t){return{type:e.CHANGE_VARIATION,payload:t}},e.prototype.setLoading=function(){return{type:e.SET_LOADING}},e.prototype.setLoaded=function(){return{type:e.SET_LOADED}},e.prototype.setFeatureMode=function(t){return{type:e.SET_FEATURE_MODE,payload:t}},e.prototype.heatmapModeButtonClicked=function(t){return{type:e.HEATMAP_MODE_BUTTON_CLICKED,payload:t}},e.prototype.setPopupOpened=function(t){return{type:e.SET_POPUP_OPENED,payload:t}},e.prototype.setPopupClosed=function(t){return{type:e.SET_POPUP_CLOSED,payload:t}},e.prototype.setError=function(t){return{type:e.SET_APP_ERROR,payload:t}},e.prototype.clearError=function(){return{type:e.CLEAR_APP_ERROR}},e.prototype.openFeed=function(){return{type:e.FEED_OPEN}},e.prototype.closeFeed=function(){return{type:e.FEED_CLOSE}},e.prototype.checkHotspotStatus=function(t){return{type:e.CHECK_HOTSPOT_STATUS,payload:{id:t}}},e.prototype.checkHotspotStatusSuccess=function(t){return{type:e.CHECK_HOTSPOT_STATUS_SUCCESS,payload:t}},e.prototype.openModal=function(t){return{type:e.OPEN_MODAL,payload:t}},e.prototype.closeModal=function(){return{type:e.CLOSE_MODAL}},e.prototype.pageLoaded=function(t){return{type:e.PAGE_LOADED,payload:t}},e.prototype.openHeatmapmMenu=function(){return{type:e.HEATMAPMENU_OPEN}},e.prototype.closeHeatmapMenu=function(){return{type:e.HEATMAPMENU_CLOSE}},e.prototype.hasAccessToHeatmap=function(t){return{type:e.HAS_ACCESS_TO_HEATMAP,payload:t}},e.prototype.hasAccessToCollaboration=function(t){return{type:e.HAS_ACCESS_TO_COLLABORATION,payload:t}},e.prototype.openLimitedCollaborationModal=function(){return{type:e.OPEN_LC_MODAL}},e.prototype.setPopupPosition=function(t){return{type:e.SET_POPUP_POSITION,payload:t}},e.prototype.setPopupSize=function(t){return{type:e.SET_POPUP_SIZE,payload:t}},e}();function ae(e,t){return null===t||t&&e>t}function ce(e){var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(window.location.search);return t&&t[2]&&"null"!==t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):null}function de(e,t){var n,l,o=(n=new Y.i,(l=window.location.href).slice(l.indexOf("?")+1).split("&").map(function(e){var t=e.split("=");n.append(t[0],t[1])}),n);return o.set(e,t),location.pathname+"?"+o.toString()}function pe(e){return e===ie.displayModes.MOBILE}ue.SWITCH_TO_DESKTOP="UI_SWITCH_TO_DESKTOP",ue.SWITCH_TO_MOBILE="UI_SWITCH_TO_MOBILE",ue.CHANGE_VARIATION="UI_CHANGE_VARIATION",ue.SET_LOADING="UI_SET_LOADING",ue.SET_LOADED="UI_SET_LOADED",ue.SET_FEATURE_MODE="UI_SET_FEATURE_MODE",ue.HEATMAP_MODE_BUTTON_CLICKED="UI_HEATMAP_MODE_BUTTON_CLICKED",ue.SET_POPUP_OPENED="UI_SET_POPUP_OPENED",ue.SET_POPUP_CLOSED="UI_SET_POPUP_CLOSED",ue.SET_APP_ERROR="UI_SET_APP_ERROR",ue.CLEAR_APP_ERROR="UI_CLEAR_APP_ERROR",ue.FEED_OPEN="UI_FEED_OPEN",ue.FEED_CLOSE="UI_FEED_CLOSE",ue.CHECK_HOTSPOT_STATUS="UI_CHECK_HOTSPOT_STATUS",ue.CHECK_HOTSPOT_STATUS_SUCCESS="UI_CHECK_HOTSPOT_STATUS_SUCCESS",ue.OPEN_MODAL="UI_OPEN_MODAL",ue.CLOSE_MODAL="UI_CLOSE_MODAL",ue.PAGE_LOADED="UI_PAGE_LOADED",ue.HEATMAPMENU_OPEN="UI_HEATMAPMENU_OPEN",ue.HEATMAPMENU_CLOSE="UI_HEATMAPMENU_CLOSE",ue.HAS_ACCESS_TO_HEATMAP="UI_HAS_ACCESS_TO_HEATMAP",ue.HAS_ACCESS_TO_COLLABORATION="UI_HAS_ACCESS_TO_COLLABORATION",ue.OPEN_LC_MODAL="UI_OPEN_LC_MODAL",ue.SET_POPUP_POSITION="UI_SET_POPUP_POSITION",ue.SET_POPUP_SIZE="UI_SET_POPUP_SIZE";var he=function(e){return e[e.comment=0]="comment",e[e.heatmap=1]="heatmap",e[e.sample=2]="sample",e}({}),me=ce("controlVariation"),fe=ce("displayMode"),ve=ce("featureMode"),ge={controlVariation:me,variation:ce("variation")||me||"A",displayMode:fe?parseInt(fe,10):ie.displayModes.DESKTOP,variationHash:"",loading:!0,loaded:!1,featureModeEnabled:ve?parseInt(ve,10):he.comment,feedOpened:!1,heatmapMenuOpened:!1,openedPopup:null,error:{visible:!1,code:""},modal:{button:{label:"",link:""},opened:!1,type:null,title:"",message:""},urlHotspotStatusChecked:!1,hasAccessToHeatmap:!1,hasAccessToCollaboration:void 0,loadedPageInfo:{displayMode:null,variation:"",version:"",variationHash:""}};function ye(e){return e.openedPopup?he.sample:e.featureModeEnabled===he.heatmap?he.heatmap:e.featureModeEnabled===he.comment?he.comment:he.sample}var be=function(){function e(){}return e.prototype.add=function(t){return{type:e.ADD,payload:t}},e.prototype.addSuccess=function(t){return{type:e.ADD_SUCCESS,payload:t}},e.prototype.save=function(t,n,l){return void 0===l&&(l={}),{type:e.SAVE,payload:{hotspot:t,comment:n,options:l}}},e.prototype.saveSuccess=function(t,n){return void 0===n&&(n=!1),{type:e.SAVE_SUCCESS,payload:{hotspot:t,justAdded:n}}},e.prototype.reset=function(){return{type:e.RESET}},e.prototype.load=function(){return{type:e.LOAD}},e.prototype.loaded=function(t){return{type:e.LOADED,payload:t}},e.prototype.cleanupUnsaved=function(){return{type:e.CLEANUP_UNSAVED}},e.prototype.editByIndex=function(t,n){return{type:e.EDIT_BY_INDEX,payload:{index:t,data:n}}},e.prototype.editPendingEntry=function(t){return{type:e.EDIT_PENDING_ENTRY,payload:{data:t}}},e.prototype.activate=function(t){return{type:e.ACTIVATE,payload:{id:t}}},e.prototype.deactivate=function(t){return{type:e.DEACTIVATE,payload:{id:t}}},e.prototype.resolve=function(t){return{type:e.RESOLVE,payload:{id:t}}},e.prototype.unResolve=function(t){return{type:e.UNRESOLVE,payload:{id:t}}},e.prototype.setResolved=function(t){return{type:e.SET_RESOLVED,payload:{hotspot:t}}},e.prototype.setUnResolved=function(t){return{type:e.SET_UNRESOLVED,payload:{hotspot:t}}},e.prototype.changeVisibility=function(t,n){return{type:e.CHANGE_VISIBILITY,payload:{id:t,visibility:n}}},e.prototype.visibilityChanged=function(t){return{type:e.VISIBILITY_CHANGED,payload:{hotspot:t}}},e.prototype.removed=function(t){return{type:e.REMOVED,payload:{id:t}}},e.prototype.setViewedAt=function(t,n){return{type:e.SET_VIEWED_AT,payload:{id:t,viewedAt:n}}},e.prototype.setEditedAt=function(t,n){return{type:e.SET_EDITED_AT,payload:{id:t,editedAt:n}}},e.prototype.removeJustAdded=function(t){return{type:e.REMOVE_JUST_ADDED,payload:{id:t}}},e}();be.ADD="HOTSPOTS_ADD",be.ADD_SUCCESS="HOTSPOTS_ADD_SUCCESS",be.SAVE="HOTSPOTS_SAVE",be.SAVE_SUCCESS="HOTSPOT_SAVE_SUCCESS",be.RESET="HOTSPOTS_RESET",be.LOAD="HOTSPOTS_LOAD",be.LOADED="HOTSPOTS_LOADED",be.CLEANUP_UNSAVED="HOTSPOTS_CLEANUP_UNSAVED",be.EDIT_BY_INDEX="HOTSPOTS_EDIT_BY_INDEX",be.EDIT_PENDING_ENTRY="HOTSPOTS_EDIT_PENDING_ENTRY",be.ACTIVATE="HOTSPOTS_ACTIVATE",be.DEACTIVATE="HOTSPOTS_DEACTIVATE",be.RESOLVE="HOTSPOTS_RESOLVE",be.UNRESOLVE="HOTSPOTS_UNRESOLVE",be.SET_RESOLVED="HOTSPOTS_SET_RESOLVED",be.SET_UNRESOLVED="HOTSPOTS_SET_UNRESOLVED",be.CHANGE_VISIBILITY="HOTSPOTS_CHANGE_VISIBILITY",be.VISIBILITY_CHANGED="HOTSPOTS_VISIBILITY_CHANGED",be.REMOVED="HOTSPOTS_REMOVED",be.SET_VIEWED_AT="HOTSPOTS_SET_VIEWED_AT",be.SET_EDITED_AT="HOTSPOTS_SET_EDITED_AT",be.REMOVE_JUST_ADDED="HOTSPOTS_REMOVE_JUST_ADDED";var Ee={loading:!0,entries:[],pendingEntry:null};function Se(e,t,n){return Object.assign({},n,{entries:n.entries.map(function(n){return e===n.id&&(n=Object.assign({},n,t)),n})})}var Ce=function(){function e(){}return e.prototype.activateHotspot=function(t,n,l){return void 0===n&&(n=!1),void 0===l&&(l=!1),{type:e.ACTIVATE_HOTSPOT,payload:{id:t,justAdded:n,centerVertically:l}}},e.prototype.deactivateHotspot=function(t){return{type:e.DEACTIVATE_HOTSPOT,payload:{id:t}}},e.prototype.add=function(t,n,l){return void 0===l&&(l={}),{type:e.ADD,payload:{hotspotId:t,comment:n,options:l}}},e.prototype.addSuccess=function(t){return{type:e.ADD_SUCCESS,payload:{comment:t}}},e.prototype.populate=function(t){return{type:e.POPULATE,payload:{comments:t}}},e.prototype.enableEditMode=function(t){return{type:e.ENABLE_EDIT_MODE,payload:{id:t}}},e.prototype.disableEditMode=function(t){return{type:e.DISABLE_EDIT_MODE,payload:{id:t}}},e.prototype.disableEditModeAll=function(){return{type:e.DISABLE_EDIT_MODE_ALL}},e.prototype.edit=function(t,n,l){return{type:e.EDIT,payload:{hotspotId:t,commentId:n,text:l}}},e.prototype.editSuccess=function(t){return{type:e.EDIT_SUCCESS,payload:{comment:t}}},e.prototype.remove=function(t){return{type:e.REMOVE,payload:{comment:t}}},e.prototype.removeSuccess=function(t){return{type:e.REMOVE_SUCCESS,payload:{comment:t}}},e.prototype.setCenterVertically=function(t){return{type:e.CENTER_VERTICALLY,payload:{value:t}}},e}();Ce.ACTIVATE_HOTSPOT="COMMENTS_ACTIVATE_HOTSPOT",Ce.DEACTIVATE_HOTSPOT="COMMENTS_DEACTIVATE_HOTSPOT",Ce.ADD="COMMENTS_ADD",Ce.ADD_SUCCESS="COMMENTS_ADD_SUCCESS",Ce.POPULATE="COMMENTS_POPULATE",Ce.ENABLE_EDIT_MODE="COMMENTS_ENABLE_EDIT_MODE",Ce.DISABLE_EDIT_MODE="COMMENTS_DISABLE_EDIT_MODE",Ce.DISABLE_EDIT_MODE_ALL="COMMENTS_DISABLE_EDIT_MODE_ALL",Ce.EDIT="COMMENTS_EDIT",Ce.EDIT_SUCCESS="COMMENTS_EDIT_SUCCESS",Ce.REMOVE="COMMENTS_REMOVE",Ce.REMOVE_SUCCESS="COMMENTS_REMOVE_SUCCESS",Ce.CENTER_VERTICALLY="COMMENTS_CENTER_VERTICALLY";var Ae={currentHotspotId:null,previousHotspotId:null,currentEntries:[],loading:!1,centerVertically:!1},Ie=function(){function e(){}return e.prototype.loadVariationsData=function(t){return void 0===t&&(t=!0),{type:e.LOAD_VARIATIONS_DATA,payload:{setCurrentAsSeen:t}}},e.prototype.loadVariationsDataSuccess=function(t){return{type:e.LOAD_VARIATIONS_DATA_SUCCESS,payload:{variations:t}}},e.prototype.loadHotspotsData=function(t){return void 0===t&&(t="A"),{type:e.LOAD_HOTSPOTS_DATA,payload:{variation:t}}},e.prototype.loadHotspotsDataSuccess=function(t){return{type:e.LOAD_HOTSPOTS_DATA_SUCCESS,payload:{hotspots:t}}},e.prototype.loadAllData=function(t){return void 0===t&&(t="A"),{type:e.LOAD_ALL_DATA,payload:{variation:t}}},e.prototype.loadAllDataSuccess=function(t,n){return{type:e.LOAD_ALL_DATA_SUCCESS,payload:{variations:t,hotspots:n}}},e.prototype.markHotspotAsRead=function(t){return{type:e.MARK_HOTSPOT_AS_READ,payload:{id:t}}},e.prototype.markHotspotAsUnread=function(t){return{type:e.MARK_HOTSPOT_AS_UNREAD,payload:{id:t}}},e.prototype.updateVariation=function(t,n){return{type:e.UPDATE_VARIATION,payload:{name:t,editedAt:n}}},e.prototype.updateVariationSeen=function(t){return{type:e.UPDATE_VARIATION_SEEN,payload:{name:t}}},e.prototype.updateVariationSeenSuccess=function(t,n){return{type:e.UPDATE_VARIATION_SEEN_SUCCESS,payload:{name:t,seenAt:n}}},e}();Ie.LOAD_VARIATIONS_DATA="FEED_LOAD_VARIATIONS_DATA",Ie.LOAD_VARIATIONS_DATA_SUCCESS="FEED_LOAD_VARIATIONS_DATA_SUCCESS",Ie.LOAD_HOTSPOTS_DATA="FEED_LOAD_HOTSPOTS_DATA",Ie.LOAD_HOTSPOTS_DATA_SUCCESS="FEED_LOAD_HOTSPOTS_DATA_SUCCESS",Ie.LOAD_ALL_DATA="FEED_LOAD_ALL_DATA",Ie.LOAD_ALL_DATA_SUCCESS="FEED_LOAD_ALL_DATA_SUCCESS",Ie.MARK_HOTSPOT_AS_READ="FEED_MARK_HOTSPOT_AS_READ",Ie.MARK_HOTSPOT_AS_UNREAD="FEED_MARK_HOTSPOT_AS_UNREAD",Ie.UPDATE_VARIATION="UPDATE_VARIATION",Ie.UPDATE_VARIATION_SEEN="UPDATE_VARIATION_SEEN",Ie.UPDATE_VARIATION_SEEN_SUCCESS="UPDATE_VARIATION_SEEN_SUCCESS";var Te={loading:!1,loadedAll:!1,variations:[],hotspots:[]},_e=function(){function e(){}return e.prototype.startIntroduction=function(t,n,l){return{type:e.START_INTRODUCTION,payload:{hotspotId:t,source:n,args:l}}},e.prototype.cancelIntroduction=function(){return{type:e.CANCEL_INTRODUCTION}},e.prototype.nextStep=function(){return{type:e.NEXT_STEP}},e.prototype.prevStep=function(){return{type:e.PREV_STEP}},e}();_e.START_INTRODUCTION="START_INTRODUCTION",_e.CANCEL_INTRODUCTION="CANCEL_INTRODUCTION",_e.NEXT_STEP="NEXT_STEP",_e.PREV_STEP="PREV_STEP";var Oe={isVisible:!1,step:0},we=function(){function e(){}return e.prototype.setData=function(t){return{type:e.SET_DATA,payload:t}},e.prototype.setAmp=function(t){return{type:e.SET_AMP,payload:{isAmp:t}}},e.prototype.setPasswordProtection=function(t){return{type:e.SET_PASSWORD_PROTECTION,payload:{isProtected:t}}},e}();we.SET_DATA="PAGE_SET_DATA",we.SET_AMP="PAGE_SET_AMP",we.SET_PASSWORD_PROTECTION="PAGE_SET_PASSWORD_PROTECTION";var Me={isPasswordProtected:!1,isUsingPageGenerator:!1,isAmp:!1},De=function(){function e(){}return e.prototype.loadPageDataSuccess=function(t){return{type:e.LOAD_ALL_DATA,payload:t}},e.prototype.changeHeatmapMode=function(t){return{type:e.CHANGE_HEATMAPMODE,payload:t}},e.prototype.heatmapLoadSuccess=function(t){return{type:e.HEATMAP_LOAD_SUCCESS,payload:t}},e.prototype.changePageData=function(t){return{type:e.CHANGE_PAGE_DATA,payload:t}},e}();De.LOAD_ALL_DATA="HEATMAPMENU_LOAD_ALL_DATA",De.CHANGE_HEATMAPMODE="HEATMAPMENU_CHANGE_HEATMAPMODE",De.HEATMAP_LOAD_SUCCESS="HEATMAPMENU_HEATMAP_LOAD_SUCCESS",De.CHANGE_PAGE_DATA="HEATMAPMENU_CHANGE_PAGE_DATA";var ke=function(e){return e[e.clicks=0]="clicks",e[e.mouseMovement=1]="mouseMovement",e[e.scrollDepth=2]="scrollDepth",e}({}),Re=ce("variation")||"A",Pe={variations:[],heatmapMode:1,modeData:[],version:ce("pageVersion")||"newest",variationHash:"",variation:Re,isLoaded:!1},He={ui:function(e,t){switch(void 0===e&&(e=ge),t.type){case ue.SWITCH_TO_DESKTOP:return Object.assign({},e,{displayMode:ie.displayModes.DESKTOP,openedPopup:null,loading:!0,featureModeEnabled:ye(e)});case ue.SWITCH_TO_MOBILE:return Object.assign({},e,{displayMode:ie.displayModes.MOBILE,openedPopup:null,loading:!0,featureModeEnabled:ye(e)});case ue.CHANGE_VARIATION:return Object.assign({},e,{variation:t.payload,openedPopup:null,loading:!0,featureModeEnabled:ye(e)});case ue.SET_LOADING:return Object.assign({},e,{loading:!0,loaded:!1});case ue.SET_LOADED:return Object.assign({},e,{loading:!1,loaded:!0});case ue.SET_FEATURE_MODE:return Object.assign({},e,{featureModeEnabled:t.payload});case ue.SET_POPUP_OPENED:return Object.assign({},e,{openedPopup:t.payload});case ue.SET_POPUP_CLOSED:return Object.assign({},e,{openedPopup:null});case ue.SET_APP_ERROR:return Object.assign({},e,{error:Object.assign({},t.payload,{visible:!0})});case ue.CLEAR_APP_ERROR:return Object.assign({},e,{error:Object.assign({},e.error,{visible:!1})});case ue.FEED_OPEN:return Object.assign({},e,{feedOpened:!0});case ue.FEED_CLOSE:return Object.assign({},e,{feedOpened:!1});case ue.CHECK_HOTSPOT_STATUS_SUCCESS:var n=t.payload,l=void 0;return!n.success||n.data&&n.data.removed?l={opened:!0,type:"removed"}:n.data&&n.data.accessDenied&&(l={opened:!0,type:"accessDenied"}),l?Object.assign({},e,{modal:l,urlHotspotStatusChecked:!0}):e;case ue.OPEN_MODAL:var o=t.payload.data,i=o.button,r=void 0===i?{link:"",label:""}:i,s=o.message,u=o.title,a=o.reaction;return Object.assign({},e,{modal:{title:void 0===u?"":u,message:void 0===s?"":s,button:{label:r.label?r.label:"Close",link:r.link},opened:!0,type:void 0===a?"":a}});case ue.CLOSE_MODAL:return Object.assign({},e,{modal:{button:{label:"",link:""},opened:!1,type:null,title:"",message:""}});case ue.HEATMAPMENU_OPEN:return Object.assign({},e,{heatmapMenuOpened:!0});case ue.HEATMAPMENU_CLOSE:return Object.assign({},e,{heatmapMenuOpened:!1});case ue.HAS_ACCESS_TO_HEATMAP:return Object.assign({},e,{hasAccessToHeatmap:t.payload});case ue.HAS_ACCESS_TO_COLLABORATION:return Object.assign({},e,{hasAccessToCollaboration:t.payload.access});case ue.PAGE_LOADED:return Object.assign({},e,{loadedPageInfo:t.payload});case ue.SET_POPUP_POSITION:return se.a({},e,{openedPopup:se.a({},e.openedPopup,{position:t.payload})});case ue.SET_POPUP_SIZE:var c=t.payload;return se.a({},e,{openedPopup:se.a({},e.openedPopup,{width:c.width,height:c.height})});default:return e}},hotspots:function(e,t){switch(void 0===e&&(e=Ee),t.type){case be.ADD:return Object.assign({},e,{pendingEntry:t.payload});case be.ADD_SUCCESS:return Object.assign({},e,{entries:e.entries.concat([t.payload])});case be.RESET:return Object.assign({},e,{entries:[],pendingEntry:null});case be.LOAD:return Object.assign({},e,{loading:!0});case be.LOADED:return Object.assign({},e,{loading:!1,entries:t.payload});case be.SAVE:return e;case be.SAVE_SUCCESS:var n=Object.assign({},t.payload.hotspot,{persistant:!0,opened:!0});return Object.assign({},e,{entries:e.entries.concat([n])});case be.CLEANUP_UNSAVED:return Object.assign({},e,{pendingEntry:null});case be.EDIT_BY_INDEX:return Object.assign({},e,{entries:e.entries.map(function(e,n){return t.payload.index===n&&(e=Object.assign({},e,t.payload.data)),e})});case be.EDIT_PENDING_ENTRY:return Object.assign({},e,{pendingEntry:Object.assign({},e.pendingEntry,t.payload.data)});case be.ACTIVATE:return Object.assign({},e,{entries:e.entries.map(function(e){return e.id===t.payload.id?e=Object.assign({},e,{opened:!0}):e.opened&&(e=Object.assign({},e,{opened:!1})),e})});case be.DEACTIVATE:return Object.assign({},e,{entries:e.entries.map(function(e){return e.id===t.payload.id&&(e=Object.assign({},e,{opened:!1})),e})});case be.RESOLVE:case be.UNRESOLVE:return e;case be.SET_UNRESOLVED:case be.SET_RESOLVED:return Se(t.payload.hotspot.id,t.payload.hotspot,e);case be.CHANGE_VISIBILITY:return e;case be.VISIBILITY_CHANGED:return Se(t.payload.hotspot.id,t.payload.hotspot,e);case be.REMOVED:return Object.assign({},e,{entries:e.entries.filter(function(e){return e.id!==t.payload.id})});case be.SET_VIEWED_AT:return Se(t.payload.id,{viewedAt:t.payload.viewedAt},e);case be.SET_EDITED_AT:return Object.assign({},e,{entries:e.entries.map(function(e){return t.payload.id!==e.id||e.opened||(e=Object.assign({},e,{editedAt:t.payload.editedAt})),e})});case be.REMOVE_JUST_ADDED:return Se(t.payload.id,{justAdded:!1},e);default:return e}},comments:function(e,t){switch(void 0===e&&(e=Ae),t.type){case Ce.ACTIVATE_HOTSPOT:return Object.assign({},e,{previousHotspotId:e.currentHotspotId,currentHotspotId:t.payload.id,centerVertically:t.payload.centerVertically,currentEntries:[],loading:!0});case Ce.DEACTIVATE_HOTSPOT:return Object.assign({},e,{previousHotspotId:null,currentHotspotId:null,currentEntries:[],centerVertically:!1});case Ce.ADD:return Object.assign({},e,{loading:!0});case Ce.ADD_SUCCESS:return Object.assign({},e,{loading:!1,currentEntries:e.currentEntries.concat([t.payload.comment])});case Ce.POPULATE:return Object.assign({},e,{loading:!1,currentEntries:t.payload.comments.map(function(e){return e})});case Ce.ENABLE_EDIT_MODE:return Object.assign({},e,{currentEntries:e.currentEntries.map(function(e){return t.payload.id===e.id?e=Object.assign({},e,{editMode:!0}):e.editMode&&(e=Object.assign({},e,{editMode:!1})),e})});case Ce.DISABLE_EDIT_MODE:return Object.assign({},e,{currentEntries:e.currentEntries.map(function(e){return t.payload.id===e.id&&(e=Object.assign({},e,{editMode:!1})),e})});case Ce.DISABLE_EDIT_MODE_ALL:return Object.assign({},e,{currentEntries:e.currentEntries.map(function(e){return e.editMode&&(e=Object.assign({},e,{editMode:!1})),e})});case Ce.EDIT:return Object.assign({},e,{currentEntries:e.currentEntries.map(function(e){return t.payload.commentId===e.id&&(e=Object.assign({},e,{text:t.payload.text,editMode:!1})),e})});case Ce.EDIT_SUCCESS:return Object.assign({},e,{currentEntries:e.currentEntries.map(function(e){return t.payload.comment.id===e.id&&(e=Object.assign({},e,t.payload.comment)),e})});case Ce.REMOVE_SUCCESS:case Ce.REMOVE:return Object.assign({},e,{currentEntries:e.currentEntries.filter(function(e){return e.id!==t.payload.comment.id})});case Ce.CENTER_VERTICALLY:return Object.assign({},e,{centerVertically:t.payload.value});default:return e}},feed:function(e,t){switch(void 0===e&&(e=Te),t.type){case Ie.LOAD_VARIATIONS_DATA:return Object.assign({},e,{loading:!0});case Ie.LOAD_VARIATIONS_DATA_SUCCESS:return Object.assign({},e,{loading:!1,variations:t.payload.variations.map(function(e){return Object.assign({},e,{lastEditedAt:new Date(e.lastEditedAt),lastSeenAt:new Date(e.lastSeenAt)})})});case Ie.LOAD_HOTSPOTS_DATA:return Object.assign({},e,{loading:!0});case Ie.LOAD_HOTSPOTS_DATA_SUCCESS:return Object.assign({},e,{loading:!1,hotspots:t.payload.hotspots});case Ie.LOAD_ALL_DATA:return Object.assign({},e,{loading:!0,loadedAll:!1});case Ie.LOAD_ALL_DATA_SUCCESS:var n=t.payload,l=n.hotspots;return Object.assign({},e,{hasUnreadComments:n.variations.filter(function(e){return e.unread}).length>0,loading:!1,loadedAll:!0,variations:t.payload.variations.map(function(e){return Object.assign({},e,{lastEditedAt:e.lastEditedAt?new Date(e.lastEditedAt):null,lastSeenAt:e.lastSeenAt?new Date(e.lastSeenAt):null})}),hotspots:l});case Ie.MARK_HOTSPOT_AS_READ:return Object.assign({},e,{hotspots:e.hotspots.map(function(e){return t.payload.id===e.id&&(e=Object.assign({},e,{unreadComments:0})),e})});case Ie.MARK_HOTSPOT_AS_UNREAD:return Object.assign({},e,{hotspots:e.hotspots.map(function(e){return t.payload.id===e.id&&(e=Object.assign({},e,{unreadComments:e.unreadComments+1})),e})});case Ie.UPDATE_VARIATION:return Object.assign({},e,{variations:e.variations.map(function(e){return t.payload.name===e.variation&&(e=Object.assign({},e,{lastEditedAt:t.payload.editedAt})),e})});case Ie.UPDATE_VARIATION_SEEN:return Object.assign({},e,{loading:!0});case Ie.UPDATE_VARIATION_SEEN_SUCCESS:return Object.assign({},e,{variations:e.variations.map(function(e){return t.payload.name===e.variation&&(e=Object.assign({},e,{lastSeenAt:t.payload.seenAt?new Date(t.payload.seenAt):null})),e})});default:return e}},introduction:function(e,t){switch(void 0===e&&(e=Oe),t.type){case _e.START_INTRODUCTION:return Object.assign({},e,{isVisible:!0,hotspotId:t.payload.hotspotId,source:t.payload.source,args:t.payload.args});case _e.NEXT_STEP:return Object.assign({},e,{step:e.step+1});case _e.PREV_STEP:return Object.assign({},e,{step:e.step-1});case _e.CANCEL_INTRODUCTION:return Object.assign({},Oe);default:return e}},page:function(e,t){switch(void 0===e&&(e=Me),t.type){case we.SET_PASSWORD_PROTECTION:return se.a({},e,{isPasswordProtected:t.payload.isProtected});case we.SET_DATA:return se.a({},e,{isUsingPageGenerator:t.payload.isUsingPageGenerator});case we.SET_AMP:return se.a({},e,{isAmp:t.payload.isAmp});default:return e}},heatmapMenu:function(e,t){switch(void 0===e&&(e=Pe),t.type){case De.LOAD_ALL_DATA:return Object.assign({},e,{variations:t.payload});case De.CHANGE_HEATMAPMODE:return Object.assign({},e,{heatmapMode:t.payload,isLoaded:!1});case De.HEATMAP_LOAD_SUCCESS:return Object.assign({},e,{modeData:t.payload,isLoaded:!0});case De.CHANGE_PAGE_DATA:return Object.assign({},e,{version:t.payload.version,variationHash:t.payload.variationHash,variation:t.payload.variation,isLoaded:!1});default:return e}}};function xe(e){return e.select(function(e){return e.ui})}function Ne(e){return e.select(function(e){return e.hotspots})}function Ve(e){return e.select(function(e){return e.comments})}function Le(e){var t;return xe(e).take(1).subscribe(function(e){return t=e}),t}function Ue(e){var t;return Ve(e).take(1).subscribe(function(e){return t=e}),t}function $e(e){return e===he.heatmap}function Fe(e){return e===he.comment}function je(e){return e===he.sample}var Be=function(e){return e.select(function(e){return e.ui.openedPopup})},Ge=function(){function e(e,t,n){this.store=e,this.commentsActions=t,this.hotspotsActions=n}return e.prototype.activateHotspot=function(e){this.store.dispatch(this.hotspotsActions.activate(e)),this.store.dispatch(this.commentsActions.activateHotspot(e))},e.prototype.deactivateHotspot=function(e){this.store.dispatch(this.hotspotsActions.deactivate(e)),this.store.dispatch(this.commentsActions.deactivateHotspot(e))},e}(),ze=n(142),qe=n(99),We=500,Ke=function(e,t){return Object(ze.retryWhen)(function(n){var l=e;return n.delayWhen(function(){return X.Observable.interval(l).do(function(){return l*=t})})})},Ye=function(){function e(e,t){this.http=e,this.paramsService=t,this.pageData$=this.http.get(te+"/page/data?roomHash="+this.paramsService.roomHash).pipe(Object(ze.map)(function(e){return e.json().data}),Ke(We,2),Object(ze.share)())}return e.prototype.getData=function(){var e=this;return this.cache?X.Observable.of(this.cache):this.pageData$.do(function(t){return e.cache=t}).catch(function(e){return X.Observable.throw("error")})},e.prototype.getVariations=function(){return this.getData().map(function(e){var t=[];return e.contents.forEach(function(e){null===e.responsive_mode&&t.push({id:e.id,variationName:e.variation_name,customVariationName:e.variation_name_custom})}),t})},e.prototype.checkIfPagePreviewExists=function(e){return this.http.get(e).mapTo(!0).catch(function(){return Object(qe.of)(!1)})},e.prototype.getCurrentVariation=function(){var e=this;return this.getData().switchMap(function(e){return e.contents}).filter(function(t,n){return t.variation_name===e.variation&&t.responsive_mode===ie.displayModes.toResponsiveMode(e.displayMode)})},e.prototype.getCurrentVariationPageBlocks=function(){return this.getCurrentVariation().map(function(e){return e.page_blocks})},e.prototype.getCustomerInformation=function(){return this.getData().map(function(e){return{customerId:e.customerId,ownerEmail:e.ownerEmail,ownerId:e.ownerId}})},e.prototype.getCurrentVariationPageBlocksYs=function(){return this.getCurrentVariationPageBlocks().switchMap(function(e){var t=[],n=0;return e.forEach(function(e){t.push({id:e.id,begin:n,end:n+parseInt(e.height,10)}),n+=e.height}),t})},e.prototype.getCurrentVariationPageBlocksYsAsMap=function(){return this.getCurrentVariationPageBlocksYs().toArray().map(function(e){var t=new Map;return e.forEach(function(e){t.set(e.id,e)}),t})},e.prototype.getCurrentVariationPageBlockByY=function(e){return this.getCurrentVariationPageBlocksYs().first(function(t){return t.begin<=e&&t.end>=e})},e.prototype.getCurrentVariationPageBlockIdByY=function(e){return this.getCurrentVariationPageBlockByY(e).map(function(e){return e.id})},e.prototype.getPageId=function(){return this.getData().map(function(e){return e.pageId})},e.prototype.getDefaultExperienceId=function(){return this.getData().map(function(e){return e.defaultExperienceId})},e.prototype.isAmp=function(){return this.getData().map(function(e){return e.amp})},e.prototype.hasRunningExperiments=function(){return this.getData().map(function(e){return e.hasRunningExperiments})},e.prototype.hasCommentAccess=function(){return this.getData().map(function(e){return e.hasCommentAccess})},e.prototype.getIframeUrl=function(e){return te+"/page/html?roomHash="+this.paramsService.roomHash+"&version="+e+"&variation="+this.variation+"&responsiveMode="+ie.displayModes.toResponsiveMode(this.displayMode)},Object.defineProperty(e.prototype,"variation",{get:function(){return this._variation},set:function(e){this._variation=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayMode",{get:function(){return this._displayMode},set:function(e){this._displayMode=e},enumerable:!0,configurable:!0}),e.prototype.setPassword=function(e){return void 0===e&&(e=""),this.http.post(te+"/room/access?roomHash="+this.paramsService.roomHash,{password:e,disable:!e.length}).map(function(e){return e.json()}).catch(function(e){return X.Observable.throw(e)})},e.prototype.getPassword=function(){return this.http.get(te+"/room/password?roomHash="+this.paramsService.roomHash).map(function(e){return e.json()}).catch(function(e){return X.Observable.throw(e)})},e.prototype.getDataCenter=function(){var e=this;return this.dataCenter?X.Observable.of(this.dataCenter):this.getPageId().flatMap(function(t){return e.http.get("https://app.instapage.com/api/secured/predator/get-dc/:pageId".replace(":pageId",t),{withCredentials:!0})}).map(function(e){return e.json().data.dc}).do(function(t){return e.dataCenter=t||"",e.dataCenter}).catch(function(){return X.Observable.of("")})},e}(),Xe=n(73),Je=n(136),Ze=function(){function e(e){this.iframeId=e,this.message$=Xe.Observable.fromEvent(window,"message").filter(this.isEventValid.bind(this)).map(function(e){return JSON.parse(e.data)})}return e.prototype.send=function(e,t){var n=JSON.stringify({type:e,data:t});this.getIframeElement().contentWindow.postMessage(n,"*")},e.prototype.on=function(e){return this.message$.filter(function(t){return t.type===e}).map(function(e){return e.data})},e.prototype.get=function(e){var t=this;void 0===e&&(e=[]),this.generateId();var n=e.map(function(e){return se.a({},e,{token:t.generateId()})});return this.send("get",n),Xe.Observable.of(n).mergeMap(function(e){return Object(Je.forkJoin)(e.map(function(e){return t.on(e.name).filter(function(t){return t.__token===e.token}).map(function(e){return se.e(e,["__token"])}).take(1)}))}).map(function(t){return e.reduce(function(e,n,l){return se.a({},e,((o={})[n.name]=t[l],o));var o},{})})},e.prototype.getIframeElement=function(){return document.querySelector("#"+this.iframeId)},e.prototype.isEventValid=function(e){var t=this.getIframeElement();return t&&"null"===e.origin&&e.source===t.contentWindow&&this.isEventDataValid(e.data)},e.prototype.isEventDataValid=function(e){try{return"string"==typeof e&&Boolean(JSON.parse(e))}catch(e){return!1}},e.prototype.generateId=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},e}(),Qe=function(){function e(){this.communicationService=new Ze("ip_canvas")}return e.prototype.on=function(e){return this.communicationService.on(e)},e.prototype.introduce=function(){return this.communicationService.send("introduce")},e.prototype.getElementDimensions=function(e){return this.communicationService.get([{name:"elementDimensions",data:{selector:e}}]).map(function(e){return e.elementDimensions})},e.prototype.getElementPosition=function(e){return this.communicationService.get([{name:"elementPosition",data:{selector:e}}]).map(function(e){return e.elementPosition})},e.prototype.getElementScrollData=function(e){return this.communicationService.get([{name:"elementScrollData",data:{selector:e}}]).map(function(e){return e.elementScrollData})},e.prototype.getEdgeElements=function(){return this.communicationService.get([{name:"edgeElements"}]).map(function(e){return e.edgeElements})},e.prototype.setElementProperty=function(e,t,n){this.communicationService.send("setElementProperty",{selector:e,value:n,property:t})},e.prototype.setElementsStyle=function(e,t,n){this.communicationService.send("setElementsStyle",{selector:e,value:n,property:t})},e.prototype.setElementAttribute=function(e,t,n){this.communicationService.send("setElementAttribute",{selector:e,value:n,attribute:t})},e.prototype.setWindowScrollTo=function(e,t){this.communicationService.send("setWindowScrollTo",{x:e,y:t})},e.prototype.scrollToBlock=function(e){this.communicationService.send("scrollToBlock",{blockId:e})},e.prototype.openPopup=function(e){this.communicationService.send("openPopup",{popupId:e})},e.prototype.closePopup=function(e){this.communicationService.send("closePopup",{popupId:e})},e}(),et=function(){function e(e,t,n,l,o,i,r,s,u){this.store=e,this.actionsSubject=t,this.uiActions=n,this.commentsActions=l,this.hotspotsActions=o,this.feedActions=i,this.previewFacade=r,this.pageService=s,this.document=u,this.isAmp=!1,this.init()}return e.prototype.init=function(){var e=this;this.store.subscribe(function(t){e.currentState=t}),this.pageService.isAmp().subscribe(function(t){e.isAmp=t})},e.prototype.openHotpost=function(e,t,n,l){var o=this;void 0===l&&(l=null);var i={index:0,actions:[{type:"disableCommentsMode",required:function(e){return e.ui.featureModeEnabled!==he.comment&&(null!==e.ui.openedPopup||null!==l)},callback:function(){o.store.dispatch(o.uiActions.setFeatureMode(he.sample))},ready:function(e,t){return!0},called:!1},{type:"closePopup",required:function(e){return null!==e.ui.openedPopup&&e.ui.openedPopup.id!==l},callback:function(){var e=o.currentState.ui.openedPopup.id;o.previewFacade.closePopup(e),o.store.dispatch(o.uiActions.setPopupClosed(e))},ready:function(e,t){return!0},called:!1},{type:"reset",required:function(e){return!0},callback:function(){o.store.dispatch({type:"_ACTIONS_CHAIN_RESET"})},ready:function(e,t){return!0},called:!1}]},r={index:0,actions:[{type:"changeVariation",required:function(t){return t.ui.variation!==e},ready:function(e,t){return"_ACTIONS_CHAIN_RESET"===e.type},callback:function(){o.store.dispatch(o.uiActions.changeVariation(e))},called:!1},{type:"setDisplayMode",required:function(e){return e.ui.displayMode!==t},ready:function(e,t){return"UI_SET_LOADED"===e.type||"_ACTIONS_CHAIN_RESET"===e.type},callback:function(){t===ie.displayModes.DESKTOP?o.store.dispatch(o.uiActions.switchToDesktop()):t===ie.displayModes.MOBILE&&o.store.dispatch(o.uiActions.switchToMobile())},called:!1},{type:"openPopup",required:function(e){return null!==l&&(!e.ui.openedPopup||e.ui.openedPopup.id!==l)},callback:function(){o.previewFacade.openPopup(l)},ready:function(e,t){return"UI_SET_LOADED"===e.type||"_ACTIONS_CHAIN_RESET"===e.type},called:!1},{type:"enableCommentsMode",required:function(e){return Fe(e.ui.featureModeEnabled)||null!==e.ui.openedPopup||null!==l},callback:function(){o.store.dispatch(o.uiActions.setFeatureMode(he.comment)),o.store.dispatch(o.feedActions.loadVariationsData())},ready:function(e,t){return"UI_SET_LOADED"===e.type||"_ACTIONS_CHAIN_RESET"===e.type||"UI_SET_POPUP_OPENED"===e.type},called:!1},{type:"activate hotspot",required:function(e){return null!==n.match(/^[0-9a-f]{24}$/)},callback:function(e){e.hotspots.entries.some(function(e){return e.id===n})?(o.store.dispatch(o.hotspotsActions.activate(n)),o.store.dispatch(o.commentsActions.activateHotspot(n,!1,!0)),o.store.dispatch(o.feedActions.markHotspotAsRead(n))):o.store.dispatch(o.uiActions.checkHotspotStatus(n))},ready:function(e,t){return"HOTSPOTS_LOADED"===e.type||"_ACTIONS_CHAIN_RESET"===e.type},called:!1}]};return function(e){void 0===e&&(e=!0),o.currentState.comments.currentHotspotId!==n&&(e&&(i.actions=o.filter(i.actions),o.connect(i)),r.actions=o.filter(r.actions),o.connect(r))}},e.prototype.filter=function(e){var t=this;return e.filter(function(e){return e.required(t.currentState)})},e.prototype.connect=function(e){var t=this.getStoreAndAction$().delay(1).subscribe(function(n){var l=e.actions[e.index],o=n.state;l.ready(n.action)&&(l.called||(e.index<e.actions.length-1?e.index+=1:t&&t.unsubscribe(),l.called=!0,l.callback(o)))})},e.prototype.getStoreAndAction$=function(){return this.combined$||(this.combined$=this.actionsSubject.asObservable().withLatestFrom(this.store).map(function(e){return{action:e[0],state:e[1]}})),this.combined$},e}(),tt=function(){function e(e,t){this.http=e,this.paramsService=t}return e.prototype.fetch=function(e){var t=void 0===e?{}:e,n=t.variation,l=void 0===n?"A":n,o=t.displayMode,i=void 0===o?0:o,r=t.popupId,s=void 0===r?null:r,u=new Y.i;return u.set("roomHash",this.paramsService.roomHash),u.set("variation",l),u.set("displayMode",String(i)),s&&u.set("popupId",s),this.http.get(te+"/hotspots",{search:u}).map(function(e){var t=e.json();return t.success?t.data.hotspots.map(function(e){return e.persistant=!0,e}):[]})},e.prototype.getHotspotStatus=function(e){var t=new Y.i;return t.set("roomHash",this.paramsService.roomHash),this.http.get(te+"/hotspot-status/"+e,{search:t}).map(function(e){return e.json()})},e}(),nt=n(1005),lt=n(75),ot=n(1028),it=n.n(ot),rt=function(){function e(e,t,n){var l=this;this.actions$=e,this.pageService=t,this.currentUserService=n,this.addedHotspot$=this.actions$.ofType(be.SAVE_SUCCESS).map(lt.d).do(function(e){e.hotspot.justAdded&&l.trackEvent("Added Hotspot",{existingTeamMember:!!l.currentUserService.user.role,visibility:e.hotspot.visibility?"team":"everyone"})}),this.addedHotspotComment$=this.actions$.ofType(Ce.ADD_SUCCESS,be.SAVE).map(lt.d).switchMap(function(e){return X.Observable.combineLatest(l.pageService.getPageId(),l.pageService.getCustomerInformation()).take(1).map(function(t){return{data:e,pageId:t[0],customerId:t[1].customerId}})}).do(function(e){var t=e.pageId,n=e.customerId,o=l.getNumberOfMentions(e.data.comment.text);l.trackEvent("Added Hotspot Comment",{invitedGuest:o,pageId:t,subaccountId:n})}),this.addedAnonymousComment$=this.actions$.ofType(_e.START_INTRODUCTION).bufferWhen(function(){return l.actions$.ofType(be.SAVE_SUCCESS)}).do(function(e){var t=e.pop();if(t){var n=l.getNumberOfMentions(t.payload.args.text);l.trackEvent("Added Hotspot Comment",{invitedGuest:n})}}),this.resolveHotspot$=this.actions$.ofType(be.RESOLVE).map(lt.d).withLatestFrom(this.pageService.getPageId(),this.pageService.getCustomerInformation()).do(function(e){return l.trackEvent("Resolve Hotspot",{pageID:e[1],subaccountId:e[2].customerId})}),this.editHotspotComment$=this.actions$.ofType(Ce.EDIT).map(lt.d).withLatestFrom(this.pageService.getPageId(),this.pageService.getCustomerInformation()).do(function(e){return l.trackEvent("Edit Hotspot Comment",{pageID:e[1],subaccountId:e[2].customerId})}),this.deleteHotspotComment$=this.actions$.ofType(Ce.REMOVE).map(lt.d).withLatestFrom(this.pageService.getPageId(),this.pageService.getCustomerInformation()).do(function(e){return l.trackEvent("Delete Hotspot Comment",{pageID:e[1],subaccountId:e[2].customerId})}),this.heatmapModeChanged$=this.actions$.ofType(ue.HEATMAP_MODE_BUTTON_CLICKED).map(lt.d).withLatestFrom(this.pageService.getPageId(),this.pageService.getCustomerInformation(),this.pageService.getDefaultExperienceId()).do(function(e){l.trackEvent("Heatmap Mode Changed",{isHeatmapEnabled:e[0],subaccountId:e[2].customerId,experienceID:e[1],pageID:e[3]})}),this.initialised=void 0!==window.analyticsLoaded?analyticsLoaded:Promise.reject(null),this.checkForInvitation(),this.biClient=new it.a(ne)}return e.prototype.checkForInvitation=function(){var e=this;window.location.search.slice(1).split("&").reduce(function(e,t){var n,l=t.split("=");return Object.assign({},e,((n={})[l[0]]=l[1],n))},{}).invitation&&this.pageService.getCustomerInformation().subscribe(function(t){var n=t.customerId,l=t.ownerEmail,o=t.ownerId,i=e.currentUserService.user.email,r="Invitation:"+n;localStorage.getItem(r)||(e.trackEvent("Invited to Collaborate",{subaccountID:n,accountID:o,accountEmail:l,invitedMember:i,ifPreviewed:!0}),localStorage.setItem(r,"accepted"))})},e.prototype.getNumberOfMentions=function(e){var t=e.match(/(\[\~.{24}\:\+[^\]]*\])/g);return t?t.length:0},e.prototype.identify=function(e){var t=this;e&&this.initialised.then(function(){var n=t.currentUserService.user.email;t.isBiTestsAccount(n)?t.biClient.identify({userId:e,traits:{email:n}}):analytics.identify(e,{email:n})})},e.prototype.trackEvent=function(e,t){var n=this;void 0===t&&(t={}),this.initialised.then(function(){var l=n.currentUserService.user.email,o=n.currentUserService.user.id,i=Object.assign({},{email:l},t);l&&n.isBiTestsAccount(l)?n.biClient.track({event:e,userId:o,properties:i}):analytics.track(e,i)})},e.prototype.isBiTestsAccount=function(e){var t=new RegExp(".*tests-bi.*@instapage.com");return e.match(t)},e}();se.b([Object(lt.b)({dispatch:!1}),se.d("design:type",Object)],rt.prototype,"addedHotspot$",void 0),se.b([Object(lt.b)({dispatch:!1}),se.d("design:type",Object)],rt.prototype,"addedHotspotComment$",void 0),se.b([Object(lt.b)({dispatch:!1}),se.d("design:type",Object)],rt.prototype,"addedAnonymousComment$",void 0),se.b([Object(lt.b)({dispatch:!1}),se.d("design:type",Object)],rt.prototype,"resolveHotspot$",void 0),se.b([Object(lt.b)({dispatch:!1}),se.d("design:type",Object)],rt.prototype,"editHotspotComment$",void 0),se.b([Object(lt.b)({dispatch:!1}),se.d("design:type",Object)],rt.prototype,"deleteHotspotComment$",void 0),se.b([Object(lt.b)({dispatch:!1}),se.d("design:type",Object)],rt.prototype,"heatmapModeChanged$",void 0);var st,ut=function(){function e(e,t,n){this.http=e,this.paramsService=t,this.currentUserService=n}return e.prototype.fetchTeamMembers=function(){var e=new Y.i;return e.set("roomHash",this.paramsService.roomHash),this.http.get(te+"/teammembers",{search:e}).map(function(e){var t=e.json();return t.success?(t.data.users.forEach(function(e){e.teammember=!0}),t.data.users):[]})},e.prototype.fetchMentions=function(){var e=this;if(this.mentionsCache)return X.Observable.of(this.mentionsCache);if(this.mentions)return this.mentions;var t=new Y.i;return t.set("roomHash",this.paramsService.roomHash),this.mentions=this.http.get(te+"/mentions",{search:t}).map(function(t){var n=t.json();return e.mentionsCache=n.success&&n.data.mentions?n.data.mentions:[],e.mentionsCache}).share().catch(function(e){return X.Observable.throw("error")}),this.mentions},e.prototype.getPreparedMentions=function(e){var t=this;return void 0===e&&(e=!1),this.preparedMentionsCache?X.Observable.of(this.preparedMentionsCache):this.fetchMentions().map(function(n){var l=new D,o=[];return n.forEach(function(n){if("user"===n.type){if(e&&t.currentUserService.id===n.data.id)return;o.push({value:n.mentiondId,slug:n.data.slug,firstName:n.data.firstName,lastName:n.data.lastName,label:l.transform(n.data),description:n.data.email,avatar:n.data.avatar,type:n.type,role:n.data.role})}else"special"===n.type?o.push({value:n.mentiondId,slug:n.data.slug,label:n.data.label,description:n.data.description,avatar:null,type:n.type}):"invite"===n.type&&o.push({value:n.mentionId,type:n.type,label:l.transform(n.data),description:n.data.email,slug:n.data.slug,avatar:null})}),t.preparedMentionsCache=o,o})},e.prototype.getPreparedTeamMentions=function(e){return void 0===e&&(e=!1),this.getPreparedMentions(e).map(function(e){return e.filter(function(e){return"special"===e.type||ie.roles.isTeamMember(e.role)})})},e.prototype.clearCache=function(){this.mentionsCache=null,this.preparedMentionsCache=null},e}(),at=function(){function e(e){this.usersService=e}return e.prototype.init=function(e,t,n,l){var o=this;this.currentUserId=e,this.users$=new J.BehaviorSubject(t),this.usersService.fetchTeamMembers().subscribe(function(e){o.users$.next(o.addUsers(o.users$.getValue(),e))}),n.subscribe(function(e){e.user.online=!0,o.users$.next(o.addUser(o.users$.getValue(),e.user))}),l.subscribe(function(e){o.users$.next(o.removeUser(o.users$.getValue(),e.userId))})},e.prototype.initUserDataChanged=function(e){var t=this;e.subscribe(function(e){t.users$.next(t.currentUserId===e.userData.id?t.removeUser(t.users$.getValue(),e.userId):t.changeUserData(t.users$.getValue(),e.userData,e.userId)),t.usersService.clearCache()})},e.prototype.setCurrentUserId=function(e){var t=this.users$.getValue();this.currentUserId=e;var n=this.getArrayIndex(t,e);n>-1&&(t.splice(n,1),this.users$.next(t))},e.prototype.addUsers=function(e,t){var n=this;return t.forEach(function(t){n.addUser(e,t)}),e},e.prototype.addUser=function(e,t){var n=this.getArrayIndex(e,t.id);return n>-1?e[n]=Object.assign({},e[n],t):e.push(t),e},e.prototype.removeUser=function(e,t){var n=this.getArrayIndex(e,t);return n>-1&&(e[n].teammember?e[n].online=!1:e.splice(n,1)),e},e.prototype.getArrayIndex=function(e,t){for(var n=-1,l=0;l<e.length;l+=1)if(e[l].id===t){n=l;break}return n},e.prototype.getUsers=function(){var e=this;return this.users$.asObservable().map(function(t){return t.filter(function(t){return t.id!==e.currentUserId})})},e.prototype.changeUserData=function(e,t,n){var l=this.getArrayIndex(e,n);return l>-1?e[l]=Object.assign({},e[l],t):e.some(function(e){return e.id===t.id})||e.push(t),e},e.prototype.reset=function(){this.users$&&this.users$.next([])},e}(),ct=function(){function e(e,t,n,l,o,i,r,s,u,a,c){this.store=e,this.hotspotsActions=t,this.commentsActions=n,this.uiActions=l,this.feedActions=o,this.analyticsTracking=i,this.window=r,this.paramsService=s,this.currentUserService=u,this.usersOnlineService=a,this.accessService=c}return e.prototype.connect=function(){var e=this,t=/s:$/.test(this.window.location.protocol)?"wss":"ws";this.socket=nt(t+"://"+this.window.location.host,{query:{roomHash:this.paramsService.roomHash},transports:["websocket","polling"],secure:"wss"===t}),this.socket.on("connection",function(t){if(t.error)return e.store.dispatch(e.uiActions.setError({code:""}));e.currentUserService.user=t.user,e.currentUserService.user.introModalSeen=t.introModalSeen,e.analyticsTracking.identify(t.externalId),e.onConnect()}),this.socket.on("disconnect",function(){console.log("disconnected"),e.onDisconnect()})},e.prototype.getSocket=function(){return this.socket},e.prototype.onConnect=function(){var e=this;this.subscriptions=[],this.joinedVariationData&&this.joinVariation(this.joinedVariationData),this.hotspotCreated$=X.Observable.create(function(t){e.socket.on("hotspotCreated",function(n){if(n.error)return e.store.dispatch(e.uiActions.setError({code:""}));t.next(n)})}),this.commentAdded$=X.Observable.create(function(t){e.socket.on("commentAdded",function(n){if(n.error)return e.store.dispatch(e.uiActions.setError({code:""}));t.next(n)})}),this.hotspotJoined$=X.Observable.create(function(t){e.socket.on("hotspotJoined",function(n){if(n.error)return e.store.dispatch(e.uiActions.setError({code:""}));t.next(n)})}),this.hotspotChanged$=X.Observable.create(function(t){e.socket.on("hotspotChanged",function(n){if(n.error)return e.store.dispatch(e.uiActions.setError({code:""}));t.next(n)})}),this.commentEdited$=X.Observable.create(function(t){e.socket.on("commentEdited",function(n){if(n.error)return e.store.dispatch(e.uiActions.setError({code:""}));t.next(n)})}),this.commentDeleted$=X.Observable.create(function(t){e.socket.on("commentDeleted",function(n){if(n.error)return e.store.dispatch(e.uiActions.setError({code:""}));t.next(n)})}),this.userIsTyping$=X.Observable.create(function(t){e.socket.on("userIsTyping",function(e){t.next(e)})}),this.hotspotRemoved$=X.Observable.create(function(t){e.socket.on("hotspotDeleted",function(n){if(n.error)return e.store.dispatch(e.uiActions.setError({code:""}));t.next(n)})}),this.userConnected$=X.Observable.create(function(t){e.socket.on("userConnected",function(n){if(n.error)return e.store.dispatch(e.uiActions.setError({code:""}));t.next(n)})}),this.userDisconnected$=X.Observable.create(function(t){e.socket.on("userDisconnected",function(n){if(n.error)return e.store.dispatch(e.uiActions.setError({code:""}));t.next(n)})}),this.variationJoined$=X.Observable.create(function(t){e.socket.on("variationJoined",function(n){if(n.error)return e.store.dispatch(e.uiActions.setError({code:""}));t.next(n)})}),this.variationLeft$=X.Observable.create(function(t){e.socket.on("variationLeft",function(n){if(n.error)return e.store.dispatch(e.uiActions.setError({code:""}));t.next(n)})}),this.userConnectedToVariation$=X.Observable.create(function(t){e.socket.on("userConnectedToVariation",function(e){t.next(e)})}),this.userDisconnectedFromVariation$=X.Observable.create(function(t){e.socket.on("userDisconnectedFromVariation",function(e){t.next(e)})}),this.pongEvent$=X.Observable.create(function(t){e.socket.on("pongEvent",function(e){t.next(e)})}),this.resolveHotspotResponse$=X.Observable.create(function(t){e.socket.on("resolveHotspotResponse",function(n){if(n.error)return e.store.dispatch(e.uiActions.setError({code:""}));t.next(n)})}),this.changeVisibilityResponse$=X.Observable.create(function(t){e.socket.on("changeVisibilityResponse",function(n){if(n.error)return e.store.dispatch(e.uiActions.setError({code:""}));t.next(n)})}),this.createHotspotResponse$=X.Observable.create(function(t){e.socket.on("createHotspotResponse",function(n){if(n.error)return e.store.dispatch(e.uiActions.setError({code:""}));t.next(n)})}),this.introduceResponse$=X.Observable.create(function(t){e.socket.on("introduceResponse",function(n){if(n.error)return e.store.dispatch(e.uiActions.setError({code:""}));t.next(n)})}),this.userDataChanged$=X.Observable.create(function(t){e.socket.on("userDataChanged",function(n){if(n.error)return e.store.dispatch(e.uiActions.setError({code:""}));t.next(n)})}),this.changeInVariation$=X.Observable.create(function(t){e.socket.on("changeInVariation",function(e){t.next(e)})}),this.hotspotViewed$=X.Observable.create(function(t){e.socket.on("hotspotViewed",function(e){t.next(e)})}),this.subscriptions.push(this.hotspotCreated$.subscribe(function(t){t.hotspot.persistant=!0,e.store.dispatch(e.hotspotsActions.addSuccess(t.hotspot));var n=Le(e.store);n.feedOpened&&e.store.dispatch(e.feedActions.loadAllData(n.variation))})),this.subscriptions.push(this.hotspotJoined$.subscribe(function(t){e.store.dispatch(e.commentsActions.populate(t.comments));var n=Le(e.store);n.feedOpened&&e.store.dispatch(e.feedActions.loadHotspotsData(n.variation))})),this.subscriptions.push(this.commentAdded$.subscribe(function(t){e.store.dispatch(e.commentsActions.addSuccess(t.comment))})),this.subscriptions.push(this.hotspotChanged$.subscribe(function(t){if("resolved"===t.type)t.hotspot.resolvedAt?(e.store.dispatch(e.hotspotsActions.setResolved(t.hotspot)),e.store.dispatch(e.commentsActions.disableEditModeAll())):e.store.dispatch(e.hotspotsActions.setUnResolved(t.hotspot)),e.store.dispatch(e.feedActions.loadHotspotsData(Le(e.store).variation));else if("visibilityChanged"===t.type)e.store.dispatch(e.hotspotsActions.visibilityChanged(t.hotspot));else if("commentAdded"===t.type){var n=Ue(e.store).currentHotspotId;e.store.dispatch(e.hotspotsActions.setEditedAt(t.hotspot.id,t.hotspot.editedAt)),n===t.hotspot.id?e.socket.emit("markHotspotAsViewed",{hotspotId:t.hotspot.id}):Le(e.store).feedOpened&&e.store.dispatch(e.feedActions.loadVariationsData())}})),this.subscriptions.push(this.hotspotViewed$.subscribe(function(t){Le(e.store).feedOpened&&e.store.dispatch(e.feedActions.loadAllData(t.variation)),e.store.dispatch(e.feedActions.updateVariationSeen(t.variation))})),this.subscriptions.push(this.commentEdited$.subscribe(function(t){e.store.dispatch(e.commentsActions.editSuccess(t.comment));var n=Le(e.store);n.feedOpened&&e.store.dispatch(e.feedActions.loadHotspotsData(n.variation))})),this.subscriptions.push(this.commentDeleted$.subscribe(function(t){e.store.dispatch(e.commentsActions.removeSuccess(t.comment));var n=Le(e.store);n.feedOpened&&e.store.dispatch(e.feedActions.loadAllData(n.variation))})),this.subscriptions.push(this.hotspotRemoved$.subscribe(function(t){Ue(e.store).currentHotspotId===t.hotspotId&&e.store.dispatch(e.commentsActions.deactivateHotspot(t.hotspotId)),e.store.dispatch(e.hotspotsActions.removed(t.hotspotId));var n=Le(e.store);n.feedOpened&&e.store.dispatch(e.feedActions.loadAllData(n.variation))})),this.subscriptions.push(this.changeInVariation$.subscribe(function(t){var n=Le(e.store);n.feedOpened?e.store.dispatch(e.feedActions.loadAllData(n.variation)):e.currentUserService.isAnonymous()||e.store.dispatch(e.feedActions.updateVariation(t.variation,new Date(t.lastEditedAt)))})),this.subscriptions.push(this.resolveHotspotResponse$.subscribe(function(t){var n=Le(e.store);n.feedOpened&&e.store.dispatch(e.feedActions.loadHotspotsData(n.variation))})),setInterval(this.ping.bind(this),18e4)},e.prototype.onDisconnect=function(){this.subscriptions.forEach(function(e){e.unsubscribe(),e=null})},e.prototype.createHotspot=function(e){var t=this;return this.socket.emit("createHotspot",{x:e.hotspot.x,y:e.hotspot.y,section:e.hotspot.section,visibility:e.hotspot.visibility,displayMode:e.hotspot.displayMode,variation:e.hotspot.variation,popupId:e.hotspot.popupId,commentText:e.comment.text,options:e.options}),this.createHotspotResponse$.map(function(n){var l=Le(t.store).variation;return t.store.dispatch(t.feedActions.updateVariationSeen(l)),n.index=e.index,n.hotspot.justAdded=!0,n})},e.prototype.joinHotspot=function(e){this.socket.emit("joinHotspot",{hotspotId:e})},e.prototype.leaveHotspot=function(e){this.store.dispatch(this.hotspotsActions.setViewedAt(e,Date.now())),this.socket.emit("leaveHotspot",{hotspotId:e})},e.prototype.joinVariation=function(e){var t=void 0===e?{}:e,n=t.variation,l=t.displayMode,o=t.popupId;this.joinedVariationData={variation:void 0===n?"A":n,displayMode:void 0===l?0:l,popupId:void 0===o?null:o},this.socket.emit("joinVariation",this.joinedVariationData)},e.prototype.leaveVariation=function(e){var t=void 0===e?{}:e,n=t.variation,l=t.displayMode,o=t.popupId;this.socket.emit("leaveVariation",{variation:void 0===n?"A":n,displayMode:void 0===l?0:l,popupId:void 0===o?null:o})},e.prototype.addComment=function(e){return this.socket.emit("addComment",{hotspotId:e.hotspotId,text:e.comment.text,options:e.options}),this.commentAdded$.map(function(e){return e.comment})},e.prototype.resolveHotspot=function(e,t){return void 0===t&&(t=!0),this.socket.emit("resolveHotspot",{hotspotId:e,resolved:t}),this.resolveHotspotResponse$},e.prototype.changeHotspotVisibility=function(e,t){return this.socket.emit("changeVisibility",{hotspotId:e,visibility:t}),this.changeVisibilityResponse$},e.prototype.editComment=function(e,t,n){this.socket.emit("editComment",{hotspotId:e,commentId:t,text:n})},e.prototype.removeComment=function(e,t){this.socket.emit("deleteComment",{hotspotId:e,commentId:t})},e.prototype.imTyping=function(e){this.socket.emit("imTyping",{hotspotId:e})},e.prototype.ping=function(){this.socket.emit("clientPing")},e.prototype.getUserIsTypingObservable=function(){return this.userIsTyping$},e.prototype.introduce=function(e,t,n,l){return void 0===l&&(l=!1),this.socket.emit("introduce",{user:e,action:t,actionArgs:n,emailConfirmed:l}),this.introduceResponse$},e}(),dt=function(){function e(e,t,n){this.http=e,this.pageService=t,this.paramsService=n}return e.prototype.getVariations=function(e,t){void 0===e&&(e="A"),void 0===t&&(t=!0);var n=new Y.i;return n.set("roomHash",this.paramsService.roomHash),n.set("currentVariation",e),n.set("setCurrentAsSeen",t.toString()),this.http.get(te+"/commentfeed",{search:n}).map(function(e){return e.json()})},e.prototype.getHotspots=function(e){void 0===e&&(e="A");var t=new Y.i;return t.set("roomHash",this.paramsService.roomHash),t.set("variation",e),this.http.get(te+"/commentfeedhotspots",{search:t}).map(function(e){return e.json()})},e.prototype.updateVariationSeen=function(e){return this.http.post(te+"/updatevariationseen?roomHash="+this.paramsService.roomHash,{variation:e}).map(function(e){return e.json()})},e.prototype.isUnread=function(e){var t=e.reduce(function(e,t){var n=t.lastSeenAt;return n&&n.getTime()>e?n.getTime():e},0);return e.reduce(function(e,t){var n=t.lastEditedAt;return n&&n.getTime()>e?n.getTime():e},0)>t},e}(),pt=function(){function e(e){this.localStorage=e.localStorage}return Object.defineProperty(e.prototype,"length",{get:function(){return this.localStorage.length},enumerable:!0,configurable:!0}),e.prototype.key=function(e){return this.localStorage.key(e)},e.prototype.getItem=function(e){var t,n=this.localStorage.getItem(e),l=null;return n&&((t=JSON.parse(n)).lifetime>0&&Date.now()-t.created<t.lifetime?l=t.value:(this.removeItem(e),l=null)),l},e.prototype.setItem=function(e,t,n){void 0===n&&(n=0);var l={value:t,created:Date.now(),lifetime:n};this.localStorage.setItem(e,JSON.stringify(l))},e.prototype.removeItem=function(e){this.localStorage.removeItem(e)},e.prototype.clear=function(){this.localStorage.clear()},e.prototype.hasItem=function(e){return!!this.getItem(e)},e}(),ht=function(){function e(e,t,n,l,o,i,r){this.usersService=e,this.pageService=t,this.paramsService=n,this.http=l,this.store=o,this.uiActions=i,this.analytics=r}return e.prototype.sendInvites=function(e){var t=this,n=te+"/invite?roomHash="+this.paramsService.roomHash,l=Le(this.store),o=l.displayMode,i=l.variation;return this.pageService.getCustomerInformation().subscribe(function(n){t.analytics.trackEvent("Invited to Collaborate",{subaccountID:n.customerId,accountID:n.ownerId,accountEmail:n.ownerEmail,invitedMember:e.join(", ")})}),this.http.post(n,{emails:e,variation:i,displayMode:o}).catch(function(e){return t.store.dispatch(t.uiActions.setError({code:""})),X.Observable.throw(e)})},e}(),mt=function(){function e(e,t){this.applicationRef=e,this.componentResolver=t,this.components=[]}return e.prototype.createComponent=function(e,t){var n=this,l=this.getComponentIndex(e),o=this.componentResolver.resolveComponentFactory(e);if(l>=0){var i=this.components[l].componentRef;i.hostView.destroyed||i.destroy()}var r=t.createComponent(o);return r.onDestroy(function(){n.components.splice(l,1)}),this.components.push({componentRef:r,component:e}),r},e.prototype.getComponentIndex=function(e){return this.components.findIndex(function(t){return t.component===e})},e}(),ft={found:!1,type:0},vt=function(){function e(e){var t=this;this.usersService=e,this.mentionsChanged=new l.EventEmitter,this.notificationChanged=new l.EventEmitter,this._notification=ft,this.canSend$=new J.BehaviorSubject(!0),this.mentionsChanged.combineLatest(this.notificationChanged).startWith([[],{}]).subscribe(function(e){var n=e[1],l=void 0===n?ft:n;t._mentions=e[0],t._notification=l,t.refresh()})}return e.prototype.refresh=function(){if(!this._notification.type)return this.canSend$.next(!0);this.canSend$.next(!this._notification.found)},e}(),gt=function(){function e(e){this.paramsService=e}return e.prototype.setParams=function(e){return this.params=e,this},e.prototype.getParams=function(){return this.params},e.prototype.getPreviewLink=function(){var e=this.params,t=e.popupId;return"/redirectToPreview/"+this.paramsService.roomHash+"/"+e.variation+"/"+e.displayMode+(t?"/"+t:"")},e.prototype.getBuilderLink=function(){var e=this.params;return"/redirectToBuilder/"+this.paramsService.roomHash+"/"+e.variation+"/"+e.displayMode},e}(),yt=(n(291),function(){function e(e,t,n){this.http=e,this.pageService=t,this.accessService=n,this.cache={},this.openPopup=new l.EventEmitter,this.userNotLoggedIn={success:!1,error:!0,data:{button:{label:"Login",link:"/login"},has_access:!1,message:"",reaction:"login",title:""}}}return e.prototype.getCacheKey=function(e){return e.displayMode+"-"+e.variation+"-"+e.variationHash+"-"+e.version+"-"+e.heatmapMode+"-"+e.popupId},e.prototype.getData=function(e,t){var n=this;return void 0===t&&(t=new Y.i),X.Observable.combineLatest(this.pageService.getPageId(),this.accessService.getAppToken(),this.pageService.getDataCenter()).flatMap(function(l){var o=l[0],i=l[2],r=new Y.d({Authorization:"Bearer "+l[1]});return t.set("pageId",o),n.http.get(e.replace(":data-center",i),{search:t,headers:r}).map(function(e){return e.json().data}).catch(function(e){return X.Observable.throw(e)})})},e.prototype.getHeatmapData=function(e){var t=this,n=e.displayMode,l=e.variation,o=e.variationHash,i=e.version,r=e.heatmapMode,s=e.popupId;if(""===o||n===ie.displayModes.MOBILE&&r===ke.mouseMovement)return X.Observable.of([]);var u=this.getCacheKey({displayMode:n,variation:l,variationHash:o,version:i,heatmapMode:r,popupId:s});if(this.cache.hasOwnProperty(u))return X.Observable.of(this.cache[u]);var a=new Y.i;return a.set("displayMode",n),a.set("variation",l),a.set("variationHash",o),a.set("event",r),a.set("popupId",s),a.set("version",i),this.getData("https://heatmap-server.instapage.com/v2/:data-center/event-data",a).do(function(e){e&&(t.cache[u]=e)}).catch(function(){return X.Observable.of([])})},e.prototype.getPageData=function(){var e=this,t="pagedata";return this.cache.hasOwnProperty(t)?X.Observable.of(this.cache[t]):this.getData("https://heatmap-server.instapage.com/v2/:data-center/page-data").do(function(n){e.cache[t]=n}).catch(function(e){return X.Observable.throw(e)})},e.prototype.isHeatmapFeatureEnabled=function(){var e=this;return X.Observable.combineLatest(this.pageService.getPageId()).flatMap(function(t){var n=t[0],l=new FormData;return l.append("page_id",n),l.append("feature","heatmap"),l.append("personal","true"),e.http.post("https://app.instapage.com/api/secured/subscription/get-product-feature",l,{withCredentials:!0}).map(function(e){return e.json()}).catch(function(t){return X.Observable.of(e.userNotLoggedIn)})})},e}()),bt=((st={})["@"]={keyCode:50,shiftKey:!0},st.ArrowDown={keyCode:40},st.ArrowUp={keyCode:38},st.Enter={keyCode:13},st.Escape={keyCode:27},st.Tab={keyCode:9},st.Space={keyCode:32},st.Backspace={keyCode:8},st.Backspace={keyCode:46},st);function Et(e,t){if(!bt.hasOwnProperty(e))throw"Unhandled key!";if(t.key&&t.key===e)return!0;var n=bt[e],l=!0;for(var o in n)if(n[o]!==t[o]){l=!1;break}return l}function St(e,t){return e.filter(function(e){return Et(e,t)}).length>0}var Ct=function(){function e(e,t,n,l,o,i,r,s,u){this.popoverRef=e,this.window=t,this.accessService=n,this.shareService=l,this.pageService=o,this.pageActions=i,this.uiActions=r,this.usersService=s,this.store=u,this.color="action",this.copied=!1,this.tagsInputErrors=!1,this.tags=[],this.invite={done:!1,busy:!1},this.passwordForm={visible:!1,password:"",busy:!1,editMode:!1,passwordRevealed:!1},this.currentPassword="",this.currentProtection=!1,this.popoverClosed=this.popoverClosed.bind(this),this.popoverClose$=e.close.subscribe(this.popoverClosed)}return e.prototype.ngOnInit=function(){var e,t,n=this;this.currentProtection=(e=this.store,function(e){return e.select(function(e){return e.page})}(e).take(1).subscribe(function(e){return t=e}),t).isPasswordProtected,this.canSetPassword()&&this.pageService.getPassword().subscribe(function(e){n.currentPassword=e.data.password,n.currentProtection=e.data.isProtected,n.passwordForm.password=n.currentPassword,n.passwordForm.visible=n.currentProtection})},e.prototype.getLink=function(){var e=Le(this.store),t=e.displayMode,n=e.variation;return window.location.href.split("?")[0]+"?displayMode="+t+"&variation="+n+"&shared=yes"},e.prototype.popoverClosed=function(){this.shareInput&&this.deselectText(this.shareInput.element.nativeElement),this.passwordForm.passwordRevealed=!1},e.prototype.copySuccess=function(){var e=this;this.copied=!0,setTimeout(function(){e.copied=!1},3e3)},e.prototype.copyError=function(){var e=this.shareInput.element.nativeElement;e.focus(),e.select()},e.prototype.deselectText=function(e){e&&"number"==typeof e.selectionStart&&(e.selectionEnd=e.selectionStart,e.blur()),this.window.getSelection&&this.window.getSelection().removeAllRanges()},e.prototype.ngOnDestroy=function(){this.popoverClose$.unsubscribe()},e.prototype.sendInvitations=function(){var e=this;this.tags.length&&!this.invite.busy&&(this.invite.busy=!0,this.shareService.sendInvites(this.tags).delay(1e3).finally(function(){e.invite.busy=!1}).subscribe(function(t){e.usersService.clearCache(),e.invite.done=!0,setTimeout(function(){e.invite.done=!1},3e3)},function(t){e.invite.busy=!1}))},e.prototype.emailValidation=function(e){return Object(K.isEmail)(e)?null:"Please enter valid email address"},e.prototype.canSetPassword=function(){var e=this.accessService.getCurrentUser();return this.accessService.isManager(e)},e.prototype.onRecipentsChange=function(e){this.tags=e.map(function(e){return e.label})},e.prototype.passwordKeyUpHandler=function(e){this.passwordForm.password=e.target.value,Et("Enter",e)&&this.setPassword(this.passwordForm.password)},e.prototype.submitPassword=function(){this.passwordForm.password.length&&!this.passwordForm.busy&&this.setPassword(this.passwordForm.password)},e.prototype.setPassword=function(e){var t=this;this.passwordForm.busy=!0,this.pageService.setPassword(e).finally(function(){t.passwordForm.busy=!1}).subscribe(function(n){t.currentProtection&&t.passwordForm.editMode&&e!==t.currentPassword&&t.showPasswordNotification(),n.data.protection&&(t.currentPassword=e),t.currentProtection=n.data.protection,t.store.dispatch(t.pageActions.setPasswordProtection(t.currentProtection)),t.resetPasswordForm()})},e.prototype.toggleProtection=function(e){this.passwordForm.visible=e,this.passwordForm.visible?this.focusPasswordInput():(this.passwordForm.passwordRevealed=!1,this.setPassword(""))},e.prototype.turnOnEditPasswordMode=function(){this.passwordForm.editMode=!0,this.focusPasswordInput()},e.prototype.resetPasswordForm=function(){this.passwordForm.password=this.currentPassword,this.passwordForm.editMode=!1,this.passwordForm.passwordRevealed=!1},e.prototype.togglePassword=function(){this.passwordForm.passwordRevealed=!this.passwordForm.passwordRevealed,this.focusPasswordInput()},e.prototype.focusPasswordInput=function(){var e=this;setTimeout(function(){e.passwordInput.element.nativeElement.focus()},0)},e.prototype.showPasswordNotification=function(){this.store.dispatch(this.uiActions.setError({code:"",message:"Please don't forget to notify your guest users on the password change"}))},e}(),At=n(1064),It=function(){function e(e){this.element=e,this.onSuccess=new l.EventEmitter,this.onError=new l.EventEmitter,this.clipboardSuccess=this.clipboardSuccess.bind(this),this.clipboardError=this.clipboardError.bind(this)}return e.prototype.ngOnInit=function(){var e=this;this.options=this.targetElement?{target:function(){return e.targetElement}}:{text:function(){return e.content}},this.clipboard=new At(this.element.nativeElement,this.options),this.clipboard.on("success",this.clipboardSuccess),this.clipboard.on("error",this.clipboardError)},e.prototype.clipboardSuccess=function(e){this.onSuccess.emit(e.text)},e.prototype.clipboardError=function(e){this.onError.emit(e.action)},e.prototype.ngOnDestroy=function(){this.clipboard.destroy()},e}(),Tt=n(1072),_t=n(146),Ot=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function wt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"span",[["class","c-btn__state"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,1,"i",[["class","c-icon material-icons"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["check"])),(e()(),l["ɵted"](-1,null,[" "]))],null,null)}function Mt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"span",[["class","c-spinner c-spinner--small"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,5,"span",[["class","c-spinner__content"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,0,"span",[["class","c-spinner__side c-spinner__side--left"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](6,0,null,null,0,"span",[["class","c-spinner__side c-spinner__side--right"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],null,null)}function Dt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"span",[["class","c-btn__state"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,1,"i",[["class","c-icon material-icons"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["check"])),(e()(),l["ɵted"](-1,null,[" "]))],null,null)}function kt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"button",[["class","c-btn c-btn--regular-secondary c-btn--regular-secondary-action c-btn--regular-secondary-small"]],[[8,"disabled",0],[2,"is-disabled",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.resetPasswordForm()&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,1,"span",[["class","c-btn__content"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Cancel"])),(e()(),l["ɵted"](-1,null,[" "]))],null,function(e,t){var n=t.component;e(t,0,0,n.passwordForm.busy,n.passwordForm.busy)})}function Rt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"button",[["class","c-btn c-btn--regular-secondary c-btn--regular-secondary-action c-btn--regular-secondary-small"]],[[8,"disabled",0],[2,"is-disabled",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.submitPassword(n.target)&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,1,"span",[["class","c-btn__content"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Save"])),(e()(),l["ɵted"](-1,null,[" "]))],null,function(e,t){var n=t.component;e(t,0,0,!n.passwordForm.password.length||n.passwordForm.busy,!n.passwordForm.password.length||n.passwordForm.busy)})}function Pt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"button",[["class","c-btn c-btn--regular-secondary c-btn--regular-secondary-action c-btn--regular-secondary-small"]],[[8,"disabled",0],[2,"is-disabled",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.turnOnEditPasswordMode(n.target)&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,1,"span",[["class","c-btn__content"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Edit"])),(e()(),l["ɵted"](-1,null,[" "]))],null,function(e,t){var n=t.component;e(t,0,0,!n.passwordForm.password.length||n.passwordForm.busy,!n.passwordForm.password.length||n.passwordForm.busy)})}function Ht(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,35,"div",[["class","l-group c-form-group l-group--block l-space-top-primary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,11,"div",[["class","l-group__item l-group__item--grow"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,8,"ip-form-text-field",[["fontSize","small"],["iconSize","small"],["label","Page password"]],null,[[null,"iconClick"],[null,"keyup"]],function(e,t,n){var l=!0,o=e.component;return"iconClick"===t&&(l=!1!==o.togglePassword()&&l),"keyup"===t&&(l=!1!==o.passwordKeyUpHandler(n)&&l),l},F.b,F.a)),l["ɵdid"](5,1294336,null,1,j.IpTextFieldComponent,[],{label:[0,"label"],icon:[1,"icon"],iconSize:[2,"iconSize"],fontSize:[3,"fontSize"]},{iconClick:"iconClick"}),l["ɵqud"](335544320,3,{formTextInput:0}),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵeld"](8,0,null,0,3,"ip-form-input",[],null,null,null,B.b,B.a)),l["ɵprd"](5120,null,G.NG_VALUE_ACCESSOR,function(e){return[e]},[z.IpFormInputComponent]),l["ɵdid"](10,4308992,[[2,4],["passwordInput",4]],0,z.IpFormInputComponent,[[2,j.IpTextFieldComponent]],{type:[0,"type"],disabled:[1,"disabled"],value:[2,"value"]},null),l["ɵprd"](2048,[[3,4]],q.IpFormTextInputElement,null,[z.IpFormInputComponent]),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](15,0,null,null,19,"div",[["class","l-group__item l-group c-form-group__buttons"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](17,0,null,null,13,"div",[["class","l-group"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](19,0,null,null,4,"div",[["class","l-group__item"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,kt)),l["ɵdid"](22,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](25,0,null,null,4,"div",[["class","l-group__item"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Rt)),l["ɵdid"](28,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Pt)),l["ɵdid"](33,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,5,0,"Page password",n.passwordForm.password.length?"remove_red_eyes":"","small","small"),e(t,10,0,n.passwordForm.passwordRevealed?"text":"password",n.currentProtection&&n.currentPassword.length>0&&!n.passwordForm.editMode,n.passwordForm.password),e(t,22,0,n.passwordForm.editMode),e(t,28,0,!n.currentProtection||!n.currentPassword.length||n.passwordForm.editMode),e(t,33,0,n.currentProtection&&n.currentPassword.length&&!n.passwordForm.editMode)},null)}function xt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,11,"div",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,5,"div",[["class","l-group c-form-group l-group--block l-space-top-tertiary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,2,"ip-switch",[["label","Password Protection"]],null,[[null,"change"]],function(e,t,n){var l=!0;return"change"===t&&(l=!1!==e.component.toggleProtection(n.checked)&&l),l},b.b,b.a)),l["ɵdid"](5,49152,null,0,E.IpSwitchComponent,[],{label:[0,"label"],checked:[1,"checked"]},{change:"change"}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Ht)),l["ɵdid"](10,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,5,0,"Password Protection",n.passwordForm.visible),e(t,10,0,n.passwordForm.visible)},null)}function Nt(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{shareInput:0}),l["ɵqud"](671088640,2,{passwordInput:0}),(e()(),l["ɵeld"](2,0,null,null,1,"h2",[["class","l-space-bottom-primary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Copy this private URL to share"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](5,0,null,null,26,"div",[["class","l-group c-form-group l-group--block l-space-bottom-primary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](7,0,null,null,8,"div",[["class","l-group__item l-group__item--grow u-ellipsis"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](9,0,null,null,5,"div",[["class","c-form-text-item c-form-text-item--small"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](11,0,[[1,0],["shareInput",1]],null,0,"input",[["class","c-form-text-item__field u-ellipsis"],["type","text"]],[[8,"value",0],[8,"readOnly",0],[8,"disabled",0]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](13,0,null,null,0,"div",[["class","c-form-text-item__bar"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](17,0,null,null,13,"div",[["class","l-group__item l-group c-form-group__buttons l-space-left-primary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](19,0,null,null,10,"button",[["class","c-btn c-btn--regular-secondary c-btn--regular-secondary-action c-btn--regular-secondary-small"],["ip-clipboard",""]],null,[[null,"cb-success"],[null,"cb-error"]],function(e,t,n){var l=!0,o=e.component;return"cb-success"===t&&(l=!1!==o.copySuccess()&&l),"cb-error"===t&&(l=!1!==o.copyError()&&l),l},null,null)),l["ɵdid"](20,278528,null,0,f.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](21,{"has-state c-btn--regular-secondary-success":0}),l["ɵdid"](22,212992,null,0,It,[l.ElementRef],{targetElement:[0,"targetElement"],content:[1,"content"]},{onSuccess:"cb-success",onError:"cb-error"}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](24,0,null,null,1,"span",[["class","c-btn__content"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Copy"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,wt)),l["ɵdid"](28,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](33,0,null,null,1,"h2",[["class","l-space-bottom-primary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Or invite a guest through email"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](36,0,null,null,28,"div",[["class","l-group c-form-group l-group--block l-space-top-primary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](38,0,null,null,5,"div",[["class","l-group__item l-group__item--grow"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](40,0,null,null,2,"ip-tags",[["blurAction","add"],["label","Recipients"],["limitMessage","Recipients limit"],["placeholder","example@email.com"]],null,[[null,"change"]],function(e,t,n){var l=!0;return"change"===t&&(l=!1!==e.component.onRecipentsChange(n)&&l),l},Tt.b,Tt.a)),l["ɵdid"](41,12697600,null,0,_t.IpTagsComponent,[l.ChangeDetectorRef],{blurAction:[0,"blurAction"],separatorKeys:[1,"separatorKeys"],limit:[2,"limit"],limitMessage:[3,"limitMessage"],label:[4,"label"],validator:[5,"validator"],placeholder:[6,"placeholder"]},{change:"change"}),l["ɵpad"](42,2),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](45,0,null,null,18,"div",[["class","l-group__item l-group c-form-group__buttons l-space-left-primary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](47,0,null,null,15,"button",[["class","c-btn c-btn--regular-secondary c-btn--regular-secondary-action c-btn--regular-secondary-small"]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.sendInvitations()&&l),l},null,null)),l["ɵdid"](48,278528,null,0,f.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](49,{"has-progress":0,"c-btn--regular-secondary-success has-state":1}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](51,0,null,null,1,"span",[["class","c-btn__content"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Invite"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](54,0,null,null,4,"span",[["class","c-btn__progress"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Mt)),l["ɵdid"](57,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Dt)),l["ɵdid"](61,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,xt)),l["ɵdid"](67,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,20,0,"c-btn c-btn--regular-secondary c-btn--regular-secondary-action c-btn--regular-secondary-small",e(t,21,0,n.copied)),e(t,22,0,"",n.getLink()),e(t,28,0,n.copied),e(t,41,0,"add",e(t,42,0," ",","),10,"Recipients limit","Recipients",n.emailValidation,"example@email.com"),e(t,48,0,"c-btn c-btn--regular-secondary c-btn--regular-secondary-action c-btn--regular-secondary-small",e(t,49,0,n.invite.busy||n.invite.done,n.invite.done)),e(t,57,0,n.invite.busy),e(t,61,0,n.invite.done),e(t,67,0,n.canSetPassword())},function(e,t){var n=t.component;e(t,11,0,n.getLink(),!0,!1),e(t,47,0,!n.tags.length)})}var Vt=function(){function e(){this.displayNamePipe=new D}return e.prototype.transform=function(e){var t="";return 0===e.length?t:(t="<span>"+this.displayNamePipe.transform(e[0],!0)+"</span>",1===e.length?t:(t+="<span>&nbsp;and "+(e.length-1)+" other",e.length>2&&(t+="s"),t+="</span>"))},e}(),Lt=n(241),Ut=n.n(Lt),$t=function(){function e(t){this.userService=t;var n=e.mentionParser.getMentionsData();n&&n.length||this.userService.fetchMentions().take(1).subscribe(function(t){e.mentionParser.setMentionsData(t)})}return e.prototype.transform=function(t){return e.mentionParser.parseComment(t).changeEmailPrefix().changeAllToHashes().wrapUnsavedInvites().changeHashesToSlugs({html:!0}).getCommentText()},e}();$t.mentionParser=new Ut.a;var Ft=n(74),jt=function(){function e(){}return e.prototype.transform=function(e){var t=Ft(e);return Ft().diff(t,"days")>3?t.format("D MMM YYYY").toUpperCase():t.fromNow()},e}(),Bt=n(16);function Gt(e,t){return t||"Variation "+e}var zt=function(){function e(){}return e.prototype.escapeChevrons=function(e){return e.text.replace(/</g,"&lt;").replace(/>/g,"&gt;")},e}(),qt=function(){function e(e,t,n,l,o,i,r,s){this.commentsHelper=e,this.changeDetectorRef=t,this.store=n,this.uiActions=l,this.feedActions=o,this.feedService=i,this.actionChainService=r,this.currentUserService=s,this.loading=!1,this.showDot=!1,this.hotspotsCollapsed=!1,this.componentDestroyed$=new Bt.Subject,this.visibility$=new J.BehaviorSubject(!1),this.ready=!1,this.variationsSeen={}}return Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.getTotalNumberOfHotspots()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.visibility$.pipe(Object(ze.takeUntil)(this.componentDestroyed$),Object(ze.filter)(Boolean)).subscribe(function(t){e.store.dispatch(e.feedActions.loadAllData(e.uiState.variation))}),this.store.select(function(e){return e.ui}).pipe(Object(ze.takeUntil)(this.componentDestroyed$)).subscribe(function(t){e.uiState=t,e.visibility$.getValue()!==t.feedOpened&&e.visibility$.next(t.feedOpened),e.changeDetectorRef.markForCheck(),e.changeDetectorRef.detectChanges()}),this.store.select(function(e){return e.feed}).pipe(Object(ze.takeUntil)(this.componentDestroyed$)).subscribe(function(t){var n=t.hotspots,l=t.loadedAll,o=t.variations;e.loading=t.loading,o.length>0&&(e.ready=!0);var i=e.uiState,r=i.variation;e.variations=i.controlVariation?o.filter(function(e){return r===e.variation}):o,l&&(e.hotspots=n.slice().sort(function(t,n){var l=[t.resolvedAt,t.lastComment.editedAt,t.lastComment.createdAt];return e.getLatestDate([n.resolvedAt,n.lastComment.editedAt,n.lastComment.createdAt])-e.getLatestDate(l)}),e.currentVariation=e.uiState.variation),e.hotspots&&(e.variations=e.variations.map(function(t){return t.variation===r?se.a({},t,{hotspotsNumber:e.hotspots.length}):t})),e.showDot=e.feedService.isUnread(e.variations)&&!e.currentUserService.isAnonymous(),e.changeDetectorRef.markForCheck(),e.changeDetectorRef.detectChanges()})},e.prototype.onOpen=function(e){this.store.dispatch(this.uiActions.openFeed())},e.prototype.onClose=function(e){this.store.dispatch(this.uiActions.closeFeed())},e.prototype.onHotspotClick=function(e){this.actionChainService.openHotpost(e.variation,e.displayMode,e.id,e.popupId)()},e.prototype.onVariationClick=function(e){void 0===e&&(e="A"),this.uiState.variation!==e?(this.hotspotsCollapsed=!1,null!==this.uiState.openedPopup&&this.store.dispatch(this.uiActions.setPopupClosed(this.uiState.openedPopup.id)),this.store.dispatch(this.uiActions.changeVariation(e)),this.store.dispatch(this.feedActions.loadAllData(this.uiState.variation)),this.changeDetectorRef.markForCheck()):this.hotspotsCollapsed=!this.hotspotsCollapsed},e.prototype.resolveVariationName=function(e){return Gt(e.variation,e.customVariationName)},e.prototype.ngOnDestroy=function(){this.componentDestroyed$.next(),this.componentDestroyed$.complete()},e.prototype.getLatestDate=function(e){return e.reduce(function(e,t){return(e||0)>(t||0)?e:t})},e.prototype.getTotalNumberOfHotspots=function(){return this.hotspots?this.variations.reduce(function(e,t){return e+t.hotspotsNumber},0):0},e}(),Wt=function(){function e(e){this.window=e,this.opened=!1,this.hasAccessToHeatmap=!1,this.heatmapModeEnabled=!1,this.open=new l.EventEmitter,this.close=new l.EventEmitter}return e.prototype.handleMouseEnter=function(e){this.opened||this.open.emit()},e.prototype.handleMouseLeave=function(e){var t=this;e.relatedTarget&&!e.relatedTarget.classList.contains("c-modal-holder")&&this.opened&&(this.mouseLeaveTimeoutId=this.window.setTimeout(function(){t.close.emit()},300))},e.prototype.ngOnDestroy=function(){this.window.clearTimeout(this.mouseLeaveTimeoutId)},e}(),Kt=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Yt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","c-badge c-badge--action t-aside-panel-anchor__badge"]],null,null,null,null,null))],null,null)}function Xt(e){return l["ɵvid"](0,[(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](1,0,null,null,23,"aside",[["class","c-sub-preview-aside t-aside-panel"],["data-at","aside"]],null,[[null,"mouseleave"]],function(e,t,n){var l=!0;return"mouseleave"===t&&(l=!1!==e.component.handleMouseLeave(n)&&l),l},null,null)),l["ɵdid"](2,278528,null,0,f.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"is-opened":0,"u-pointer-none":1}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](5,0,null,null,13,"div",[["class","t-aside-panel__trigger"]],null,[[null,"mouseenter"]],function(e,t,n){var l=!0;return"mouseenter"===t&&(l=!1!==e.component.handleMouseEnter(n)&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](7,0,null,null,10,"div",[],[[1,"data-at",0]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](9,0,null,null,7,"div",[["class","u-relative t-aside-panel-anchor"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](11,0,null,null,1,"ip-button",[["type","simple"]],[[2,"u-pointer-none",null]],null,null,A.b,A.a)),l["ɵdid"](12,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],{icon:[0,"icon"],type:[1,"type"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Yt)),l["ɵdid"](15,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](20,0,null,null,3,"div",[["class","c-sub-preview-aside__container t-aside-panel__container"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),l["ɵncd"](null,0),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,2,0,"c-sub-preview-aside t-aside-panel",e(t,3,0,n.opened,n.heatmapModeEnabled&&!n.hasAccessToHeatmap)),e(t,12,0,n.iconName,"simple"),e(t,15,0,n.showDot&&!n.opened)},function(e,t){e(t,7,0,t.component.iconName),e(t,11,0,l["ɵnov"](t,12).disabled)})}var Jt,Zt=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Qt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,12,"div",[["class","t-comment-feed-legend"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,9,"section",[["class","t-comment-feed-legend__section--full t-comment-feed-legend__section--first"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,0,"img",[["alt","content picture"],["src","https://storage.googleapis.com/instapage-app-assets/img/comment-mode/comment-feed.svg"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](6,0,null,null,1,"h3",[["class","l-space-top-tertiary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Start collaborating with your team"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](9,0,null,null,1,"span",[["class","u-font-size-secondary l-space-top-primary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Click anywhere on the landing page to start a conversation."])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],null,null)}function en(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","c-badge c-badge--action u-block"]],null,null,null,null,null))],null,null)}function tn(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["class","c-button__text"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,function(e,t){e(t,1,0,t.parent.context.$implicit.number)})}function nn(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["class","c-button__icon material-icons"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["check"]))],null,null)}function ln(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[["class","l-group__item t-feed__activity"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](3,null,["",""])),l["ɵppd"](4,2),(e()(),l["ɵted"](-1,null,[" "]))],null,function(e,t){e(t,3,0,l["ɵunv"](t,3,0,e(t,4,0,l["ɵnov"](t.parent.parent.parent.parent.parent.parent.parent,0),t.parent.parent.context.$implicit.lastComment.author,!0)))})}function on(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","l-group__item t-feed__activity"]],[[8,"innerHTML",1]],null,null,null,null)),l["ɵppd"](1,1),(e()(),l["ɵted"](-1,null,[" "]))],null,function(e,t){e(t,0,0,l["ɵunv"](t,0,0,e(t,1,0,l["ɵnov"](t.parent.parent.parent.parent.parent.parent.parent,1),t.parent.parent.context.$implicit.lastAuthors)))})}function rn(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,"div",[["class","l-group l-group--block l-group--no-space"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,ln)),l["ɵdid"](3,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,on)),l["ɵdid"](6,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](8,0,null,null,1,"div",[["class","l-group__item l-group__item--no-shrink u-text--less-important"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" commented"])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,3,0,0===t.parent.context.$implicit.unreadComments),e(t,6,0,0!==t.parent.context.$implicit.unreadComments)},null)}function sn(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","u-ellipsis u-text--less-important"]],[[8,"innerHTML",1]],null,null,null,null)),l["ɵppd"](1,1),(e()(),l["ɵted"](-1,null,[" "]))],null,function(e,t){var n=t.component;e(t,0,0,t.parent.context.$implicit.lastComment?l["ɵunv"](t,0,0,e(t,1,0,l["ɵnov"](t.parent.parent.parent.parent.parent.parent,2),n.commentsHelper.escapeChevrons(t.parent.context.$implicit.lastComment))):"")})}function un(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"div",[["class","l-group l-group--block l-group--no-space u-ellipsis-holder"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,2,"div",[["class","l-group__item u-ellipsis"]],null,null,null,null,null)),(e()(),l["ɵted"](3,null,["",""])),l["ɵppd"](4,2),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](6,0,null,null,1,"div",[["class","l-group__item l-group__item--no-shrink u-text--less-important"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" resolved this conversation "])),(e()(),l["ɵted"](-1,null,[" "]))],null,function(e,t){e(t,3,0,l["ɵunv"](t,3,0,e(t,4,0,l["ɵnov"](t.parent.parent.parent.parent.parent.parent,0),t.parent.context.$implicit.resolvedBy,!0)))})}function an(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","u-ellipsis"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,1,"span",[["class","u-text--action"]],null,null,null,null,null)),(e()(),l["ɵted"](3,null,[""," new ",""])),(e()(),l["ɵted"](-1,null,[" "]))],null,function(e,t){e(t,3,0,t.parent.context.$implicit.unreadComments,t.parent.context.$implicit.unreadComments>1?"comments":"comment")})}function cn(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"div",[["class","u-ellipsis"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,1,"span",[["class","u-text--action"]],null,null,null,null,null)),(e()(),l["ɵted"](3,null,[""," new ",""])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](5,0,null,null,1,"span",[["class","u-text--less-important"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["of you"])),(e()(),l["ɵted"](-1,null,[" "]))],null,function(e,t){e(t,3,0,t.parent.context.$implicit.userMentioned,t.parent.context.$implicit.userMentioned>1?"@mentions":"@mention")})}function dn(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,49,"li",[["class","c-list-item"]],null,[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.onHotspotClick(e.context.$implicit)&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,46,"div",[["class","c-list-item__content l-space-right-secondary u-space-top-none u-space-bottom-none"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,43,"div",[["class","t-feed l-group l-group--block l-group--ver-center"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](6,0,null,null,3,"div",[["class","l-group__item l-group__item--no-shrink"]],[[2,"u-invisible",null]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](8,0,null,null,0,"span",[["class","c-badge c-badge--action u-block"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](11,0,null,null,12,"div",[["class","l-group__item l-group__item--no-shrink"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](13,0,null,null,9,"button",[["class","c-button c-button--floating c-button--danger t-hotspot-dot"]],null,null,null,null,null)),l["ɵdid"](14,278528,null,0,f.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](15,{"is-resolved--success":0}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,tn)),l["ɵdid"](18,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,nn)),l["ɵdid"](21,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](25,0,null,null,16,"div",[["class","l-group__item l-group__item--grow u-ellipsis-holder l-space-right-primary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,rn)),l["ɵdid"](28,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,sn)),l["ɵdid"](31,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,un)),l["ɵdid"](34,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,an)),l["ɵdid"](37,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,cn)),l["ɵdid"](40,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](43,0,null,null,3,"div",[["class","l-group__item l-group__item--no-shrink u-text--x-small u-text--less-important"]],null,null,null,null,null)),(e()(),l["ɵted"](44,null,[" "," "])),l["ɵpad"](45,3),l["ɵppd"](46,1),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,14,0,"c-button c-button--floating c-button--danger t-hotspot-dot",e(t,15,0,t.context.$implicit.resolvedAt&&0===t.context.$implicit.unreadComments)),e(t,18,0,!t.context.$implicit.resolvedAt),e(t,21,0,t.context.$implicit.resolvedAt),e(t,28,0,!t.context.$implicit.resolvedAt),e(t,31,0,!t.context.$implicit.resolvedAt&&0===t.context.$implicit.unreadComments),e(t,34,0,t.context.$implicit.resolvedAt),e(t,37,0,!t.context.$implicit.resolvedAt&&t.context.$implicit.unreadComments>0&&0===t.context.$implicit.userMentioned),e(t,40,0,!t.context.$implicit.resolvedAt&&t.context.$implicit.unreadComments>0&&t.context.$implicit.userMentioned>0)},function(e,t){var n=t.component;e(t,6,0,0===t.context.$implicit.unreadComments),e(t,44,0,l["ɵunv"](t,44,0,e(t,46,0,l["ɵnov"](t.parent.parent.parent.parent.parent,3),n.getLatestDate(e(t,45,0,t.context.$implicit.resolvedAt,t.context.$implicit.lastComment.editedAt,t.context.$implicit.lastComment.createdAt)))))})}function pn(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"ul",[["class","c-list c-list--hover-primary c-list--spacing-primary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,dn)),l["ɵdid"](3,802816,null,0,f.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,3,0,t.component.hotspots)},null)}function hn(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"section",[["class","l-space-top-quinary l-space-bottom-senary u-text--center u-full-width"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,0,"img",[["alt",""],["src","/dist/assets/no-feeds.svg"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,1,"h4",[["class","l-space-top-quinary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["No conversations have been left on this variation."])),(e()(),l["ɵted"](-1,null,[" "]))],null,null)}function mn(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,22,"div",[["class","c-collection-item__content-additional c-expandable-item__wrapper"],["style","height:auto"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,19,"div",[["class","c-expandable-item__content"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,16,"div",[["class","c-collection c-collection--simple"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](6,0,null,null,13,"div",[["class","c-collection__body"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](8,0,null,null,10,"div",[["class","c-collection-item c-collection-item--auto-height"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](10,0,null,null,7,"div",[["class","c-collection-item__content u-space-left-none u-space-right-none"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,pn)),l["ɵdid"](13,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,hn)),l["ɵdid"](16,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,13,0,!n.hotspotsCollapsed&&n.hotspots.length>0),e(t,16,0,!n.hotspotsCollapsed&&0===n.hotspots.length)},null)}function fn(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,34,"div",[["class","c-collection-item c-expandable-item is-expanded c-collection-item--auto-height"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,28,"div",[["class","c-collection-item__content u-space-left-none u-space-right-none u-cursor--pointer"]],null,[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.onVariationClick(e.context.$implicit.variation)&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,25,"div",[["class","t-feed l-group l-group--block l-group--ver-center l-space-left-primary l-space-right-primary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](6,0,null,null,4,"div",[["class","l-group__item l-group__item--no-shrink"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,en)),l["ɵdid"](9,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](12,0,null,null,4,"div",[["class","l-group__item l-group__item--grow u-ellipsis-holder l-space-right-primary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](14,0,null,null,1,"h4",[["class","u-ellipsis"]],null,null,null,null,null)),(e()(),l["ɵted"](15,null,[" "," "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](18,0,null,null,1,"div",[["class","l-group__item l-group__item--no-shrink u-text--x-small u-text--less-important"]],null,null,null,null,null)),(e()(),l["ɵted"](19,null,[" Conversations: "," "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](21,0,null,null,7,"div",[["class","l-group__item l-group__item--no-shrink"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](23,0,null,null,4,"button",[["class","c-button c-button--large c-button--clean"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](25,0,null,null,1,"i",[["class","material-icons c-button__icon c-expandable-item__icon"]],null,null,null,null,null)),(e()(),l["ɵted"](26,null,[" "," "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,mn)),l["ɵdid"](33,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,9,0,(t.context.$implicit.lastEditedAt?t.context.$implicit.lastEditedAt.getTime():0)>(t.context.$implicit.lastSeenAt?t.context.$implicit.lastSeenAt.getTime():0)&&!n.currentUserService.isAnonymous()),e(t,33,0,t.context.$implicit.variation===n.currentVariation)},function(e,t){var n=t.component;e(t,15,0,n.resolveVariationName(t.context.$implicit)),e(t,19,0,t.context.$implicit.hotspotsNumber),e(t,26,0,n.uiState.variation!==t.context.$implicit.variation||n.hotspotsCollapsed?"keyboard_arrow_up":"keyboard_arrow_down")})}function vn(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"div",[["class","c-collection"]],[[2,"u-invisible",null]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,4,"div",[["class","c-collection__body u-border-top-none"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,fn)),l["ɵdid"](5,802816,null,0,f.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,5,0,t.component.variations)},function(e,t){var n=t.component;e(t,0,0,!(null!=n.uiState&&n.uiState.feedOpened))})}function gn(e){return l["ɵvid"](2,[l["ɵpid"](0,D,[]),l["ɵpid"](0,Vt,[]),l["ɵpid"](0,$t,[ut]),l["ɵpid"](0,jt,[]),(e()(),l["ɵeld"](4,0,null,null,8,"ip-sidebar",[["iconName","chat"]],null,[[null,"open"],[null,"close"]],function(e,t,n){var l=!0,o=e.component;return"open"===t&&(l=!1!==o.onOpen(n)&&l),"close"===t&&(l=!1!==o.onClose(n)&&l),l},Xt,Kt)),l["ɵdid"](5,180224,null,0,Wt,[Z],{iconName:[0,"iconName"],opened:[1,"opened"],showDot:[2,"showDot"]},{open:"open",close:"close"}),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵand"](16777216,null,0,1,null,Qt)),l["ɵdid"](8,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵand"](16777216,null,0,1,null,vn)),l["ɵdid"](11,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,5,0,"chat",null==n.uiState?null:n.uiState.feedOpened,n.showDot),e(t,8,0,n.empty&&!n.loading),e(t,11,0,!n.empty)},null)}!function(e){e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four"}(Jt||(Jt={}));var yn,bn=0,En=0,Sn=0,Cn=0;function An(e,t){return"hsla("+240*e+", 100%, "+50*(1-e)+"%, "+t+")"}function In(e,t){if(0===e.length)return"newest";var n=e.find(function(e){return e.variationName===t}).versions;return 0!==n.length?n[n.length-1].version:"newest"}function Tn(e,t){if(0===e.length)return"";var n=e.find(function(e){return e.variationName===t}).versions;return 0!==n.length?n[n.length-1].variationHash:""}function _n(e){var t=(wn()-960)/2,n=t/480,l=Math.round(e.y),o=e.x;return o<480?o*=n:o>1440?(o-=1440,o*=n,o+=960+t):o+=t-480,{x:o=Math.round(o),y:l,value:e.value}}function On(e){bn<e.value&&(bn=e.value)}function wn(){var e=window.document.body.clientWidth;return e<=le&&(e=le),e}function Mn(e,t){return{value:e.value,y:e.y,x:e.x+t}}function Dn(e,t,n){return(e.version===t.version||"newest"===t.version)&&e.variation===t.variation&&e.displayMode===n}function kn(e){yn=e.leftElementRect}var Rn=function(){function e(e,t,n,l,o){var i;this.pageService=e,this.heatmapService=t,this.store=n,this.uiActions=l,this.heatmapMenuActions=o,this.heatmapModes=((i={})[ke.scrollDepth]="scroll depth",i[ke.clicks]="clicks",i[ke.mouseMovement]="mouse movement",i),this.isHeatmapModeEnabled=$e,this.modes=ke}return e.prototype.open=function(){this.store.dispatch(this.uiActions.openHeatmapmMenu())},e.prototype.close=function(){this.store.dispatch(this.uiActions.closeHeatmapMenu())},e.prototype.ngOnInit=function(){var e=this;this.uiSubscription$=this.store.select(function(e){return e.ui}).subscribe(function(t){e.uiState=t}),this.heatmapMenuSubscription$=this.store.select(function(e){return e.heatmapMenu}).subscribe(function(t){e.heatmapState=t;var n=e.variations&&e.variations.find(function(e){return e.variationName===t.variation});e.selectedVariationIsEmpty=n&&!n.versions.length}),this.heatmapDataSubscription$=X.Observable.zip(this.pageService.getVariations(),this.heatmapService.getPageData()).map(function(t){return e.mergeVariations(t[0],t[1])}).subscribe(function(t){var n=e.uiState,l=n.variation,o=e.heatmapState.version,i=o,r="";if(n.controlVariation&&t.length){var s=t.find(function(e){return l===e.variationName});if(s){e.variations=[s];var u=s.versions.find(function(e){return+e.version==+o});r=u?u.variationHash:""}}else e.variations=t,i=In(e.variations,l),r=Tn(e.variations,l);e.store.dispatch(e.heatmapMenuActions.changePageData({version:i,variation:l,variationHash:r})),e.store.dispatch(e.heatmapMenuActions.loadPageDataSuccess(e.variations))},function(t){e.uiState.hasAccessToHeatmap&&t.status>500&&e.store.dispatch(e.uiActions.setError({code:"",message:"Sorry, something went wrong. Please refresh the page to continue"}))})},e.prototype.ngOnDestroy=function(){this.uiSubscription$.unsubscribe(),this.heatmapMenuSubscription$.unsubscribe(),this.heatmapDataSubscription$.unsubscribe()},e.prototype.handleVariationClick=function(e,t){if(this.uiState.variation!==t){var n=this.heatmapState.variations,l=In(n,t),o=Tn(n,t);this.store.dispatch(this.uiActions.changeVariation(t)),this.store.dispatch(this.heatmapMenuActions.changePageData({version:l,variation:t,variationHash:o}))}this.closePopup()},e.prototype.handleVersionClick=function(e,t,n){this.uiState.variationHash!==n&&this.store.dispatch(this.heatmapMenuActions.changePageData({version:t,variationHash:n,variation:this.uiState.variation})),this.closePopup()},e.prototype.handleHeatmapMode=function(e,t){this.uiState.displayMode===ie.displayModes.MOBILE&&t===ke.mouseMovement||this.selectedVariationIsEmpty||this.store.dispatch(this.heatmapMenuActions.changeHeatmapMode(t))},e.prototype.mergeVariations=function(e,t){return void 0===e&&(e=[]),e.map(function(e){var n=t.find(function(t){return t.variationName===e.variationName});return e.versions=n?n.versions:[],e})},e.prototype.isVersionActive=function(e){return this.heatmapState.variationHash===e.variationHash&&this.heatmapState.version===e.version.toString()},e.prototype.resolveVariationName=function(e){return Gt(e.variationName,e.customVariationName)},e.prototype.closePopup=function(){null!==this.uiState.openedPopup&&this.store.dispatch(this.uiActions.setPopupClosed(this.uiState.openedPopup.id))},e}(),Pn=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Hn(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,45,"section",[["class","l-space-top-quinary l-space-bottom-senary u-text--center u-full-width"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,39,":svg:svg",[[":xmlns:xlink","http://www.w3.org/1999/xlink"],["height","101"],["viewBox","0 0 103 101"],["width","103"],["xmlns","http://www.w3.org/2000/svg"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,26,":svg:defs",[],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,":svg:rect",[["height","97"],["id","flat-a"],["rx","1"],["width","78"],["x","12"],["y","2"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,2,":svg:mask",[["height","101"],["id","flat-i"],["width","82"],["x","-2"],["y","-2"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,0,":svg:path",[["d","M10 0h82v101H10z"],["fill","#fff"]],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,0,":svg:use",[[":xlink:href","#flat-a"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,0,":svg:rect",[["height","69"],["id","flat-b"],["rx","2"],["width","99"],["x","2"],["y","16"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,2,":svg:mask",[["height","73"],["id","flat-j"],["width","103"],["x","-2"],["y","-2"]],null,null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,0,":svg:path",[["d","M0 14h103v73H0z"],["fill","#fff"]],null,null,null,null,null)),(e()(),l["ɵeld"](11,0,null,null,0,":svg:use",[[":xlink:href","#flat-b"]],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,0,":svg:circle",[["cx","9"],["cy","22"],["id","flat-c"],["r","3"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,1,":svg:mask",[["fill","#fff"],["height","6"],["id","flat-k"],["width","6"],["x","0"],["y","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](14,0,null,null,0,":svg:use",[[":xlink:href","#flat-c"]],null,null,null,null,null)),(e()(),l["ɵeld"](15,0,null,null,0,":svg:circle",[["cx","23"],["cy","56"],["id","flat-d"],["r","5"]],null,null,null,null,null)),(e()(),l["ɵeld"](16,0,null,null,1,":svg:mask",[["fill","#fff"],["height","10"],["id","flat-l"],["width","10"],["x","0"],["y","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](17,0,null,null,0,":svg:use",[[":xlink:href","#flat-d"]],null,null,null,null,null)),(e()(),l["ɵeld"](18,0,null,null,0,":svg:circle",[["cx","80"],["cy","56"],["id","flat-e"],["r","5"]],null,null,null,null,null)),(e()(),l["ɵeld"](19,0,null,null,1,":svg:mask",[["fill","#fff"],["height","10"],["id","flat-m"],["width","10"],["x","0"],["y","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](20,0,null,null,0,":svg:use",[[":xlink:href","#flat-e"]],null,null,null,null,null)),(e()(),l["ɵeld"](21,0,null,null,0,":svg:circle",[["cx","52"],["cy","56"],["id","flat-f"],["r","5"]],null,null,null,null,null)),(e()(),l["ɵeld"](22,0,null,null,1,":svg:mask",[["fill","#fff"],["height","10"],["id","flat-n"],["width","10"],["x","0"],["y","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](23,0,null,null,0,":svg:use",[[":xlink:href","#flat-f"]],null,null,null,null,null)),(e()(),l["ɵeld"](24,0,null,null,0,":svg:circle",[["cx","17"],["cy","22"],["id","flat-g"],["r","3"]],null,null,null,null,null)),(e()(),l["ɵeld"](25,0,null,null,1,":svg:mask",[["fill","#fff"],["height","6"],["id","flat-o"],["width","6"],["x","0"],["y","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](26,0,null,null,0,":svg:use",[[":xlink:href","#flat-g"]],null,null,null,null,null)),(e()(),l["ɵeld"](27,0,null,null,0,":svg:circle",[["cx","25"],["cy","22"],["id","flat-h"],["r","3"]],null,null,null,null,null)),(e()(),l["ɵeld"](28,0,null,null,1,":svg:mask",[["fill","#fff"],["height","6"],["id","flat-p"],["width","6"],["x","0"],["y","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](29,0,null,null,0,":svg:use",[[":xlink:href","#flat-h"]],null,null,null,null,null)),(e()(),l["ɵeld"](30,0,null,null,11,":svg:g",[["fill","none"],["fill-rule","evenodd"]],null,null,null,null,null)),(e()(),l["ɵeld"](31,0,null,null,0,":svg:use",[[":xlink:href","#flat-a"],["fill","#F8FAFB"]],null,null,null,null,null)),(e()(),l["ɵeld"](32,0,null,null,0,":svg:use",[[":xlink:href","#flat-a"],["mask","url(#flat-i)"],["stroke","#DDE4EA"],["stroke-width","4"]],null,null,null,null,null)),(e()(),l["ɵeld"](33,0,null,null,0,":svg:use",[[":xlink:href","#flat-b"],["fill","#FFF"]],null,null,null,null,null)),(e()(),l["ɵeld"](34,0,null,null,0,":svg:use",[[":xlink:href","#flat-b"],["mask","url(#flat-j)"],["stroke","#DDE4EA"],["stroke-width","4"]],null,null,null,null,null)),(e()(),l["ɵeld"](35,0,null,null,0,":svg:path",[["d","M2 28h99v2H2zM22 55h57v2H22z"],["fill","#DDE4EA"]],null,null,null,null,null)),(e()(),l["ɵeld"](36,0,null,null,0,":svg:use",[[":xlink:href","#flat-c"],["fill","#FFF"],["mask","url(#flat-k)"],["stroke","#DDE4EA"],["stroke-width","4"]],null,null,null,null,null)),(e()(),l["ɵeld"](37,0,null,null,0,":svg:use",[[":xlink:href","#flat-d"],["fill","#F8FAFB"],["mask","url(#flat-l)"],["stroke","#DDE4EA"],["stroke-width","4"]],null,null,null,null,null)),(e()(),l["ɵeld"](38,0,null,null,0,":svg:use",[[":xlink:href","#flat-e"],["fill","#F8FAFB"],["mask","url(#flat-m)"],["stroke","#DDE4EA"],["stroke-width","4"]],null,null,null,null,null)),(e()(),l["ɵeld"](39,0,null,null,0,":svg:use",[[":xlink:href","#flat-f"],["fill","#F8FAFB"],["mask","url(#flat-n)"],["stroke","#DDE4EA"],["stroke-width","4"]],null,null,null,null,null)),(e()(),l["ɵeld"](40,0,null,null,0,":svg:use",[[":xlink:href","#flat-g"],["fill","#F8FAFB"],["mask","url(#flat-o)"],["stroke","#DDE4EA"],["stroke-width","4"]],null,null,null,null,null)),(e()(),l["ɵeld"](41,0,null,null,0,":svg:use",[[":xlink:href","#flat-h"],["fill","#F8FAFB"],["mask","url(#flat-p)"],["stroke","#DDE4EA"],["stroke-width","4"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](43,0,null,null,1,"h4",[["class","l-space-top-quinary"],["data-at","mainNoTraffic"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["This page has not yet received traffic."])),(e()(),l["ɵted"](-1,null,[" "]))],null,null)}function xn(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,15,"li",[["class","c-list-item"]],[[1,"data-at",0]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleVersionClick(n,e.context.$implicit.version,e.context.$implicit.variationHash)&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,12,"div",[["class","c-list-item__content l-space-hor-quaternary"],["data-at","version"]],null,null,null,null,null)),l["ɵdid"](3,278528,null,0,f.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](4,{"is-selected is-marked is-active":0}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](6,0,null,null,7,"div",[["class","l-group l-group--block l-group--ver-center"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](8,0,null,null,1,"div",[["class","l-group__item l-group__item--grow u-ellipsis-holder l-space-left-tertiary l-space-right-primary"]],null,null,null,null,null)),(e()(),l["ɵted"](9,null,[" Version "," "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](11,0,null,null,1,"div",[["class","l-group__item l-group__item--no-shrink u-text--x-small u-text--less-important"]],null,null,null,null,null)),(e()(),l["ɵted"](12,null,[" "," - "," "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,3,0,"c-list-item__content l-space-hor-quaternary",e(t,4,0,t.component.isVersionActive(t.context.$implicit)))},function(e,t){e(t,0,0,"Version "+t.context.$implicit.version),e(t,9,0,t.context.index+1),e(t,12,0,t.context.$implicit.startDate,t.context.$implicit.endDate)})}function Nn(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"ul",[["class","c-list c-list--hover-primary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,xn)),l["ɵdid"](3,802816,null,0,f.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,3,0,t.parent.parent.context.$implicit.versions)},null)}function Vn(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,45,"section",[["class","l-space-top-quinary l-space-bottom-senary u-text--center u-full-width"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,39,":svg:svg",[[":xmlns:xlink","http://www.w3.org/1999/xlink"],["height","101"],["viewBox","0 0 103 101"],["width","103"],["xmlns","http://www.w3.org/2000/svg"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,26,":svg:defs",[],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,":svg:rect",[["height","97"],["id","flat-a"],["rx","1"],["width","78"],["x","12"],["y","2"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,2,":svg:mask",[["height","101"],["id","flat-i"],["width","82"],["x","-2"],["y","-2"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,0,":svg:path",[["d","M10 0h82v101H10z"],["fill","#fff"]],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,0,":svg:use",[[":xlink:href","#flat-a"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,0,":svg:rect",[["height","69"],["id","flat-b"],["rx","2"],["width","99"],["x","2"],["y","16"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,2,":svg:mask",[["height","73"],["id","flat-j"],["width","103"],["x","-2"],["y","-2"]],null,null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,0,":svg:path",[["d","M0 14h103v73H0z"],["fill","#fff"]],null,null,null,null,null)),(e()(),l["ɵeld"](11,0,null,null,0,":svg:use",[[":xlink:href","#flat-b"]],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,0,":svg:circle",[["cx","9"],["cy","22"],["id","flat-c"],["r","3"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,1,":svg:mask",[["fill","#fff"],["height","6"],["id","flat-k"],["width","6"],["x","0"],["y","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](14,0,null,null,0,":svg:use",[[":xlink:href","#flat-c"]],null,null,null,null,null)),(e()(),l["ɵeld"](15,0,null,null,0,":svg:circle",[["cx","23"],["cy","56"],["id","flat-d"],["r","5"]],null,null,null,null,null)),(e()(),l["ɵeld"](16,0,null,null,1,":svg:mask",[["fill","#fff"],["height","10"],["id","flat-l"],["width","10"],["x","0"],["y","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](17,0,null,null,0,":svg:use",[[":xlink:href","#flat-d"]],null,null,null,null,null)),(e()(),l["ɵeld"](18,0,null,null,0,":svg:circle",[["cx","80"],["cy","56"],["id","flat-e"],["r","5"]],null,null,null,null,null)),(e()(),l["ɵeld"](19,0,null,null,1,":svg:mask",[["fill","#fff"],["height","10"],["id","flat-m"],["width","10"],["x","0"],["y","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](20,0,null,null,0,":svg:use",[[":xlink:href","#flat-e"]],null,null,null,null,null)),(e()(),l["ɵeld"](21,0,null,null,0,":svg:circle",[["cx","52"],["cy","56"],["id","flat-f"],["r","5"]],null,null,null,null,null)),(e()(),l["ɵeld"](22,0,null,null,1,":svg:mask",[["fill","#fff"],["height","10"],["id","flat-n"],["width","10"],["x","0"],["y","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](23,0,null,null,0,":svg:use",[[":xlink:href","#flat-f"]],null,null,null,null,null)),(e()(),l["ɵeld"](24,0,null,null,0,":svg:circle",[["cx","17"],["cy","22"],["id","flat-g"],["r","3"]],null,null,null,null,null)),(e()(),l["ɵeld"](25,0,null,null,1,":svg:mask",[["fill","#fff"],["height","6"],["id","flat-o"],["width","6"],["x","0"],["y","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](26,0,null,null,0,":svg:use",[[":xlink:href","#flat-g"]],null,null,null,null,null)),(e()(),l["ɵeld"](27,0,null,null,0,":svg:circle",[["cx","25"],["cy","22"],["id","flat-h"],["r","3"]],null,null,null,null,null)),(e()(),l["ɵeld"](28,0,null,null,1,":svg:mask",[["fill","#fff"],["height","6"],["id","flat-p"],["width","6"],["x","0"],["y","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](29,0,null,null,0,":svg:use",[[":xlink:href","#flat-h"]],null,null,null,null,null)),(e()(),l["ɵeld"](30,0,null,null,11,":svg:g",[["fill","none"],["fill-rule","evenodd"]],null,null,null,null,null)),(e()(),l["ɵeld"](31,0,null,null,0,":svg:use",[[":xlink:href","#flat-a"],["fill","#F8FAFB"]],null,null,null,null,null)),(e()(),l["ɵeld"](32,0,null,null,0,":svg:use",[[":xlink:href","#flat-a"],["mask","url(#flat-i)"],["stroke","#DDE4EA"],["stroke-width","4"]],null,null,null,null,null)),(e()(),l["ɵeld"](33,0,null,null,0,":svg:use",[[":xlink:href","#flat-b"],["fill","#FFF"]],null,null,null,null,null)),(e()(),l["ɵeld"](34,0,null,null,0,":svg:use",[[":xlink:href","#flat-b"],["mask","url(#flat-j)"],["stroke","#DDE4EA"],["stroke-width","4"]],null,null,null,null,null)),(e()(),l["ɵeld"](35,0,null,null,0,":svg:path",[["d","M2 28h99v2H2zM22 55h57v2H22z"],["fill","#DDE4EA"]],null,null,null,null,null)),(e()(),l["ɵeld"](36,0,null,null,0,":svg:use",[[":xlink:href","#flat-c"],["fill","#FFF"],["mask","url(#flat-k)"],["stroke","#DDE4EA"],["stroke-width","4"]],null,null,null,null,null)),(e()(),l["ɵeld"](37,0,null,null,0,":svg:use",[[":xlink:href","#flat-d"],["fill","#F8FAFB"],["mask","url(#flat-l)"],["stroke","#DDE4EA"],["stroke-width","4"]],null,null,null,null,null)),(e()(),l["ɵeld"](38,0,null,null,0,":svg:use",[[":xlink:href","#flat-e"],["fill","#F8FAFB"],["mask","url(#flat-m)"],["stroke","#DDE4EA"],["stroke-width","4"]],null,null,null,null,null)),(e()(),l["ɵeld"](39,0,null,null,0,":svg:use",[[":xlink:href","#flat-f"],["fill","#F8FAFB"],["mask","url(#flat-n)"],["stroke","#DDE4EA"],["stroke-width","4"]],null,null,null,null,null)),(e()(),l["ɵeld"](40,0,null,null,0,":svg:use",[[":xlink:href","#flat-g"],["fill","#F8FAFB"],["mask","url(#flat-o)"],["stroke","#DDE4EA"],["stroke-width","4"]],null,null,null,null,null)),(e()(),l["ɵeld"](41,0,null,null,0,":svg:use",[[":xlink:href","#flat-h"],["fill","#F8FAFB"],["mask","url(#flat-p)"],["stroke","#DDE4EA"],["stroke-width","4"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](43,0,null,null,1,"h4",[["class","l-space-top-quinary"],["data-at","mainNoTraffic"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["This variation has not yet received traffic."])),(e()(),l["ɵted"](-1,null,[" "]))],null,null)}function Ln(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"div",[["class","c-collection-item__content-additional"],["data-at","active"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Nn)),l["ɵdid"](3,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Vn)),l["ɵdid"](6,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,3,0,t.parent.context.$implicit.versions),e(t,6,0,0===t.parent.context.$implicit.versions.length)},null)}function Un(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,26,"div",[["class","c-collection-item c-expandable-item"]],[[1,"data-at",0]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,20,"div",[["class","c-collection-item__content u-cursor--pointer"],["data-at","variation"]],null,[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleVariationClick(n,e.context.$implicit.variationName)&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,17,"div",[["class","l-group l-group--block l-group--ver-center"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](6,0,null,null,4,"div",[["class","l-group__item l-group__item--grow u-ellipsis-holder l-space-right-primary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](8,0,null,null,1,"h4",[["class","u-ellipsis"]],null,null,null,null,null)),(e()(),l["ɵted"](9,null,[" "," "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](12,0,null,null,1,"div",[["class","l-group__item l-group__item--no-shrink u-text--x-small u-text--less-important"],["data-at","noTraffic"]],null,null,null,null,null)),(e()(),l["ɵted"](13,null,[" "," "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](15,0,null,null,5,"div",[["class","l-group__item l-group__item--no-shrink"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](17,0,null,null,2,"ip-button",[["size","large"],["type","clean"]],[[1,"data-at",0],[2,"u-pointer-none",null]],null,null,A.b,A.a)),l["ɵdid"](18,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],{size:[0,"size"],icon:[1,"icon"],type:[2,"type"]},null),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Ln)),l["ɵdid"](25,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,18,0,"large",n.heatmapState.variation!==t.context.$implicit.variationName?"keyboard_arrow_up":"keyboard_arrow_down","clean"),e(t,25,0,t.context.$implicit.variationName===n.heatmapState.variation)},function(e,t){var n=t.component;e(t,0,0,n.resolveVariationName(t.context.$implicit)),e(t,9,0,n.resolveVariationName(t.context.$implicit)),e(t,13,0,0!==t.context.$implicit.versions.length?"Versions: "+t.context.$implicit.versions.length:"No traffic yet"),e(t,17,0,n.heatmapState.variation!==t.context.$implicit.variationName?"keyboard_arrow_up":"keyboard_arrow_down",l["ɵnov"](t,18).disabled)})}function $n(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"div",[["class","c-collection"]],[[2,"u-invisible",null]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,4,"div",[["class","c-collection__body"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Un)),l["ɵdid"](5,802816,null,0,f.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,5,0,t.component.variations)},function(e,t){var n=t.component;e(t,0,0,!(null!=n.uiState&&n.uiState.heatmapMenuOpened))})}function Fn(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,28,"ip-sidebar",[["iconName","whatshot"]],null,[[null,"open"],[null,"close"]],function(e,t,n){var l=!0,o=e.component;return"open"===t&&(l=!1!==o.open()&&l),"close"===t&&(l=!1!==o.close()&&l),l},Xt,Kt)),l["ɵdid"](1,180224,null,0,Wt,[Z],{iconName:[0,"iconName"],opened:[1,"opened"],hasAccessToHeatmap:[2,"hasAccessToHeatmap"],heatmapModeEnabled:[3,"heatmapModeEnabled"]},{open:"open",close:"close"}),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵeld"](3,0,null,0,18,"div",[["class","l-space-quaternary"]],[[1,"data-at",0]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](5,0,null,null,15,"ip-toggle",[],[[1,"data-at",0]],null,null,x.b,x.a)),l["ɵdid"](6,1228800,null,1,N.IpToggleComponent,[l.ChangeDetectorRef],null,null),l["ɵqud"](603979776,1,{contentChildren:1}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](9,0,null,0,2,"ip-toggle-item",[],[[1,"data-at",0]],[[null,"click"]],function(e,t,n){var l=!0,o=e.component;return"click"===t&&(l=!1!==(o.variations&&o.handleHeatmapMode(n,o.modes.scrollDepth))&&l),l},V.b,V.a)),l["ɵdid"](10,3194880,[[1,4]],0,L.IpToggleItemComponent,[],{selected:[0,"selected"],disabled:[1,"disabled"]},{click:"click"}),(e()(),l["ɵted"](11,0,[" "," "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](13,0,null,0,2,"ip-toggle-item",[],[[1,"data-at",0]],[[null,"click"]],function(e,t,n){var l=!0,o=e.component;return"click"===t&&(l=!1!==(o.variations&&o.handleHeatmapMode(n,o.modes.clicks))&&l),l},V.b,V.a)),l["ɵdid"](14,3194880,[[1,4]],0,L.IpToggleItemComponent,[],{selected:[0,"selected"],disabled:[1,"disabled"]},{click:"click"}),(e()(),l["ɵted"](15,0,[" "," "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](17,0,null,0,2,"ip-toggle-item",[],[[1,"data-at",0]],[[null,"click"]],function(e,t,n){var l=!0,o=e.component;return"click"===t&&(l=!1!==(o.variations&&o.handleHeatmapMode(n,o.modes.mouseMovement))&&l),l},V.b,V.a)),l["ɵdid"](18,3194880,[[1,4]],0,L.IpToggleItemComponent,[],{selected:[0,"selected"],disabled:[1,"disabled"]},{click:"click"}),(e()(),l["ɵted"](19,0,[" "," "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵand"](16777216,null,0,1,null,Hn)),l["ɵdid"](24,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵand"](16777216,null,0,1,null,$n)),l["ɵdid"](27,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,1,0,"whatshot",null==n.uiState?null:n.uiState.heatmapMenuOpened,n.uiState.hasAccessToHeatmap,n.isHeatmapModeEnabled(n.uiState.featureModeEnabled)),e(t,10,0,n.heatmapState.heatmapMode===n.modes.scrollDepth,!n.variations||n.selectedVariationIsEmpty),e(t,14,0,n.heatmapState.heatmapMode===n.modes.clicks,!n.variations||n.selectedVariationIsEmpty),e(t,18,0,n.heatmapState.heatmapMode===n.modes.mouseMovement&&1!==n.uiState.displayMode,!n.variations||1===n.uiState.displayMode||n.selectedVariationIsEmpty),e(t,24,0,!n.variations),e(t,27,0,n.variations)},function(e,t){var n=t.component;e(t,3,0,n.heatmapState.version),e(t,5,0,"enabledMode "+n.heatmapState.heatmapMode),e(t,9,0,n.heatmapModes[n.modes.scrollDepth]),e(t,11,0,n.heatmapModes[n.modes.scrollDepth]),e(t,13,0,n.heatmapModes[n.modes.clicks]),e(t,15,0,n.heatmapModes[n.modes.clicks]),e(t,17,0,n.heatmapModes[n.modes.mouseMovement]),e(t,19,0,n.heatmapModes[n.modes.mouseMovement])})}var jn=n(1075),Bn=n.n(jn),Gn=function(e){this.window=e,this.isChrome=!1,this.isFirefox=!1,this.isSafari=!1,this.isChrome=!!this.window.chrome,this.isFirefox=!!this.window.InstallTrigger,this.isSafari=-1!=this.window.navigator.userAgent.indexOf("Safari")&&-1==this.window.navigator.userAgent.indexOf("Chrome")},zn={.25:"rgb(33,150,243)",.55:"rgb(100,221,23)",.85:"rgb(255, 235, 59)",1:"rgb(244, 67, 54)"},qn=function(){function e(e,t,n,l,o){this.store=e,this.heatmapService=t,this.heatmapMenuActions=n,this.previewFacade=l,this.window=o,this.componentDestroyed$=new Xe.Subject,this.resizeEvent=new Xe.Subject,this.openedPopup$=Be(this.store),this.browserDetector=new Gn(o)}return e.prototype.onResize=function(e){this.resizeEvent.next(e)},e.prototype.ngAfterViewInit=function(){var e=this;this.previewFacade.getEdgeElements().subscribe(function(e){return kn(e)}),this.heatmapService.openPopup.subscribe(function(){e.store.dispatch(e.heatmapMenuActions.heatmapLoadSuccess([]))}),this.store.select(function(e){return $e(e.ui.featureModeEnabled)}).takeUntil(this.componentDestroyed$).subscribe(function(t){t?e.heatmapLib=Bn.a.create({container:e.heatmapOverlay.nativeElement,radius:30,height:parseInt(e.height,10),width:parseInt(e.width,10),backgroundColor:"rgba(13, 26, 43, 0.85)",gradient:zn}):e.heatmapOverlay&&e.heatmapOverlay.nativeElement.remove()}),this.store.select(function(e){return e.ui.displayMode}).takeUntil(this.componentDestroyed$).subscribe(function(t){e.displayMode=t,e.onDimensionsChange(t)}),this.openedPopup$.takeUntil(this.componentDestroyed$).subscribe(function(t){e.openedPopup=t,t?setTimeout(function(){e.onDimensionsChange(e.displayMode)}):e.onDimensionsChange(e.displayMode)}),this.store.select(function(e){return e.heatmapMenu.heatmapMode}).takeUntil(this.componentDestroyed$).subscribe(function(t){e.heatmapMode=t}),this.store.select(function(e){return e.heatmapMenu.modeData}).switchMap(function(t){return e.updateEdgeElements().mapTo(t)}).takeUntil(this.componentDestroyed$).subscribe(function(t){e.clientData=t,e.resetHeatmap(),e.renderHeatmap(t)}),this.resizeEvent.debounceTime(100).filter(function(){return Boolean(e.clientData)}).switchMap(function(){return e.updateEdgeElements()}).takeUntil(this.componentDestroyed$).subscribe(function(){e.onDimensionsChange(e.displayMode),e.renderHeatmap(e.clientData)})},e.prototype.ngOnDestroy=function(){this.componentDestroyed$.next(),this.componentDestroyed$.complete()},e.prototype.onDimensionsChange=function(e){var t,n,l=0,o=0;if(this.openedPopup){var i=this.openedPopup.position,r=i.offsetTop,s=i.offsetLeft;if("number"==typeof r&&"number"==typeof s)l=r,o=s;else{var u=wn();l=this.openedPopup.top,o=(u-this.openedPopup.width)/2+1}t=this.openedPopup.width,n=this.openedPopup.height,e&&(o+=((u=this.heatmapOverlay.nativeElement.clientWidth)-400)/2)}else if(e)u=this.heatmapOverlay.nativeElement.clientWidth,n=parseInt(this.height,10),o=(u-400)/2,t=400;else{u=window.document.getElementById("ip_canvas").clientWidth;var a=parseInt(this.width,10);t=u>=a?u:a,n=parseInt(this.height,10)}this.browserDetector.isSafari||(t>32767&&(t=32767),n>32767&&(n=32767)),this.setupHeatmapCanvas(l,o,.7),this.configureHeatmap(t,n)},e.prototype.configureHeatmap=function(e,t){this.heatmapLib=this.heatmapLib.configure({width:e,height:t,container:null})},e.prototype.setupHeatmapCanvas=function(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0);var l=this.heatmapOverlay.nativeElement.querySelector("canvas");l.style.opacity=n,l.style.top=e+"px",l.style.left=t+"px"},e.prototype.renderHeatmap=function(e){var t=!(this.heatmapMode===ke.scrollDepth||this.displayMode||this.openedPopup),n=function(e,t,n){var l,o;bn=0,En=0,Sn=0,l=t,o=window.outerWidth,En=o>=l?Math.round((o-l)/2):0,Cn=yn?Math.round(yn.left):En,Sn=Math.round(yn?yn.left:(o-le)/2);var i=e.map(function(e){var t=e.data,l=void 0===t?[]:t;switch(e.clientVersion){case Jt.One:return n?l.map(_n):l;case Jt.Two:return n?l.map(function(e){return Mn(e,En)}):l;case Jt.Three:return n?l.map(function(e){return Mn(e,Sn)}):l;case Jt.Four:return n?l.map(function(e){return Mn(e,Cn)}):l;default:return[]}}).reduce(function(e,t){return e.concat(t)},[]);return i.forEach(On),i}(e,parseInt(this.width,10),t);this.heatmapMode===ke.scrollDepth?function(e,t,n){if(0===t.length)return!1;for(var l=e.getElementsByClassName("heatmap-canvas")[0],o=l.getContext("2d"),i=new Array(parseInt(l.height,10)).fill(0),r=0,s=0,u=0,a=[],c=0;c<t.length;c+=1)i[t[c].y]+=t[c].value||1;for(var d=0;d<parseInt(l.height,10);d+=1)a[d]=s+=i[d],u=Math.max(u,s);for(var p=0;p<parseInt(l.height,10);p+=1)r=a[p]/u,o.beginPath(),o.moveTo(0,p),o.lineTo(l.width,p),o.lineWidth=1,o.strokeStyle=An(r,.6),o.stroke()}(this.heatmapOverlay.nativeElement,n):this.heatmapLib.setData({max:bn,min:void 0,data:n})},e.prototype.updateEdgeElements=function(){return this.previewFacade.getEdgeElements().do(kn)},e.prototype.resetHeatmap=function(){this.heatmapLib.setData({max:1,min:void 0,data:[]})},e}(),Wn=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Kn(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{heatmapOverlay:0}),(e()(),l["ɵeld"](1,0,null,null,6,"div",[["class","c-iframe-overlay"],["data-at","heatmapOverlay"],["style","pointer-events:none"]],[[2,"t-blur-tertiary",null]],null,null,null,null)),l["ɵdid"](2,278528,null,0,f.NgStyle,[l.KeyValueDiffers,l.ElementRef,l.Renderer],{ngStyle:[0,"ngStyle"]},null),l["ɵpod"](3,{height:0}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](5,0,[[1,0],["heatmap",1]],null,1,"div",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,2,0,e(t,3,0,t.component.height))},function(e,t){e(t,1,0,!t.component.hasAccessToHeatmap)})}var Yn=function(){function e(e){this.sanitizer=e,this.sanitizer=e}return e.prototype.transform=function(e,t){if(void 0===t&&(t="resourceUrl"),-1===["html","style","script","url","resourceUrl"].indexOf(t))return e;var n="bypassSecurityTrust"+t.slice(0,1).toUpperCase()+t.slice(1);return this.sanitizer[n].call(this.sanitizer,e)},e}(),Xn=function(){function e(){this._opened=!1}return Object.defineProperty(e.prototype,"opened",{get:function(){return this._opened},set:function(e){this._opened=e,this.modal&&(this.modal.opened=e)},enumerable:!0,configurable:!0}),e.prototype.handleClose=function(){this.opened=!1},e}(),Jn=function(e){return"#popup-"+e},Zn=function(e,t){return"#p-"+t+"-"+e},Qn=function(e,t){return void 0===t&&(t=!1),e+" "+(t?".lightbox-content":"> .popup-inner")},el=function(){function e(e,t,n,o,i,r){this.window=e,this.applicationRef=t,this.componentResolver=n,this.injector=o,this.previewFacade=i,this.pageService=r,this.loaded=new l.EventEmitter,this.popupOpened=new l.EventEmitter,this.popupClosed=new l.EventEmitter,this.popupTop=new l.EventEmitter,this.popupPositionChanged=new l.EventEmitter,this.popupDimensionsChanged=new l.EventEmitter,this.iframeError=new l.EventEmitter,this.iframeHeight=0,this.overlayHeight=0,this.commentModeMinWidth=0,this.heatmapModeMinWidth=0,this.isPreviewLoaded=!1,this.preventScrollTopSync=!1,this.scrollTopSync=0,this.scrollLeftSync=0,this.previewModeScrollTop=0,this.iframeMinWidth=0,this.componentDestroyed$=new Xe.Subject,this.updatePopupData$=new Xe.Subject,this.resizeEvent=new l.EventEmitter}return e.prototype.onResize=function(e){this.resizeEvent.emit({event:e})},e.prototype.handleWrapperScroll=function(e){var t=this;this.preventScrollTopSync?setTimeout(function(){t.preventScrollTopSync=!1},0):(this.scrollTopSync=e.target.scrollTop,this.scrollLeftSync=e.target.scrollLeft)},e.prototype.ngAfterViewInit=function(){var e=this,t=this.previewFacade.on("ready");this.pageService.checkIfPagePreviewExists(this.iframe.nativeElement.src).takeUntil(t).filter(function(e){return!e}).subscribe(function(){return e.iframeError.emit({message:"Page does not exist",code:"404",messageTime:"0"})}),t.takeUntil(this.componentDestroyed$).do(function(){e.previewFacade.introduce(),e.isPreviewLoaded=!0,e.previewModeScrollTop=0}).delay(1).switchMap(function(t){return e.previewLoaded(t).mapTo(t)}).subscribe(function(t){return e.onPreviewLoaded(t)}),this.bindPreviewEvents();var n=this.resizeEvent.debounceTime(100);n.takeUntil(this.componentDestroyed$).switchMap(function(){return e.adjustPreview()}).subscribe(),n.takeUntil(this.componentDestroyed$).filter(function(){return e.isPopupOpen()}).subscribe(this.updatePopupData$),this.updatePopupData$.takeUntil(this.componentDestroyed$).switchMap(function(){return e.updatePopupData()}).distinctUntilChanged(function(e,t){var n=e[0],l=e[1],o=t[0],i=t[1],r=Object.keys(n).some(function(e){return n[e]!==o[e]}),s=Object.keys(l).some(function(e){return l[e]!==i[e]});return!(r||s)}).subscribe(function(t){var n=t[0];e.popupPositionChanged.emit({position:t[1]}),e.popupDimensionsChanged.emit({dimensions:n})})},e.prototype.ngOnChanges=function(e){e.src&&(this.isPreviewLoaded=!1,this.scrollTopSync=0,this.wrapper.nativeElement.scrollTop=0,this.previewFacade.setWindowScrollTo(0,0),this.iframe.nativeElement.style.height="",this.iframeHeight=0)},e.prototype.ngAfterViewChecked=function(){var e=this;if(this.commentsModeEnabled===this.prevCommentsModeEnabled&&this.heatmapModeEnabled===this.prevHeatmapsModeEnabled||!this.iframe||(this.preventScrollTopSync=!0,this.commentsModeEnabled?this.setupEnabledCommentMode():this.setupDisabledCommentMode(),setTimeout(function(){return e.hackBackgroundImage()}),this.prevCommentsModeEnabled=this.commentsModeEnabled,this.prevHeatmapsModeEnabled=this.heatmapModeEnabled,this.commentsModeEnabled&&this.redirectModal&&(this.redirectModal.destroy(),this.redirectModal=null)),this.commentsModeEnabled!==this.prevCommentsModeEnabled&&this.iframe&&this.popup){var t=this.isAmp?Zn(this.popup.id,this.variation):Jn(this.popup.id),n=Qn(t,this.isUsingPageGenerator),l=void 0;this.commentsModeEnabled?(this.popupTopPositionOnCreation=this.popup.top,l=this.popup.top+this.scrollTopSync):l=this.popupTopPositionOnCreation,this.previewFacade.setElementsStyle(n,"marginTop",l+"px"),this.popupTop.emit({value:l})}},e.prototype.ngOnDestroy=function(){this.componentDestroyed$.next(),this.componentDestroyed$.complete()},e.prototype.isPopupOpen=function(){return Boolean(this.popup)},e.prototype.previewLoaded=function(e){var t=this;return Xe.Observable.of(e).do(function(e){return t.initialize(e)}).switchMap(function(){return t.adjustPreview()}).switchMap(function(){return t.calculateScrollLeft().do(function(e){return t.scrollLeftSync=e})})},e.prototype.initialize=function(e){var t=e.isAmp,n=e.pageGenerator,l=e.workspaceWidth;this.isAmp=t,this.isUsingPageGenerator=n,this.commentModeMinWidth=this.calculateCommentModeMinWidth(l,{isAmp:t}),this.heatmapModeMinWidth=this.calculateHeatmapModeMinWidth(l,{isAmp:t,isUsingPageGenerator:n}),this.iframeMinWidth=this.commentModeMinWidth},e.prototype.calculateCommentModeMinWidth=function(e,t){return void 0===t&&(t={}),t.isAmp?this.mode===ie.displayModes.DESKTOP?le:400:e},e.prototype.calculateHeatmapModeMinWidth=function(e,t){return void 0===t&&(t={}),t.isAmp||t.isUsingPageGenerator?this.mode===ie.displayModes.DESKTOP?le:400:e},e.prototype.adjustPreview=function(){var e=this;return this.calculateIframeHeight().do(function(t){e.iframeHeight=t,e.overlayHeight=e.iframeHeight-30})},e.prototype.calculateIframeHeight=function(){var e=this;return this.previewFacade.getElementDimensions("body").map(function(t){return Math.max(t.clientHeight,t.offsetHeight,t.scrollHeight,e.isPopupOpen()?e.popup.height:0)})},e.prototype.onPreviewLoaded=function(e){this.commentsModeEnabled?this.setupEnabledCommentMode():this.setupDisabledCommentMode(),this.hackBackgroundImage(),this.loaded.emit(e)},e.prototype.hackBackgroundImage=function(){this.isPreviewLoaded&&(this.commentsModeEnabled||this.heatmapModeEnabled?(this.previewFacade.setElementsStyle("html","overflow","hidden"),this.iframe.nativeElement.style.height=this.iframeHeight+"px",this.previewFacade.setElementsStyle(".section-block","backgroundAttachment","initial")):(this.previewFacade.setElementsStyle("html","overflow",""),this.iframe.nativeElement.style.height="100%",this.previewFacade.setElementsStyle(".section-block","backgroundAttachment","")))},e.prototype.calculateScrollLeft=function(){var e=this;return this.previewFacade.getElementDimensions("html").map(function(t){return e.commentsModeEnabled||e.heatmapModeEnabled?Math.round(e.iframeMinWidth/2-t.clientWidth/2)-4:e.commentModeMinWidth/2-e.window.document.body.clientWidth/2})},e.prototype.bindPreviewEvents=function(){var e=this,t=this.previewFacade.on("linkClick");t.filter(function(e){var t=e.data;return"_blank"!==t.target&&"popup-link"!==t.type&&"onpage-link"!==t.type}).takeUntil(this.componentDestroyed$).subscribe(this.iframeAnchorClickHandler.bind(this)),t.filter(function(e){return"onpage-link"===e.data.type}).takeUntil(this.componentDestroyed$).map(function(e){return e.data.hash.slice(1)}).subscribe(function(t){return e.previewFacade.scrollToBlock(t)}),t.filter(function(e){var t=e.data;return"url-link"===t.type&&"_blank"===t.target}).map(function(e){return e.data.href}).subscribe(function(e){return window.open(e,"_blank")}),this.previewFacade.on("documentScroll").takeUntil(this.componentDestroyed$).debounceTime(100).switchMap(function(){return e.previewFacade.getElementScrollData("body")}).subscribe(function(t){return e.iframeScrollHandler(t)}),this.previewFacade.on("click").takeUntil(this.componentDestroyed$).subscribe(this.iframeClickHandler.bind(this)),this.previewFacade.on("preview.popup.init").takeUntil(this.componentDestroyed$).subscribe(function(t){return e.initializePopup(t)}),this.previewFacade.on("preview.popup.shown").takeUntil(this.componentDestroyed$).do(this.popupShownHandler.bind(this)).switchMap(function(){return e.updatePopupData()}).subscribe(function(){return e.popupOpened.emit(e.popup)}),this.previewFacade.on("preview.popup.hide").takeUntil(this.componentDestroyed$).filter(function(){return Boolean(e.popup)}).subscribe(this.popupCloseHandler.bind(this))},e.prototype.iframeAnchorClickHandler=function(){var e=this.getRedirectModal();e.instance.opened=!0,e.changeDetectorRef.detectChanges()},e.prototype.iframeClickHandler=function(){this.window.document.dispatchEvent(new MouseEvent("click"))},e.prototype.initializePopup=function(e){var t=e.data,n=this.wrapper.nativeElement,l=t.id;if(this.isUsingPageGenerator||this.isAmp){var o=this.isAmp?Zn(l,this.variation):Jn(l),i=Qn(o,this.isUsingPageGenerator);if(!this.commentsModeEnabled)if(pe(this.mode))this.previewFacade.setElementsStyle(i,"marginTop","30px");else{var r=Math.max((n.offsetHeight-t.dimensions.offsetHeight)/2,0);this.previewFacade.setElementsStyle(i,"marginTop",r+"px")}var s=function(e){return e+" .lightbox-dim"}(o);this.previewFacade.setElementsStyle(s,"display","block"),this.previousScrollTop=n.scrollTop,this.previousScrollLeft=n.scrollLeft}this.previewModeScrollTop=n.scrollTop},e.prototype.popupShownHandler=function(e){var t=e.data,n=Jn(t.id),l=Qn(n);if(this.isUsingPageGenerator){var o=this.wrapper.nativeElement;o.scrollTo((o.scrollWidth-window.innerWidth)/2,0)}else{var i=(window.innerHeight-t.dimensions.clientHeight)/2+this.previewModeScrollTop;this.previewFacade.setElementsStyle(l,"margin-top",i)}this.popup={id:t.id,top:t.marginTop,height:this.calculatePopupHeight(t.dimensions),width:t.dimensions.offsetWidth,position:t.position}},e.prototype.calculatePopupHeight=function(e){return Math.max(e.clientHeight,e.offsetHeight,e.scrollHeight)},e.prototype.popupCloseHandler=function(){this.popupClosed.emit(this.popup.id),this.popup=null,(this.isUsingPageGenerator||pe(this.mode))&&this.wrapper.nativeElement.scrollTo(this.previousScrollLeft,this.previousScrollTop)},e.prototype.iframeScrollHandler=function(e){var t=this;this.preventScrollTopSync?setTimeout(function(){return t.preventScrollTopSync=!1},0):(this.scrollTopSync=e.scrollTop,this.scrollLeftSync=e.scrollLeft)},e.prototype.getRedirectModal=function(){if(!this.redirectModal){var e=this.injector.get(this.applicationRef.componentTypes[0]),t=this.componentResolver.resolveComponentFactory(Xn);this.redirectModal=e.viewContainerRef.createComponent(t)}return this.redirectModal},e.prototype.setupDisabledCommentMode=function(){this.iframe.nativeElement.style.height="",this.previewFacade.setElementAttribute("body","commentMode","off"),this.previewFacade.setElementsStyle("html","minWidth",this.iframeMinWidth+"px"),this.previewFacade.setWindowScrollTo(this.scrollLeftSync,this.scrollTopSync)},e.prototype.setupEnabledCommentMode=function(){var e=this;this.previewFacade.setElementAttribute("body","commentMode","on"),this.previewFacade.setElementsStyle("html","minWidth",""),setTimeout(function(){e.previewFacade.setWindowScrollTo(0,0),e.wrapper.nativeElement.scrollTop=e.scrollTopSync,e.wrapper.nativeElement.scrollLeft=e.scrollLeftSync})},e.prototype.updatePopupData=function(){var e=this;return Xe.Observable.of(this.getPopupContentSelector()).switchMap(function(t){return Object(Je.forkJoin)(e.previewFacade.getElementDimensions(t),e.previewFacade.getElementPosition(t))}).do(function(t){var n=t[0];e.popup=se.a({},e.popup,{position:t[1],height:e.calculatePopupHeight(n),width:n.offsetWidth})})},e.prototype.getPopupSelector=function(){return Jn(this.popup.id)},e.prototype.getPopupContentSelector=function(){return Qn(this.getPopupSelector(),this.isUsingPageGenerator)},e}(),tl=function(){function e(e,t,n,o,i){this.store=e,this.elementRef=t,this.hotspotsActions=n,this.commentsActions=o,this.currentUserService=i,this._opened=!1,this.otherIsLoading=!1,this.elementSize={width:30,height:30},this.loading=!1,this.introductionVisible=!1,this.commentableShift=0,this.saveHandler=new l.EventEmitter,this.clickHandler=new l.EventEmitter,this.clickOutsideHandler=new l.EventEmitter,this.editHandler=new l.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.positionShift=-15,this.resolved=!!this.data.resolvedAt,this.commentsState$=this.store.select(function(e){return e.comments}),this.commentsStateSubscription$=this.commentsState$.subscribe(function(t){e.data.id===t.currentHotspotId&&(e.loading=t.loading),e.otherIsLoading=t.loading})},e.prototype.ngOnDestroy=function(){this.commentsStateSubscription$.unsubscribe()},e.prototype.ngOnChanges=function(e){var t=e.data;t&&t.previousValue&&t.previousValue.resolvedAt!==t.currentValue.resolvedAt&&this.setResolvedWhenHotspotOpened(t)},e.prototype.onClick=function(e){e.stopPropagation(),this.draggable.isDragging||this.otherIsLoading||(this.opened=!this.opened,this.clickHandler.emit(this.data))},e.prototype.onAdd=function(e){e.hotspot=Object.assign({},this.data,e.hotspot,e.options),this.saveHandler.emit(e)},e.prototype.onDragEnd=function(e){this.editHandler.emit({mode:"coords",data:{x:e.left-this.positionShift-this.commentableShift,y:e.top-this.positionShift},index:this.index,hotspot:this.data,conversation:{fromY:this.conversationContainer.fromY,height:this.conversationContainer.wrapperRef.nativeElement.getBoundingClientRect().height}})},e.prototype.onResolve=function(e){e?(this.data.resolvedAt=Date.now(),this.data.resolvedBy=this.currentUserService.user,this.store.dispatch(this.hotspotsActions.resolve(this.data.id))):(this.data.resolvedAt=null,this.data.resolvedBy=null,this.store.dispatch(this.hotspotsActions.unResolve(this.data.id))),this.resolved=e},e.prototype.onVisibilityChange=function(e){this.store.dispatch(this.hotspotsActions.changeVisibility(this.data.id,e.visibility))},Object.defineProperty(e.prototype,"opened",{get:function(){return this._opened},set:function(e){this._opened=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resolved",{get:function(){return this._resolved},set:function(e){this._resolved=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.data.y+this.data.sectionY+this.positionShift},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasUnreadComments",{get:function(){return ae(this.data.editedAt,this.data.viewedAt)&&!this.opened&&!this.currentUserService.isAnonymous()},enumerable:!0,configurable:!0}),e.prototype.handleIntroduction=function(e){this.introductionVisible=e.visible},e.prototype.setResolvedWhenHotspotOpened=function(e){this.data.resolvedAt=e.currentValue.resolvedAt,this.data.resolvedBy=e.currentValue.resolvedBy,this.resolved="number"==typeof e.currentValue.resolvedAt},e}(),nl=function(){function e(e,t,n){this.element=e,this.renderer=t,this.document=n,this.mousedown=new l.EventEmitter,this.isDragging=!1,this.onDragEnd=new l.EventEmitter}return e.prototype.onMousedown=function(e){this.draggableHandleCssClass&&!e.target.classList.contains(this.draggableHandleCssClass)||this.mousedown.next(e)},e.prototype.ngOnInit=function(){this.enabled&&this.initialize()},e.prototype.ngOnDestroy=function(){},e.prototype.initialize=function(){var e,t=this;this.scrollSelector&&(this.scrollable=this.document.querySelector(this.scrollSelector)),this.mousedrag$=this.mousedown.map(function(n){return t.mousemove$=X.Observable.fromEvent(t.document,"mousemove"),t.mouseup$=X.Observable.fromEvent(t.document,"mouseup"),t.mouseupSubscribption$=t.mouseup$.subscribe(function(n){t.mouseupSubscribption$.unsubscribe(),t.isDragging&&t.onDragEnd.emit(e),setTimeout(function(){return t.isDragging=!1},0)}),{scrollable:t.scrollable,scrollLeft:t.scrollable?t.scrollable.scrollLeft:0,scrollTop:t.scrollable?t.scrollable.scrollTop:0,bodyWidth:t.document.body.clientWidth,bodyHeight:t.document.body.clientHeight,left:n.clientX-t.element.nativeElement.offsetLeft,top:n.clientY-t.element.nativeElement.offsetTop,element:t.elementSize||{width:t.element.nativeElement.offsetWidth,height:t.element.nativeElement.offsetHeight}}}).flatMap(function(e){return t.mousemove$.map(function(n){var l=n.clientX-e.left,o=n.clientY-e.top,i=0,r=0;if(e.scrollable){var s=e.scrollable.scrollTop-e.scrollTop,u=e.scrollable.scrollLeft-e.scrollLeft;l+=u,(o+=s)+e.top+e.element.height-s>e.bodyHeight?i=o+e.top+e.element.height-s-e.bodyHeight:o-s<e.scrollable.scrollTop-s&&(i=-(e.scrollable.scrollTop-o)),l+e.left+e.element.width-u>e.bodyWidth?r=l+e.left+e.element.width-u-e.bodyWidth:l-u<e.scrollable.scrollLeft-u&&(r=-(e.scrollable.scrollLeft-l))}return t.containment&&(l<t.containment[0]?l=t.containment[0]:l>t.containment[2]-t.element.nativeElement.offsetWidth&&(l=t.containment[2]-t.element.nativeElement.offsetWidth),o<t.containment[1]?o=t.containment[1]:o>t.containment[3]-t.element.nativeElement.offsetHeight&&(o=t.containment[3]-t.element.nativeElement.offsetHeight)),{scrollTopDelta:i,scrollLeftDelta:r,left:l,top:o}}).do(function(e){t.isDragging||(t.isDragging=!0)}).takeUntil(t.mouseup$)});var n=this.element.nativeElement.style;this.mousedrag$.subscribe(function(l){e=l,n.left=l.left+"px",n.top=l.top+"px",t.scrollable&&(t.scrollable.scrollTop+=l.scrollTopDelta,t.scrollable.scrollLeft+=l.scrollLeftDelta)})},e}(),ll=n(511),ol=n(114),il=(n(374),n(40)),rl=Object(W.y)("ui"),sl={getDisplayMode:Object(W.A)(rl,function(e){return e.displayMode})},ul=function(){return function(e){this.store=e,this.displayMode$=this.store.select(sl.getDisplayMode),this.isMobile$=this.displayMode$.pipe(Object(ze.map)(function(e){return e===ie.displayModes.MOBILE}))}}(),al=n(225),cl=function(){function e(e,t,n,l,o,i,r,s,u,a,c,d,p,h,m,f,v,g,y,b,E){this.viewContainerRef=e,this.store=t,this.uiActions=n,this.commentsActions=l,this.hotspotsActions=o,this.pageActions=i,this.pageService=r,this.heatmapService=s,this.socketIOService=u,this.currentUserService=a,this.usersOnlineService=c,this.feedActions=d,this.cacheService=p,this.actionsChainService=h,this.titleService=m,this.paramsService=f,this.router=v,this.accessService=g,this.analytics$=y,this.uiStateFacade=b,this.redirectLinkService=E,this.heatmapsSwitch$=new Bt.Subject,this.hotspotOpened=!1,this.ready=!1,this.shareOpened=!1,this.showTransitionTrialModal=!0,this.userLoggedIn=!1,this.userCanEditPage=!1,this.wasAnonymousDuringSession=!1,this.displayMode$=this.uiStateFacade.displayMode$,this.isMobile$=this.uiStateFacade.isMobile$,this.isCommentModeEnabled=Fe,this.isSampleModeEnabled=je}return Object.defineProperty(e.prototype,"routeAnimation",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){return"block"},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e,t=this,n=this.store.select(function(e){return e.page});this.isAmp$=n.map(function(e){return e.isAmp}),this.isUsingPageGenerator$=n.map(function(e){return e.isUsingPageGenerator}),this.error$=this.store.map(function(e){return e.ui.error}),this.errorMessageTime$=this.error$.pluck("messageTime").map(function(e){return Object(al.isUndefined)(e)?"2000":e}),this.store.select(function(e){return e.ui}).subscribe(function(e){t.uiState=e,t.pageService.variation=e.variation,t.pageService.displayMode=e.displayMode,t.redirectLinkService.setParams({variation:t.uiState.variation,displayMode:t.uiState.displayMode,popupId:t.uiState.openedPopup?t.uiState.openedPopup.id:null}),setTimeout(function(){t.openHotspotFromLocalStorage(e),t.url=t.pageService.getIframeUrl(t.version)},0)}),this.pageService.isAmp().take(1).subscribe(function(e){return t.store.dispatch(t.pageActions.setAmp(e))}),this.socketIOService.connect(),this.initializeHeatmaps(),this.initializeCollaboration(),(e=this.store,e.select(function(e){return e.heatmapMenu.version})).subscribe(function(e){return t.versionChanged(e)}),this.currentUserService.user$.subscribe(function(e){e&&!t.currentUserService.isAnonymous()?(t.userLoggedIn=!0,t.userCanEditPage=t.accessService.canEditPage(e)):(t.userLoggedIn=!1,e&&(t.wasAnonymousDuringSession=!0))}),this.pageService.getVariations().subscribe(function(e){t.variations=e},function(e){console.log(e)}),this.socketIOService.getSocket().on("connection",function(){t.ready=!0}),this.socketIOService.getSocket().on("connectionRefused",function(e){t.accessService.hasPreviewAccess=!1,t.accessService.passwordChanged=e.passwordChanged,t.router.navigate(["/access/"+t.paramsService.roomHash],{preserveQueryParams:!0})}),this.socketIOService.getSocket().on("variationJoined",function(e){if(e.error)return t.store.dispatch(t.uiActions.setError({code:""}));var n=e.users.map(function(e){return e.online=!0,e});t.usersOnlineService.init(t.currentUserService.user.id,n,t.socketIOService.userConnectedToVariation$,t.socketIOService.userDisconnectedFromVariation$),t.usersOnlineService.initUserDataChanged(t.socketIOService.userDataChanged$),t.onlineUsers$=t.usersOnlineService.getUsers(),t.onlineUsers$.subscribe(function(e){t.items=e.slice()})}),this.socketIOService.getSocket().on("variationLeft",function(e){if(e.error)return t.store.dispatch(t.uiActions.setError({code:""}));t.usersOnlineService.reset()}),this.displayModes=ie.displayModes,this.openHotspotFromUrl(),this.pageHasRunningExperiment$=this.pageService.hasRunningExperiments()},e.prototype.initialize=function(){Fe(this.uiState.featureModeEnabled)?this.initializeCollaboration():this.isHeatmapModeEnabled()&&this.initializeHeatmaps()},e.prototype.onIframeError=function(e){this.store.dispatch(this.uiActions.setError(e))},e.prototype.initializeHeatmaps=function(){var e,t=this;X.Observable.combineLatest(this.accessService.getAppToken(),this.pageService.getDataCenter(),this.heatmapService.isHeatmapFeatureEnabled()).do(function(e){var n=e[2];0!==e[0].length&&n.has_access||t.uiState.featureModeEnabled!==he.heatmap||t.store.dispatch(t.uiActions.openModal(n))}).filter(function(t){var n=t[2];return e=n,t[0].length>0&&n.data.has_access}).subscribe(function(e){t.store.dispatch(t.uiActions.hasAccessToHeatmap(e[2].data.has_access))}),this.heatmapsSwitch$.debounceTime(300).subscribe(function(n){n?(t.showTransitionTrialModal&&t.store.dispatch(t.uiActions.openModal(e)),t.updatedUrl=de("featureMode",he.heatmap.toString()),t.store.dispatch(t.uiActions.setFeatureMode(he.heatmap)),history.replaceState({},null,t.updatedUrl),t.uiState.hasAccessToHeatmap||t.store.dispatch(t.uiActions.openHeatmapmMenu())):(t.updatedUrl=de("featureMode",he.sample.toString()),t.store.dispatch(t.uiActions.setFeatureMode(he.sample)),history.replaceState({},null,t.updatedUrl)),t.closePopup()})},e.prototype.initializeCollaboration=function(){var e=this;this.pageService.hasCommentAccess().subscribe(function(t){e.store.dispatch(e.uiActions.hasAccessToCollaboration({access:t})),Fe(e.uiState.featureModeEnabled)&&e.switchCommentsMode(!0)})},e.prototype.switchToDesktop=function(){this.updatedUrl=de("displayMode",ie.displayModes.DESKTOP.toString()),this.store.dispatch({type:ue.SWITCH_TO_DESKTOP}),history.replaceState({},null,this.updatedUrl)},e.prototype.switchToMobile=function(){this.updatedUrl=de("displayMode",ie.displayModes.MOBILE.toString()),this.store.dispatch({type:ue.SWITCH_TO_MOBILE}),history.replaceState({},null,this.updatedUrl)},e.prototype.switchVariation=function(e){e!==this.uiState.variation&&this.store.dispatch({type:ue.CHANGE_VARIATION,payload:e})},e.prototype.toggleShare=function(e){e.stopPropagation(),this.deactivateCurrentHotspot(),this.uiState.hasAccessToCollaboration?(this.shareOpened=!this.shareOpened,this.shareOpened&&this.analytics$.trackEvent("Shared Collaboration Page")):this.store.dispatch(this.uiActions.openLimitedCollaborationModal())},e.prototype.shareClose=function(e){e.stopPropagation(),this.shareOpened=!1},e.prototype.onPreviewLoaded=function(e){this.store.dispatch(this.pageActions.setData(e));var t=e.variationHash,n=e.variation,l=e.version;this.deactivateCurrentHotspot(),this.store.dispatch(this.uiActions.pageLoaded({variationHash:t,displayMode:this.uiState.displayMode,variation:(n||"").replace("-mobile",""),version:(l||"").toString()})),0===this.titleService.getTitle().length&&this.titleService.setTitle(e.title+" - Instapage")},e.prototype.onPopupOpened=function(e){this.store.dispatch(this.uiActions.setPopupOpened(e))},e.prototype.onPopupClosed=function(e){this.store.dispatch(this.uiActions.setPopupClosed(e))},e.prototype.switchCommentsMode=function(e){this.updatedUrl=de("featureMode",e?he.comment.toString():he.sample.toString()),e?(this.store.dispatch(this.uiActions.setFeatureMode(he.comment)),this.store.dispatch(this.feedActions.loadVariationsData(!1))):this.store.dispatch(this.uiActions.setFeatureMode(he.sample)),history.replaceState({},null,this.updatedUrl)},e.prototype.clickCommentsMode=function(e){this.uiState.hasAccessToCollaboration||(e.stopPropagation(),this.store.dispatch(this.uiActions.openLimitedCollaborationModal()))},e.prototype.switchHeatmapsMode=function(e){this.store.dispatch(this.uiActions.heatmapModeButtonClicked(e)),"newest"!==this.version&&this.store.dispatch(this.uiActions.setLoading()),this.heatmapsSwitch$.next(e)},e.prototype.getState=function(e){var t;return e.take(1).subscribe(function(e){return t=e}),t},e.prototype.onNavClick=function(){this.deactivateCurrentHotspot()},e.prototype.resetError=function(e){this.store.dispatch(this.uiActions.clearError())},e.prototype.resolveVariationName=function(e){return Gt(e.variationName,e.customVariationName)},e.prototype.resolveCurrentVariationName=function(){var e,t=new Map;return this.variations.forEach(function(e){t.set(e.variationName,e.customVariationName)}),Gt(e=this.pageService.variation,t.get(e))},e.prototype.onPopupPositionChanged=function(e){this.store.dispatch(this.uiActions.setPopupPosition(e.position))},e.prototype.onPopupDimensionsChanged=function(e){var t=e.dimensions,n=Math.max(t.clientHeight,t.offsetHeight,t.scrollHeight);this.store.dispatch(this.uiActions.setPopupSize({height:n,width:t.offsetWidth}))},e.prototype.versionChanged=function(e){this.url=this.pageService.getIframeUrl(e),this.version=e,history.replaceState({},null,this.updatedUrl)},e.prototype.deactivateCurrentHotspot=function(){var e=this.getState(this.store).comments.currentHotspotId;this.getState(this.store).hotspots.pendingEntry?this.store.dispatch(this.hotspotsActions.cleanupUnsaved()):e&&(this.store.dispatch(this.hotspotsActions.deactivate(e)),this.store.dispatch(this.commentsActions.deactivateHotspot(e)))},e.prototype.openHotspotFromUrl=function(){var e=this;ce("hotspotId")&&this.socketIOService.getSocket().on("connection",function(){var t=e.getState(e.store);e.actionsChainService.openHotpost(t.ui.variation,t.ui.displayMode,ce("hotspotId"),ce("popupId"))(!1)})},e.prototype.openHotspotFromLocalStorage=function(e){if(!this.hotspotOpened&&!e.loading&&Fe(e.featureModeEnabled)&&this.cacheService.hasItem("comment")){var t=JSON.parse(this.cacheService.getItem("comment")).hotspot;t.variation!==e.variation||t.displayMode!==e.displayMode||e.openedPopup&&t.popupId!==e.openedPopup.id||(t.persistant?this.actionsChainService.openHotpost(t.variation,t.displayMode,t.id,t.popupId)():(t.author=this.currentUserService.user,this.store.dispatch(this.hotspotsActions.add(t))),this.hotspotOpened=!0)}},e.prototype.setPopupTop=function(e){var t=e.value,n=this.uiState.openedPopup;this.store.dispatch(this.uiActions.setPopupOpened(se.a({},n,{top:t,position:se.a({},n.position,{offsetTop:t})})))},e.prototype.closeModal=function(){this.store.dispatch(this.uiActions.closeModal())},e.prototype.handleTryFeature=function(e){var t=this;e&&this.accessService.setTrialWarningAsSeen("heatmap").subscribe(function(e){t.showTransitionTrialModal=!e.saved}),this.store.dispatch(this.uiActions.closeModal())},e.prototype.modalClick=function(e){"Update Plan"===e?this.upgradeHandle():this.closeUpgradeHeatmapModal()},e.prototype.isHeatmapModeEnabled=function(){var e=this;return this.isAmp$.map(function(t){return!t&&$e(e.uiState.featureModeEnabled)})},e.prototype.closeUpgradeHeatmapModal=function(){this.store.dispatch(this.uiActions.setFeatureMode(he.comment)),this.store.dispatch(this.uiActions.closeHeatmapMenu()),this.store.dispatch(this.uiActions.closeModal())},e.prototype.upgradeHandle=function(){window.open("https://app.instapage.com/account/upgrade")},Object.defineProperty(e.prototype,"showIntroModal",{get:function(){return this.ready&&!this.wasAnonymousDuringSession&&this.userLoggedIn&&this.uiState.hasAccessToCollaboration&&!0!==this.currentUserService.user.introModalSeen&&!this.uiState.modal.opened&&(null===ce("hotspotId")||this.uiState.urlHotspotStatusChecked)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showLimitedCollaborationModal",{get:function(){return this.ready&&this.uiState.loaded&&!this.uiState.hasAccessToCollaboration&&this.uiState.modal.opened&&"limited_collaboration"===this.uiState.modal.type},enumerable:!0,configurable:!0}),e.prototype.closePopup=function(){null!==this.uiState.openedPopup&&this.store.dispatch(this.uiActions.setPopupClosed(this.uiState.openedPopup.id))},e}(),dl=function(){function e(){this.loading=!1,this.itemClicked=new l.EventEmitter,this.open=new l.EventEmitter,this.hidden=!1,this.visibility="hidden",this.position={top:0,left:0},this.items=[],this.displayItems=[],this._activeIndex=0}return Object.defineProperty(e.prototype,"activeIndex",{get:function(){return this._activeIndex},set:function(e){e>this.displayItems.length-1?e=0:e<0&&(e=this.displayItems.length-1),this._activeIndex=e,this.itemsRefList&&this.itemsRefList.length&&this.updateScrollPosition(e)},enumerable:!0,configurable:!0}),e.prototype.getAtActiveIndex=function(){return this.getAtIndex(this.activeIndex)},e.prototype.getAtIndex=function(e){return this.displayItems[e]},e.prototype.ngOnInit=function(){this.reset()},e.prototype.search=function(e){var t=new RegExp("^"+function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}(e),"i");this.displayItems=this.items.filter(function(e){return null!==e.label.match(t)||null!==e.description.match(t)})},e.prototype.reset=function(){this.show(),this.activeIndex=0,this.displayItems=this.items.slice()},e.prototype.show=function(){var e=this;this.hidden=!1,setTimeout(function(){e.open.emit()})},e.prototype.onItemClicked=function(e,t){e.stopPropagation(),e.stopImmediatePropagation(),this.activeIndex=t,this.itemClicked.emit({index:t})},e.prototype.updateScrollPosition=function(e){this.itemsRefList.toArray()[e].nativeElement.scrollIntoView(!1)},e}(),pl=["@","ArrowDown","ArrowUp","Enter","Escape"],hl=function(){function e(e,t,n,l,o,i){this.element=e,this.applicationRef=t,this.conversationService=n,this.injector=l,this.componentInjectorService=o,this.document=i,this.mentions=null,this.search="",this.subscribers={},this.appElementRef=l.get(cl),this.handleScroll=this.handleScroll.bind(this),this.outsideClickHandler=this.outsideClickHandler.bind(this)}return e.prototype.ngOnInit=function(){this.document.addEventListener("scroll",this.handleScroll,!0),this.conversationService.mentionsChanged.emit([])},e.prototype.onKeyDown=function(e){var t=this,n=e.target;this.canStart(e,n)?this.initialize(n):this.mentions&&(this.mentions.hidden||this.handleSpecialKeys(e,n),St(pl,e)||setTimeout(function(){t.search=n.value.substring(t.startPosition,n.selectionStart),t.search.length&&"@"===t.search.substr(0,1)?(t.mentions.search(t.search.substr(1)),t.mentions.displayItems.length?t.showComponent(n):t.hideComponent(n)):t.hideComponent(n)},0))},e.prototype.outsideClickHandler=function(e){this.element.nativeElement.contains(e.target)||this.mentions.hidden||(this.mentions.hidden=!0)},e.prototype.handleScroll=function(e){if(this.mentions){if(this.mentions.viewportRef.nativeElement===e.target)return;this.mentions.hidden=!0}},e.prototype.setValue=function(e){var t=e.value;e.value=t.slice(0,this.startPosition)+"@"+this.mentions.getAtActiveIndex().slug+" "+t.slice(e.selectionEnd),e.selectionStart=this.startPosition+this.mentions.getAtActiveIndex().slug.length+2,e.selectionEnd=e.selectionStart},e.prototype.initialize=function(e){var t=this;this.componentRef=this.componentInjectorService.createComponent(dl,this.appElementRef.mentionsAnchorRef),this.initMentions(e),this.document.addEventListener("click",this.outsideClickHandler,!0),this.mentions.loading=!0,this.subscribers.data$=this.data.subscribe(function(e){t.mentions.items=e,t.mentions.loading=!1}),this.mentions.reset(),e.setAttribute("mentions-opened","true"),this.startPosition=e.selectionStart,this.showComponent(e)},e.prototype.createKeyboardEmitter=function(e){var t=this,n=["Tab","Enter"];return X.Observable.fromEvent(e,"keydown").filter(function(e){return!t.mentions.hidden&&St(n,e)}).map(function(e){return e.preventDefault(),e.stopImmediatePropagation(),e})},e.prototype.initMentions=function(e){var t=this;this.mentions=this.componentRef.instance,this.mentions.width=e.clientWidth;var n=this.createKeyboardEmitter(e);this.subscribers.mentionSelect$=n.merge(this.mentions.itemClicked).subscribe(function(){e.focus(),t.setValue(e),t.hideComponent(e)}),this.subscribers.open$=this.mentions.open.subscribe(function(){t.mentions.position=t.calculatePosition(e,t.mentions.viewportRef.nativeElement),t.mentions.visibility="visible"})},e.prototype.calculatePosition=function(e,t){var n={},l=e.getBoundingClientRect(),o=l.top,i=t.clientHeight<=o-41-e.clientHeight;return n.left=l.left,n.top=i?o-t.clientHeight-41-25:o+e.clientHeight-41+10,n},e.prototype.showComponent=function(e){this.mentions.show(),e.setAttribute("mentions-opened","true"),this.conversationService.mentionsChanged.emit(this.mentions.displayItems)},e.prototype.hideComponent=function(e){this.mentions.hidden=!0,e.removeAttribute("mentions-opened"),this.conversationService.mentionsChanged.emit([])},e.prototype.canStart=function(e,t){var n=t.value.substr((this.startPosition||t.selectionStart)-1,1);return Et("@",e)&&(""===n||null!==n.match(/[\s\n\r]/))},e.prototype.handleSpecialKeys=function(e,t){Et("ArrowDown",e)?(e.preventDefault(),this.mentions.activeIndex+=1):Et("ArrowUp",e)?(e.preventDefault(),this.mentions.activeIndex-=1):Et("Escape",e)&&(e.preventDefault(),this.hideComponent(t))},e.prototype.ngOnDestroy=function(){var e=this;Object.keys(this.subscribers).forEach(function(t){e.subscribers[t].unsubscribe()}),this.componentRef&&this.componentRef.destroy(),this.document.removeEventListener("click",this.outsideClickHandler,!0),this.document.removeEventListener("scroll",this.handleScroll,!0)},e}();function ml(e){var t=e.selectionStart,n=e.value;e.value=n.slice(0,t)+"\n"+n.slice(e.selectionEnd),e.selectionStart=e.selectionEnd=t+1}var fl=function(){function e(e){this.socketIOService=e}return e.prototype.initialize=function(){var e=this;this.users=new Map,this.end$=new Bt.Subject,this.usersSubject$=new Bt.Subject,this.usersTypingSubscription$=this.socketIOService.getUserIsTypingObservable().subscribe(function(t){e.users.has(t.user.id)||(e.users.set(t.user.id,{user:t.user,at:Date.now()}),e.end$.next("end"),e.usersSubject$.next(e.users))}),this.users$=this.usersSubject$.asObservable().flatMap(function(t){return X.Observable.timer(0,1e3).map(function(n){var l=Date.now(),o=[];t.forEach(function(e,t){l-e.at>4e3&&o.push(t)}),o.length&&o.forEach(function(e){t.delete(e)}),t.size||setTimeout(function(){e.end$.next("end")},0);var i=[];return t.forEach(function(e){i.push(e.user)}),i}).takeUntil(e.end$)})},e.prototype.onTyping=function(e){(!this.typingFrom||Date.now()-this.typingFrom>2e3)&&(this.typingFrom=Date.now(),this.socketIOService.imTyping(e))},e.prototype.getUsers=function(){return this.users$},e.prototype.end=function(e){this.users.has(e)&&(this.users.delete(e),this.end$.next("end"),this.usersSubject$.next(this.users))},e.prototype.destroy=function(){this.usersTypingSubscription$.unsubscribe(),this.usersSubject$.unsubscribe()},e}(),vl={};function gl(){vl={}}var yl=function(){function e(e,t,n,o,i,r,s,u,a,c,d,p,h,m,f,v,g){this.store=e,this.accessService=t,this.commentsActions=n,this.introductionActions=o,this.hotspotsActions=i,this.uiActions=r,this.socketIOService=s,this.currentUserService=u,this.userService=a,this.conversationService=c,this.document=d,this.renderer=p,this.feedActions=h,this.cacheService=m,this.multiActionsDispatcher=f,this.window=v,this._changeDetectionRef=g,this.add=new l.EventEmitter,this.resolve=new l.EventEmitter,this.changeVisibility=new l.EventEmitter,this.introduction=new l.EventEmitter,this.cssClass={"t-conversation-holder":!0,"c-popover":!0,hidden:!0},this.loadedCommentsLength=0,this.prevLoadedCommentsLength=0,this.fadeInOutAnimationState="in",this.commentButtonDisabled=!0,this.emailConfirmed=new Map,this.initialized=!1,this.commentText="",this.invisible=!1,this.lastLeftPosition=0,this.lastTopPosition=0,this.fromY="Top"}return Object.defineProperty(e.prototype,"opened",{get:function(){return this._opened},set:function(e){this._opened=e,e&&!this.initialized?(this.initOnOpen(),this.initialized=!0):(this.destroyOnClose(),this.initialized=!1)},enumerable:!0,configurable:!0}),e.prototype.addComment=function(){this.commentAddData={comment:{text:this.mentionParser.parseComment(this.textarea.getInputRef().nativeElement.value).changeEmailPrefix().changeAllToHashes().getCommentText()},hotspot:{}},this.visibility&&(this.commentAddData.hotspot.visibility=parseInt(this.visibility.value,10)),this.commentAddData.comment.text.length>e.NUMBER_OF_CHARS?this.store.dispatch(this.uiActions.setError({code:""})):(this.conversationService.notificationChanged.emit(),this.currentUserService.isAnonymous()?this.store.dispatch(this.introductionActions.startIntroduction(this.hotspot.id,this.hotspot.persistant?"addComment":"createHotspot",{text:this.commentAddData.comment.text})):(this.add.emit(this.commentAddData),this.textarea.value="",this.commentButtonDisabled=!0))},e.prototype.handleKeyDown=function(e){var t=this;e.stopPropagation();var n=e.target;n.hasAttribute("mentions-opened")&&"true"===n.getAttribute("mentions-opened")||(Et("Escape",e)?(this.textarea.value="",setTimeout(function(){t.textarea.getInputRef().nativeElement.blur()},0)):!Et("Enter",e)&&this.hotspot.persistant?this.typingUsers.onTyping(this.hotspot.id):Et("Enter",e)&&!e.shiftKey&&(e.preventDefault(),e.ctrlKey?(ml(e.target),this.textarea.updateSize(e)):this.textarea.value.trim().length>0&&this.conversationService.canSend$.getValue()&&this.addComment()))},e.prototype.handleKeyUp=function(e){e.stopPropagation();var t=e.target;if(!Et("Enter",e)){var n=0===t.value.trim().length;this.commentButtonDisabled=n}},e.prototype.onClick=function(e){e.stopPropagation()},e.prototype.onResolveClick=function(e){var t=e.target.checked;this.currentUserService.isAnonymous()?(e.preventDefault(),this.store.dispatch(this.introductionActions.startIntroduction(this.hotspot.id,"resolveHotspot",{resolved:this.resolved}))):(this.resolved=t,this.resolve.emit(t))},e.prototype.onEditMode=function(e){this.store.dispatch(e.editMode?this.commentsActions.enableEditMode(e.id):this.commentsActions.disableEditMode(e.id))},e.prototype.onEdit=function(e){e.text&&e.text.length&&this.store.dispatch(this.commentsActions.edit(this.hotspot.id,e.id,e.text))},e.prototype.onRemove=function(e){this.store.dispatch(this.commentsActions.remove(e))},e.prototype.onPreventScroll=function(e){this.scrollValue=e},e.prototype.onScroll=function(e){this.scrollValue&&(this.commentsContainerRef.nativeElement.scrollTop=this.scrollValue)},e.prototype.onVisibilityChange=function(e){var t=parseInt(e,10);if(this.hotspot.visibility!==t){if(this.hotspot.visibility=t,this.visibility$.next(this.hotspot.visibility),this.focusTextareaInput(),!this.hotspot.persistant)return;this.changeVisibility.emit({visibility:parseInt(e,10)})}},e.prototype.ngOnDestroy=function(){this.conversationService.notificationChanged.emit(),window.clearTimeout(this.visibilities),this.initialized&&this.destroyOnClose(),this.emailConfirmed.clear()},e.prototype.ngAfterViewInit=function(){var e,t,n,l,o,i;this.commentsContainerRef&&(this.scrollSubscription$=(e=this.commentsContainerRef,t=e.nativeElement,n=function(){return 0===t.scrollTop},l=function(){return t.scrollHeight-t.scrollTop===t.clientHeight},o=X.Observable.fromEvent(e.nativeElement,"wheel").merge(X.Observable.fromEvent(e.nativeElement,"mousewheel")).filter(function(e){return n()&&e.deltaY<0||l()&&e.deltaY>0}),i=X.Observable.fromEvent(e.nativeElement,"keydown").filter(function(e){return n()&&Et("ArrowUp",e)||l()&&Et("ArrowDown",e)}),o.merge(i).filter(function(e){return t.scrollHeight>t.clientHeight})).subscribe(function(e){e.preventDefault()}))},e.prototype.ngAfterContentChecked=function(){this.loadedCommentsLength!==this.prevLoadedCommentsLength&&(this.prevLoadedCommentsLength=this.loadedCommentsLength)},e.prototype.attachConversationToHotspot=function(){var e=this,t=this.wrapperRef.nativeElement.getBoundingClientRect();this.hotspot.persistant||(gl(),vl={x:this.hotspot.x,y:this.hotspot.y,savedBounds:t});var n=vl.savedBounds;vl.x===this.hotspot.x&&vl.y===this.hotspot.y&&n&&(t=n);var l=this.wrapperRef.nativeElement,o=this.document.body,i=o.clientWidth,r=o.clientHeight,s=this.document.querySelector(".c-iframe-overlay").getBoundingClientRect().height,u=function(e,t,n){var l=e.top,o=e.height;return{fromX:e.left+e.width>t?"Right":"Left",fromY:!(l-o-41>0)||l+o<=n?"Top":"Bottom"}}(t,i,r<s?r:s),a=u.fromX,c=u.fromY;this.fromY=c,this.cssClass.hidden=!1,"Top"===c?(this.renderer.setElementStyle(l,"top","15px"),this.renderer.setElementStyle(l,"bottom","initial")):(this.renderer.setElementStyle(l,"bottom","-15px"),this.renderer.setElementStyle(l,"top","initial")),"Left"===a?(this.renderer.setElementStyle(l,"left","15px"),this.renderer.setElementStyle(l,"right","initial")):(this.renderer.setElementStyle(l,"right","-15px"),this.renderer.setElementStyle(l,"left","initial")),this.hotspot.persistant&&gl(),!0===Ue(this.store).centerVertically&&this.center(a,c),this.animate(a,c),setTimeout(function(){e.resolved||e.textarea.getInputRef().nativeElement.focus()},0)},e.prototype.animate=function(e,t){var n="from"+t+e;this.hotspot.justAdded?(this.revealAnimationState="none",this.fadeInOutAnimationState="none",this.store.dispatch(this.hotspotsActions.removeJustAdded(this.hotspot.id)),this.justAddedRevealAnimationState=n):this.justAddedRevealAnimationState&&n===this.justAddedRevealAnimationState||(this.revealAnimationState=n,this.fadeInOutAnimationState="in")},e.prototype.sendScrollToBottom=function(){if(this.commentsContainerRef){var e=this.commentsContainerRef.nativeElement;e.scrollTop=e.scrollHeight}},e.prototype.canChangeVisibility=function(){return!this.resolved&&this.accessService.isTeamMember(this.currentUserService.user)},e.prototype.handleCommentClick=function(e){e.preventDefault(),e.stopPropagation(),this.textarea.value.trim().length>0&&this.addComment(),this.textarea.getInputRef().nativeElement.focus()},e.prototype.handleCancel=function(e){var t=this.textarea;e.stopPropagation(),""===t.value&&(this.hotspot.persistant?this.multiActionsDispatcher.deactivateHotspot(this.hotspot.id):this.store.dispatch(this.hotspotsActions.cleanupUnsaved())),t.value=""},e.prototype.initOnOpen=function(){var e,t=this;if(this.hotspot.persistant||setTimeout(function(){t.attachConversationToHotspot()},0),(e=this.store,e.select(function(e){return e.introduction})).subscribe(function(e){t.introductionState=e}),this.comments$=this.store.select(function(e){return e.comments}).filter(function(e){return t.hotspot.id===e.currentHotspotId}).do(function(e){if(e.currentEntries.length){t.loadedComments=e.currentEntries;var n=t.loadedCommentsLength;t.loadedCommentsLength=e.currentEntries.length,t.typingUsers.end(e.currentEntries[e.currentEntries.length-1].author.id),setTimeout(function(){0===n&&(t.attachConversationToHotspot(),t.setVisibilityData()),n<t.loadedCommentsLength&&t.sendScrollToBottom()},0)}}),this.typingUsers=new fl(this.socketIOService),this.typingUsers.initialize(),this.typingUsers$=this.typingUsers.getUsers(),this.visibility$=new J.BehaviorSubject(this.hotspot.visibility),this.mentionsUsers=this.visibility$.asObservable().flatMap(function(e){return e===ie.visibilities.ALL?t.userService.getPreparedMentions(!0):t.userService.getPreparedTeamMentions(!0)}),this.hotspot.persistant||(this.loadedCommentsLength=0,this.prevLoadedCommentsLength=-1),this.hotspotSubscription$=function(e,t){return Ne(e).map(function(e){return e.entries.filter(function(e){return e.id===t})}).map(function(e){return e&&e.length?e[0]:null})}(this.store,this.hotspot.id).subscribe(function(e){e&&(t.hotspot=e,t.resolved=!!t.hotspot.resolvedAt)}),this.cacheService.hasItem("comment")){var n=JSON.parse(this.cacheService.getItem("comment"));this.hotspot.visibility=n.hotspot.visibility,this.commentText=n.comment,this.commentButtonDisabled=!1,this.cacheService.removeItem("comment")}this.mentionSubscription$=this.userService.fetchMentions().subscribe(function(e){t.mentionParser=new Ut.a(e)}),this.setVisibilityData()},e.prototype.setVisibilityData=function(){var e=this;this.visibilities=window.setTimeout(function(){e.canSeeVisibilityDropdown=e.accessService.isTeamMember(e.hotspot.author),e.canChangeTeamVisibility=e.accessService.canChangeVisibilityOfHotspot(e.hotspot,e.loadedComments,"team"),e.canChangeEveryoneVisibility=e.accessService.canChangeVisibilityOfHotspot(e.hotspot,e.loadedComments,"everyone")},0)},e.prototype.destroyOnClose=function(){this.typingUsers&&this.typingUsers.destroy(),this.hotspotSubscription$&&this.hotspotSubscription$.unsubscribe(),this.mentionSubscription$&&this.mentionSubscription$.unsubscribe(),this.scrollSubscription$&&this.scrollSubscription$.unsubscribe()},e.prototype.center=function(e,t){void 0===e&&(e="Left"),void 0===t&&(t="Top");var n=this.wrapperRef.nativeElement.getBoundingClientRect(),l=this.document.querySelector(".c-iframe-holder"),o=l.getBoundingClientRect(),i=this.hotspot.sectionY+this.hotspot.y,r=this.hotspot.x;"Top"===t?i+=-15:i-=n.height,"Left"===e?r+=-15:r-=n.width,l.scrollTop=i-(o.height/2-n.height/2),l.scrollLeft=r},e.prototype.afterAddCommentIntroduction=function(){this.textarea.value=""},e.prototype.afterCreateHotspotIntroduction=function(){var e=this;this.invisible=!0,this.socketIOService.createHotspotResponse$.take(1).subscribe(function(t){t.hotspot.justAdded=!0,e.store.dispatch(e.hotspotsActions.saveSuccess(t.hotspot,t.hotspot.justAdded))})},e.prototype.afterResolveHotspotIntroduction=function(){this.resolved=!this.resolved,this.resolve.emit(this.resolved)},e.prototype.focusTextareaInput=function(){var e=this;setTimeout(function(){e.resolved||e.textarea.getInputRef().nativeElement.focus()},0)},e}();yl.NUMBER_OF_CHARS=32768;var bl=n(1076),El=n.n(bl),Sl=function(){function e(e,t,n,o,i,r,s){this.accessService=e,this.userService=t,this.currentUserService=n,this.conversationContainer=o,this.window=r,this.commentsHelper=s,this.last=!1,this.removeHandler=new l.EventEmitter,this.editHandler=new l.EventEmitter,this.editModeHandler=new l.EventEmitter,this.preventScroll=new l.EventEmitter,this.deleteConfirmationMode=!1,this.enabled=!1,this.saveButtonDisabled=!1,this.nativeElement=i.nativeElement}return e.prototype.handleDelete=function(){var e=this;this.deleteConfirmationMode?this.removeHandler.emit(this.comment):(this.deleteConfirmationMode=!0,this.last&&setTimeout(function(){e.conversationContainer.sendScrollToBottom()},0))},e.prototype.cancelDelete=function(){this.deleteConfirmationMode=!1},e.prototype.handleEditMode=function(){this.editModeHandler.emit({id:this.comment.id,editMode:!this.comment.editMode})},e.prototype.handleKeyDown=function(e){if(this.preventScrollDebounce(),e.stopPropagation(),Et("Enter",e)&&!e.shiftKey){var t=e.target;if(t.hasAttribute("mentions-opened")&&"true"===t.getAttribute("mentions-opened"))return;e.ctrlKey?ml(t):this.textarea.getInputRef().nativeElement.value.length&&(e.preventDefault(),this.save())}},e.prototype.handleKeyUp=function(e){e.stopPropagation();var t=e.target;Et("Enter",e)||(this.saveButtonDisabled=!(t.value.length>0))},e.prototype.handleFocus=function(e){this.preventScrollDebounce()},e.prototype.handleSave=function(e){this.textarea.getInputRef().nativeElement.value.length&&this.save()},e.prototype.preventScrollDebounce=function(){var e=this;this.preventScroll.emit(this.nativeElement.offsetTop),window.clearTimeout(this.timeout),this.timeout=window.setTimeout(function(){e.preventScroll.emit()},200)},e.prototype.save=function(){this.editHandler.emit({id:this.comment.id,text:this.mentionParser.parseComment(this.textarea.getInputRef().nativeElement.value).changeEmailPrefix().changeAllToHashes().getCommentText()}),this.textarea.value=""},Object.defineProperty(e.prototype,"commentTextDisplay",{get:function(){var e=this.commentsHelper.escapeChevrons(this.comment);return this.mentionParser.parseComment(e).changeEmailPrefix().changeAllToHashes().wrapUnsavedInvites().changeHashesToSlugs({html:!0}).wrapLinks().getCommentText().replace(/(?:\r\n|\r|\n)/g,"<br>")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commentTextEdit",{get:function(){var e=El()(this.comment.text);return this.mentionParser.parseComment(e).changeEmailPrefix().changeSlugsToHashes().changeHashesToSlugs().getCommentText()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unread",{get:function(){return this.currentUserService.id!==this.comment.author.id&&ae(this.comment.createdAt,this.hotspotViewedAt)&&!this.currentUserService.isAnonymous()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.prevResolved=this.resolved,this.mentionSub$=this.userService.fetchMentions().subscribe(function(t){e.mentionParser=new Ut.a(t),e.enabled=!0})},e.prototype.ngAfterContentChecked=function(){this.resolved!==this.prevResolved&&(this.resolved&&(this.deleteConfirmationMode=!1,this.comment.editMode=!1),this.prevResolved=this.resolved)},e.prototype.ngAfterViewInit=function(){var e=this;this.textarea&&setTimeout(function(){e.textarea.getInputRef().nativeElement.focus(),e.last&&e.comment.editMode&&e.conversationContainer.sendScrollToBottom()},0)},e.prototype.ngOnDestroy=function(){this.mentionSub$&&this.mentionSub$.unsubscribe()},e}(),Cl=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Al(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"ip-dropdown-item",[["icon","mode_edit"]],null,[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleEditMode()&&l),l},c.b,c.a)),l["ɵdid"](1,4243456,null,0,d.IpDropdownItemComponent,[p.IpDropdownService,l.ElementRef,h.IpDropdownComponent],{icon:[0,"icon"]},{click:"click"}),(e()(),l["ɵted"](-1,0,["Edit "]))],function(e,t){e(t,1,0,"mode_edit")},null)}function Il(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"ip-dropdown-item",[["icon","delete"]],null,[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleDelete()&&l),l},c.b,c.a)),l["ɵdid"](1,4243456,null,0,d.IpDropdownItemComponent,[p.IpDropdownService,l.ElementRef,h.IpDropdownComponent],{icon:[0,"icon"]},{click:"click"}),(e()(),l["ɵted"](-1,0,["Delete "]))],function(e,t){e(t,1,0,"delete")},null)}function Tl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"p",[["class","u-text--small u-text--wrap"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,t){e(t,0,0,t.component.commentTextDisplay)})}function _l(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,34,"div",[["class","u-full-width"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,10,"ip-form-text-field",[],null,null,null,F.b,F.a)),l["ɵdid"](3,1294336,null,1,j.IpTextFieldComponent,[],null,null),l["ɵqud"](335544320,6,{formTextInput:0}),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵeld"](6,0,null,0,5,"ip-form-textarea-autosize",[["maxRows","3"],["minRows","1"],["rows","1"]],null,[[null,"keydown"],[null,"keyup"],[null,"focus"]],function(e,t,n){var o=!0,i=e.component;return"keydown"===t&&(o=!1!==l["ɵnov"](e,9).onKeyDown(n)&&o),"keydown"===t&&(o=!1!==i.handleKeyDown(n)&&o),"keyup"===t&&(o=!1!==i.handleKeyUp(n)&&o),"focus"===t&&(o=!1!==i.handleFocus(n)&&o),o},ll.b,ll.a)),l["ɵprd"](5120,null,G.NG_VALUE_ACCESSOR,function(e){return[e]},[ol.IpTextareaAutosizeComponent]),l["ɵdid"](8,4308992,[[1,4],["textarea",4]],0,ol.IpTextareaAutosizeComponent,[[2,j.IpTextFieldComponent]],{rows:[0,"rows"],minRows:[1,"minRows"],maxRows:[2,"maxRows"],value:[3,"value"]},{keydown:"keydown",keyup:"keyup",focus:"focus"}),l["ɵdid"](9,212992,null,0,hl,[l.ElementRef,l.ApplicationRef,vt,l.Injector,mt,v.DOCUMENT],{data:[0,"data"]},null),l["ɵprd"](2048,[[6,4]],q.IpFormTextInputElement,null,[ol.IpTextareaAutosizeComponent]),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](14,0,null,null,19,"div",[["class","l-group l-group--block l-group--hor-right"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](16,0,null,null,7,"div",[["class","l-group__item"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](18,0,null,null,4,"button",[["class","c-btn c-btn--regular-tertiary c-btn--regular-tertiary-action c-btn--regular-tertiary-small"]],null,[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleEditMode()&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](20,0,null,null,1,"span",[["class","c-btn__content"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["CANCEL"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](25,0,null,null,7,"div",[["class","l-group__item"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](27,0,null,null,4,"button",[["class","c-btn c-btn--regular-secondary c-btn--regular-secondary-action c-btn--regular-secondary-small"]],[[8,"disabled",0],[2,"is-disabled",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleSave(n)&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](29,0,null,null,1,"span",[["class","c-btn__content"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["SAVE"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,3,0),e(t,8,0,"1","1","3",n.commentTextEdit),e(t,9,0,n.mentionsUsers)},function(e,t){var n=t.component;e(t,27,0,n.saveButtonDisabled,n.saveButtonDisabled)})}function Ol(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,56,"div",[["class","l-space-ver-primary l-space-hor-quaternary l-group l-group--block l-group--secondary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,4,"div",[["class","l-group__item l-group__item--no-shrink"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,1,"ip-avatar",[],null,null,null,M,O)),l["ɵdid"](5,114688,null,0,_,[],{user:[0,"user"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](8,0,null,null,47,"div",[["class","l-group__item l-group__item--grow u-ellipsis-holder"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](10,0,null,null,38,"div",[["class","l-group l-group--block l-group--ver-center"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](12,0,null,null,5,"div",[["class","l-group__item u-text--small u-ellipsis"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](14,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),l["ɵted"](15,null,["",""])),l["ɵppd"](16,1),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](19,0,null,null,2,"div",[["class","l-group__item l-group__item--grow l-group__item--no-shrink u-text--x-small u-text--less-important"]],null,null,null,null,null)),(e()(),l["ɵted"](20,null,["",""])),l["ɵppd"](21,1),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](23,0,null,null,24,"div",[["class","l-group__item l-group__item--no-shrink"]],[[2,"u-invisible",null]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](25,0,null,null,21,"ip-dropdown",[["dropdownAlign","right"]],[[2,"c-dropdown--bottom",null]],null,null,m.b,m.a)),l["ɵprd"](512,null,p.IpDropdownService,p.IpDropdownService,[]),l["ɵdid"](27,1294336,null,4,h.IpDropdownComponent,[v.DOCUMENT,l.ElementRef,p.IpDropdownService],{dropdownAlign:[0,"dropdownAlign"]},null),l["ɵqud"](335544320,2,{customScrollContainer:0}),l["ɵqud"](335544320,3,{scrollSercheableContainer:0}),l["ɵqud"](335544320,4,{scrollSercheableHeader:0}),l["ɵqud"](603979776,5,{contentGroups:1}),(e()(),l["ɵted"](-1,1,[" "])),(e()(),l["ɵeld"](33,0,null,0,2,"ip-button",[["icon","more_horiz"],["ip-dropdown-trigger",""],["size","large"],["type","clean"]],[[2,"u-pointer-none",null]],null,null,A.b,A.a)),l["ɵdid"](34,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],{size:[0,"size"],icon:[1,"icon"],type:[2,"type"]},null),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵted"](-1,1,[" "])),(e()(),l["ɵeld"](37,0,null,2,8,"ip-dropdown-group",[],null,null,null,g.b,g.a)),l["ɵdid"](38,49152,[[5,4]],0,y.IpDropdownGroupComponent,[],null,null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,0,1,null,Al)),l["ɵdid"](41,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,0,1,null,Il)),l["ɵdid"](44,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,1,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Tl)),l["ɵdid"](51,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,_l)),l["ɵdid"](54,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,5,0,n.comment.author),e(t,27,0,"right"),e(t,34,0,"large","more_horiz","clean"),e(t,41,0,n.accessService.canEditComment(n.comment.author)),e(t,44,0,n.accessService.canDeleteComment(n.comment.author)),e(t,51,0,!n.comment.editMode),e(t,54,0,n.comment.editMode)},function(e,t){var n=t.component;e(t,15,0,l["ɵunv"](t,15,0,e(t,16,0,l["ɵnov"](t.parent.parent,0),n.comment.author))),e(t,20,0,l["ɵunv"](t,20,0,e(t,21,0,l["ɵnov"](t.parent.parent,1),n.comment.createdAt))),e(t,23,0,!(!n.resolved&&!n.comment.editMode&&!n.deleteConfirmationMode&&n.accessService.canDeleteOrEditComment(n.comment.author))),e(t,25,0,n.last),e(t,33,0,l["ɵnov"](t,34).disabled)})}function wl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,25,"div",[["class","u-bg--secondary l-space-ver-secondary l-space-hor-quaternary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,1,"p",[["class","u-text--small"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Click CONFIRM to delete this comment."])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](5,0,null,null,19,"div",[["class","l-group l-group--block l-group--hor-right l-space-top-primary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](7,0,null,null,7,"div",[["class","l-group__item"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](9,0,null,null,4,"button",[["class","c-btn c-btn--regular-tertiary c-btn--regular-tertiary-danger c-btn--regular-tertiary-small"]],null,[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.cancelDelete()&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](11,0,null,null,1,"span",[["class","c-btn__content"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["CANCEL"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](16,0,null,null,7,"div",[["class","l-group__item"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](18,0,null,null,4,"button",[["class","c-btn c-btn--regular-secondary c-btn--regular-secondary-danger c-btn--regular-secondary-small"]],null,[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleDelete()&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](20,0,null,null,1,"span",[["class","c-btn__content"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["CONFIRM"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],null,null)}function Ml(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"li",[["class","t-comment"]],[[2,"is-active",null],[2,"is-new",null]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Ol)),l["ɵdid"](3,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,wl)),l["ɵdid"](6,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,3,0,!n.deleteConfirmationMode),e(t,6,0,n.deleteConfirmationMode)},function(e,t){var n=t.component;e(t,0,0,n.comment.editMode,n.unread)})}function Dl(e){return l["ɵvid"](0,[l["ɵpid"](0,D,[]),l["ɵpid"](0,jt,[]),l["ɵqud"](671088640,1,{textarea:0}),(e()(),l["ɵand"](16777216,null,null,1,null,Ml)),l["ɵdid"](4,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,4,0,t.component.enabled)},null)}var kl=function(){function e(){this.position={top:0,left:0},this.visibility="hidden"}return Object.defineProperty(e.prototype,"visible",{get:function(){return"visible"===this.visibility},set:function(e){this.visibility=e?"visible":"hidden"},enumerable:!0,configurable:!0}),e}(),Rl=function(e){return new RegExp("^\\s?[\\+\\@][^\\s]+@{1}[^\\s]+\\.[^\\s]+",e)},Pl=function(){function e(e,t,n,o,i,r,s,u,a){this.element=e,this.componentResolver=t,this.injector=n,this.viewContainerRef=o,this.applicationRef=i,this.componentInjectorService=r,this.conversationService=s,this.usersService=u,this.document=a,this._notificationType=0,this.keyUp=new l.EventEmitter,this.subscriptions={},this.appElementRef=n.get(cl),this.outsideClickHandler=this.outsideClickHandler.bind(this)}return Object.defineProperty(e.prototype,"found",{get:function(){return this._found},set:function(e){this._found=e,this.conversationService.notificationChanged.emit({type:this.notificationType,found:e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"notificationType",{get:function(){return this._notificationType},set:function(e){this._notificationType=e,this.component&&(this.component.type=e)},enumerable:!0,configurable:!0}),e.prototype.handleKeyUp=function(e){this.keyUp.emit(e)},e.prototype.handleHostFocus=function(e){this._ready||this.initializeSubscriptions(),this.keyUp.emit(e)},e.prototype.handeHostBlur=function(){this.hideComponent(),this.unsubscribe()},e.prototype.ngOnInit=function(){var e=this;setTimeout(function(){e.initializeComponent(),e.document.addEventListener("scroll",e.outsideClickHandler,!0),e.document.addEventListener("click",e.outsideClickHandler,!0)})},e.prototype.initializeComponent=function(){var e=this,t=this.createComponent();t.onDestroy(function(){e.unsubscribe()}),this.component=t.instance,this.component.type=this.notificationType},e.prototype.createComponent=function(){return this.componentInjectorService.createComponent(kl,this.appElementRef.mentionsAnchorRef)},e.prototype.initializeSubscriptions=function(){var e=this;this.subscriptions.searchReset$=this.createResetObservable().subscribe(function(t){var n=e.hasEmail(t.target.value);n?n&&e.found&&e.showComponent(t.target):(e.found=!1,e.hideComponent())}),this.subscriptions.search$=this.createSearchObservable().subscribe(function(t){var n=t[1],l=t[2];e.found=t[0].some(function(e){return!n.some(function(t){return e===t})}),l&&n.length?e.hideComponent():e.found?e.showComponent(e.element.nativeElement.children[0]):e.hideComponent()}),this._ready=!0},e.prototype.createResetObservable=function(){return this.keyUp.filter(function(e){return!e.target.value.trim().length||St(["Backspace","Backspace"],e)})},e.prototype.createSearchObservable=function(){var e=this.keyUp.map(function(e){return e.target.value}).filter(function(e){return/\+|@/.test(e)}).map(function(e){return(e.match(Rl("g"))||[]).map(function(e){return e.trim().substring(1)})}),t=this.conversationService.mentionsChanged.startWith([]).map(function(e){return e.length>0}),n=this.getMentions().map(function(e){return e.map(function(e){return e.description})});return Xe.Observable.combineLatest(e,n,t)},e.prototype.getMentions=function(){return this.notificationType?this.usersService.getPreparedTeamMentions():this.usersService.getPreparedMentions()},e.prototype.hasEmail=function(e){return Rl().test(e)},e.prototype.showComponent=function(e){this.component.width=e.clientWidth,this.component.type=this.notificationType,this.component.position=this.calculatePosition(e),this.component.visible=!0},e.prototype.hideComponent=function(){this.component.visible=!1},e.prototype.calculatePosition=function(e){var t=this.component.containerRef.nativeElement,n={},l=e.getBoundingClientRect(),o=l.top,i=t.clientHeight<=o-41-e.clientHeight;return n.left=l.left,n.top=i?o-t.clientHeight-41-25:o+e.clientHeight-41+10,n},e.prototype.outsideClickHandler=function(e){!this.element.nativeElement.contains(e.target)&&this.component.visible&&this.hideComponent()},e.prototype.unsubscribe=function(){var e=this;Object.keys(this.subscriptions).forEach(function(t){e.subscriptions[t].unsubscribe()}),this._ready=!1},e.prototype.ngOnDestroy=function(){this.unsubscribe(),this.document.removeEventListener("click",this.outsideClickHandler,!0),this.document.removeEventListener("scroll",this.outsideClickHandler,!0)},e}(),Hl=n(1090),xl=n(145);function Nl(e){return Object(K.isEmail)(e.value)?null:{isEmail:{valid:!1}}}var Vl=function(){function e(e,t,n){this.formBuilder=e,this.paramsService=t,this.renderer=n,this.back=new l.EventEmitter,this.next=new l.EventEmitter,this.cancel=new l.EventEmitter,this.submitHandler=new l.EventEmitter,this.formParts={0:{fields:{email:{control:["",[G.Validators.required,Nl]],errors:"",messages:{required:"Email is required.",isEmail:"Please enter a valid email."},readonly:!1}},callback:function(e){e.emailInput&&e.renderer.invokeElementMethod(e.emailInput.getInputRef().nativeElement,"focus")}},1:{fields:{firstName:{control:["",[G.Validators.required,G.Validators.minLength(2),G.Validators.maxLength(32)]],error:"",messages:{required:"First name is required.",minlength:"First name must be at least 2 characters long.",maxlength:"First name cannot be more than 32 characters long."},readonly:!1},lastName:{control:["",[G.Validators.required,G.Validators.minLength(2),G.Validators.maxLength(32)]],errors:"",messages:{required:"Last name is required.",minlength:"Last name must be at least 2 characters long.",maxlength:"Last name cannot be more than 32 characters long."},readonly:!1},hiddenHelper:{control:[""],errors:"",messages:{},readonly:!1}},callback:function(e){e.firstNameInput&&e.renderer.invokeElementMethod(e.firstNameInput.getInputRef().nativeElement,"focus")}}},this.values={},this.teamMember=!1,this.returningGuest=!1}return e.prototype.handleEnter=function(e){Et("Enter",e)&&this.form.valid&&(e.preventDefault(),e.target&&e.target.blur(),this.form.ngSubmit.emit())},e.prototype.ngOnInit=function(){this.buildForm()},e.prototype.ngOnDestroy=function(){this.valueChangesSub$&&this.valueChangesSub$.unsubscribe()},e.prototype.buildForm=function(){var e=this,t={};for(var n in this.currentFormPart.fields)t[n]=this.currentFormPart.fields[n].control,this.values[n]&&(t[n][0]=this.values[n]);this.formGroup=this.formBuilder.group(t),this.valueChangesSub$&&this.valueChangesSub$.unsubscribe(),this.valueChangesSub$=this.formGroup.valueChanges.subscribe(function(t){return e.onValueChanged(t)}),this.onValueChanged()},e.prototype.onValueChanged=function(e){if(this.formGroup)for(var t in this.currentFormPart.fields){this.currentFormPart.fields[t].errors="";var n=this.formGroup.get(t);if(n&&n.dirty&&!n.valid)for(var l in n.errors)this.currentFormPart.fields[t].errors+=this.currentFormPart.fields[t].messages[l]+" "}},e.prototype.handleSubmit=function(e){if(this.formGroup.valid){for(var t in this.formGroup.value)this.values[t]=this.formGroup.value[t];this.submitHandler.emit({values:this.values})}else e&&e.preventDefault()},e.prototype.handleNextStep=function(){this.next.emit()},e.prototype.ngOnChanges=function(t){var n=this,l=t.currentStep;l&&l.currentValue<e.MAX_STEPS&&(this.buildForm(),this.currentFormPart.callback&&setTimeout(function(){n.currentFormPart.callback(n)},0))},Object.defineProperty(e.prototype,"currentFormPart",{get:function(){return this.formParts[this.currentStep]},enumerable:!0,configurable:!0}),e.prototype.handleBack=function(e,t){void 0===t&&(t=!0),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),this.teamMember=!1,0===this.currentStep?this.cancel.emit():this.back.emit()},Object.defineProperty(e.prototype,"redirectLink",{get:function(){return"/redirectToPreview/"+this.paramsService.roomHash+"/"+this.variation+"/"+this.displayMode+(this.popupId?"/"+this.popupId:"")},enumerable:!0,configurable:!0}),e.prototype.setReturningGuest=function(e,t){this.returningGuest=!0,this.teamMember=!1,this.formGroup.get("firstName").setValue(e),this.formGroup.get("lastName").setValue(t),this.formGroup.get("firstName").disable(),this.formGroup.get("lastName").disable(),this.formGroup.get("firstName").clearValidators(),this.formGroup.get("lastName").clearValidators()},e}();Vl.MAX_STEPS=2;var Ll=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Ul(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Introduce yourself"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](5,0,null,null,1,"p",[["class","u-text--small l-space-ver-tertiary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" Let the team know who you are and where you’d like to receive notifications when someone mentions you. "])),(e()(),l["ɵted"](-1,null,[" "]))],null,null)}function $l(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Welcome back"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](5,0,null,null,1,"p",[["class","u-text--small l-space-ver-tertiary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" Looks like you have been here before. Your comment will be posted with the below credentials. "])),(e()(),l["ɵted"](-1,null,[" "]))],null,null)}function Fl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,17,"div",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,14,"ip-form-text-field",[["label","Email"]],null,null,null,F.b,F.a)),l["ɵdid"](3,1294336,null,1,j.IpTextFieldComponent,[],{label:[0,"label"],errors:[1,"errors"]},null),l["ɵqud"](335544320,5,{formTextInput:0}),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵeld"](6,0,null,0,9,"ip-form-input",[["formControlName","email"],["id","email"],["name","email"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,B.b,B.a)),l["ɵdid"](7,16384,null,0,G.RequiredValidator,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,G.NG_VALIDATORS,function(e){return[e]},[G.RequiredValidator]),l["ɵdid"](9,4308992,[[1,4],["emailInput",4]],0,z.IpFormInputComponent,[[2,j.IpTextFieldComponent]],{id:[0,"id"],name:[1,"name"],required:[2,"required"],value:[3,"value"]},null),l["ɵprd"](1024,null,G.NG_VALUE_ACCESSOR,function(e){return[e]},[z.IpFormInputComponent]),l["ɵdid"](11,671744,null,0,G.FormControlName,[[3,G.ControlContainer],[2,G.NG_VALIDATORS],[8,null],[2,G.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),l["ɵprd"](2048,null,G.NgControl,null,[G.FormControlName]),l["ɵdid"](13,16384,null,0,G.NgControlStatus,[G.NgControl],null,null),l["ɵprd"](2048,[[5,4]],q.IpFormTextInputElement,null,[z.IpFormInputComponent]),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,3,0,"Email",n.currentFormPart.fields.email.errors),e(t,7,0,!0),e(t,9,0,"email","email",!0,n.formGroup.value.email),e(t,11,0,"email")},function(e,t){e(t,6,0,l["ɵnov"](t,7).required?"":null,l["ɵnov"](t,13).ngClassUntouched,l["ɵnov"](t,13).ngClassTouched,l["ɵnov"](t,13).ngClassPristine,l["ɵnov"](t,13).ngClassDirty,l["ɵnov"](t,13).ngClassValid,l["ɵnov"](t,13).ngClassInvalid,l["ɵnov"](t,13).ngClassPending)})}function jl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,40,"div",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,14,"ip-form-text-field",[["label","First name"]],null,null,null,F.b,F.a)),l["ɵdid"](3,1294336,null,1,j.IpTextFieldComponent,[],{label:[0,"label"],errors:[1,"errors"]},null),l["ɵqud"](335544320,6,{formTextInput:0}),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵeld"](6,0,null,0,9,"ip-form-input",[["formControlName","firstName"],["id","firstName"],["name","firstName"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,B.b,B.a)),l["ɵdid"](7,16384,null,0,G.RequiredValidator,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,G.NG_VALIDATORS,function(e){return[e]},[G.RequiredValidator]),l["ɵdid"](9,4308992,[[2,4],["firstNameInput",4]],0,z.IpFormInputComponent,[[2,j.IpTextFieldComponent]],{id:[0,"id"],name:[1,"name"],required:[2,"required"],isReadonly:[3,"isReadonly"],value:[4,"value"]},null),l["ɵprd"](1024,null,G.NG_VALUE_ACCESSOR,function(e){return[e]},[z.IpFormInputComponent]),l["ɵdid"](11,671744,null,0,G.FormControlName,[[3,G.ControlContainer],[2,G.NG_VALIDATORS],[8,null],[2,G.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),l["ɵprd"](2048,null,G.NgControl,null,[G.FormControlName]),l["ɵdid"](13,16384,null,0,G.NgControlStatus,[G.NgControl],null,null),l["ɵprd"](2048,[[6,4]],q.IpFormTextInputElement,null,[z.IpFormInputComponent]),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](18,0,null,null,14,"ip-form-text-field",[["label","Last name"]],null,null,null,F.b,F.a)),l["ɵdid"](19,1294336,null,1,j.IpTextFieldComponent,[],{label:[0,"label"],errors:[1,"errors"]},null),l["ɵqud"](335544320,7,{formTextInput:0}),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵeld"](22,0,null,0,9,"ip-form-input",[["formControlName","lastName"],["id","lastName"],["name","lastName"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,B.b,B.a)),l["ɵdid"](23,16384,null,0,G.RequiredValidator,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,G.NG_VALIDATORS,function(e){return[e]},[G.RequiredValidator]),l["ɵdid"](25,4308992,null,0,z.IpFormInputComponent,[[2,j.IpTextFieldComponent]],{id:[0,"id"],name:[1,"name"],required:[2,"required"],isReadonly:[3,"isReadonly"],value:[4,"value"]},null),l["ɵprd"](1024,null,G.NG_VALUE_ACCESSOR,function(e){return[e]},[z.IpFormInputComponent]),l["ɵdid"](27,671744,null,0,G.FormControlName,[[3,G.ControlContainer],[2,G.NG_VALIDATORS],[8,null],[2,G.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),l["ɵprd"](2048,null,G.NgControl,null,[G.FormControlName]),l["ɵdid"](29,16384,null,0,G.NgControlStatus,[G.NgControl],null,null),l["ɵprd"](2048,[[7,4]],q.IpFormTextInputElement,null,[z.IpFormInputComponent]),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](34,0,null,null,5,"input",[["formControlName","hiddenHelper"],["type","hidden"],["value",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==l["ɵnov"](e,35)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==l["ɵnov"](e,35).onTouched()&&o),"compositionstart"===t&&(o=!1!==l["ɵnov"](e,35)._compositionStart()&&o),"compositionend"===t&&(o=!1!==l["ɵnov"](e,35)._compositionEnd(n.target.value)&&o),o},null,null)),l["ɵdid"](35,16384,null,0,G.DefaultValueAccessor,[l.Renderer2,l.ElementRef,[2,G.COMPOSITION_BUFFER_MODE]],null,null),l["ɵprd"](1024,null,G.NG_VALUE_ACCESSOR,function(e){return[e]},[G.DefaultValueAccessor]),l["ɵdid"](37,671744,null,0,G.FormControlName,[[3,G.ControlContainer],[8,null],[8,null],[2,G.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),l["ɵprd"](2048,null,G.NgControl,null,[G.FormControlName]),l["ɵdid"](39,16384,null,0,G.NgControlStatus,[G.NgControl],null,null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,3,0,"First name",n.currentFormPart.fields.firstName.errors),e(t,7,0,!0),e(t,9,0,"firstName","firstName",!0,n.currentFormPart.fields.firstName.readonly,n.formGroup.value.firstName||""),e(t,11,0,"firstName"),e(t,19,0,"Last name",n.currentFormPart.fields.lastName.errors),e(t,23,0,!0),e(t,25,0,"lastName","lastName",!0,n.currentFormPart.fields.lastName.readonly,n.formGroup.value.lastName||""),e(t,27,0,"lastName"),e(t,37,0,"hiddenHelper")},function(e,t){e(t,6,0,l["ɵnov"](t,7).required?"":null,l["ɵnov"](t,13).ngClassUntouched,l["ɵnov"](t,13).ngClassTouched,l["ɵnov"](t,13).ngClassPristine,l["ɵnov"](t,13).ngClassDirty,l["ɵnov"](t,13).ngClassValid,l["ɵnov"](t,13).ngClassInvalid,l["ɵnov"](t,13).ngClassPending),e(t,22,0,l["ɵnov"](t,23).required?"":null,l["ɵnov"](t,29).ngClassUntouched,l["ɵnov"](t,29).ngClassTouched,l["ɵnov"](t,29).ngClassPristine,l["ɵnov"](t,29).ngClassDirty,l["ɵnov"](t,29).ngClassValid,l["ɵnov"](t,29).ngClassInvalid,l["ɵnov"](t,29).ngClassPending),e(t,34,0,l["ɵnov"](t,39).ngClassUntouched,l["ɵnov"](t,39).ngClassTouched,l["ɵnov"](t,39).ngClassPristine,l["ɵnov"](t,39).ngClassDirty,l["ɵnov"](t,39).ngClassValid,l["ɵnov"](t,39).ngClassInvalid,l["ɵnov"](t,39).ngClassPending)})}function Bl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,37,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0,i=e.component;return"submit"===t&&(o=!1!==l["ɵnov"](e,2).onSubmit(n)&&o),"reset"===t&&(o=!1!==l["ɵnov"](e,2).onReset()&&o),"ngSubmit"===t&&(o=!1!==i.handleSubmit(n)&&o),o},null,null)),l["ɵdid"](1,16384,null,0,G["ɵbf"],[],null,null),l["ɵdid"](2,540672,[[4,4],["form",4]],0,G.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),l["ɵprd"](2048,null,G.ControlContainer,null,[G.FormGroupDirective]),l["ɵdid"](4,16384,null,0,G.NgControlStatusGroup,[G.ControlContainer],null,null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Fl)),l["ɵdid"](7,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,jl)),l["ɵdid"](10,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](12,0,null,null,24,"div",[["class","l-group l-group--block l-group--ver-center l-space-top-quaternary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](14,0,null,null,4,"div",[["class","l-group__item"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](16,0,null,null,1,"a",[["class","u-text--action"]],[[8,"href",4]],null,null,null,null)),(e()(),l["ɵted"](-1,null,["TEAM MEMBER? LOG IN"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](20,0,null,null,15,"div",[["class","l-group l-group__item l-group__item--right"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](22,0,null,null,5,"div",[["class","l-group__item"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](24,0,null,null,2,"ip-button",[["htmlType","button"],["size","small"]],[[2,"u-pointer-none",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleBack(n,!0)&&l),l},A.b,A.a)),l["ɵdid"](25,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],{htmlType:[0,"htmlType"],size:[1,"size"]},null),(e()(),l["ɵted"](-1,0,["Back "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](29,0,null,null,5,"div",[["class","l-group__item"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](31,0,null,null,2,"ip-button",[["color","action"],["htmlType","submit"],["size","small"]],[[2,"u-pointer-none",null]],null,null,A.b,A.a)),l["ɵdid"](32,4833280,[[3,4],["submit",4]],0,I.IpButtonComponent,[l.ChangeDetectorRef],{htmlType:[0,"htmlType"],color:[1,"color"],size:[2,"size"],disabled:[3,"disabled"]},null),(e()(),l["ɵted"](-1,0,["Continue "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,2,0,n.formGroup),e(t,7,0,0===n.currentStep),e(t,10,0,1===n.currentStep),e(t,25,0,"button","small"),e(t,32,0,"submit","action","small",!n.formGroup.valid)},function(e,t){var n=t.component;e(t,0,0,l["ɵnov"](t,4).ngClassUntouched,l["ɵnov"](t,4).ngClassTouched,l["ɵnov"](t,4).ngClassPristine,l["ɵnov"](t,4).ngClassDirty,l["ɵnov"](t,4).ngClassValid,l["ɵnov"](t,4).ngClassInvalid,l["ɵnov"](t,4).ngClassPending),e(t,16,0,n.redirectLink),e(t,24,0,l["ɵnov"](t,25).disabled),e(t,31,0,l["ɵnov"](t,32).disabled)})}function Gl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","u-text--center l-space-ver-tertiary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,1,"ip-spinner",[["size","large"]],null,null,null,Hl.b,Hl.a)),l["ɵdid"](3,49152,null,0,xl.IpSpinnerComponent,[],{size:[0,"size"]},null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,3,0,"large")},null)}function zl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,13,"div",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Ul)),l["ɵdid"](3,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,$l)),l["ɵdid"](6,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Bl)),l["ɵdid"](9,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Gl)),l["ɵdid"](12,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,3,0,!n.returningGuest),e(t,6,0,n.returningGuest),e(t,9,0,!n.isProcessing),e(t,12,0,n.isProcessing)},null)}function ql(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,29,"div",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Introduce yourself"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](5,0,null,null,1,"p",[["class","u-text--small l-space-ver-tertiary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" You have introduced yourself as one of the teammembers. Please log into your account to finish commenting. "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](8,0,null,null,20,"div",[["class","l-group l-group--block l-group--ver-center l-space-top-quaternary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](10,0,null,null,1,"div",[["class","l-group__item"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](13,0,null,null,14,"div",[["class","l-group l-group__item l-group__item--right"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](15,0,null,null,5,"div",[["class","l-group__item"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](17,0,null,null,2,"ip-button",[["htmlType","button"],["size","small"]],[[2,"u-pointer-none",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleBack(n,!1)&&l),l},A.b,A.a)),l["ɵdid"](18,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],{htmlType:[0,"htmlType"],size:[1,"size"]},null),(e()(),l["ɵted"](-1,0,[" Back "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](22,0,null,null,4,"div",[["class","l-group__item"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](24,0,null,null,1,"a",[["class","c-button c-button--small c-button--action c-button--regular"]],[[8,"href",4]],null,null,null,null)),(e()(),l["ɵted"](-1,null,["LOGIN"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,18,0,"button","small")},function(e,t){var n=t.component;e(t,17,0,l["ɵnov"](t,18).disabled),e(t,24,0,n.redirectLink)})}function Wl(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{emailInput:0}),l["ɵqud"](671088640,2,{firstNameInput:0}),l["ɵqud"](671088640,3,{submit:0}),l["ɵqud"](671088640,4,{form:0}),(e()(),l["ɵeld"](4,0,null,null,7,"div",[["class","l-space-ver-tertiary l-space-hor-quaternary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,zl)),l["ɵdid"](7,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,ql)),l["ɵdid"](10,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,7,0,!n.teamMember),e(t,10,0,n.teamMember)},null)}var Kl=function(){function e(e,t,n,o,i,r,s,u){this.store=e,this.socketIOService=t,this.currentUserService=n,this.cacheService=o,this.accessService=i,this.usersOnlineService=r,this.introductionActions=s,this.hotspotsActions=u,this.isProcessingIntroduction=!1,this.emailConfirmed=new Map,this.sourceFunctionMap={addComment:this.addCommentIntroduction,createHotspot:this.createHotspotIntroduction,resolveHotspot:this.resolveHotspotIntroduction},this.hotspotCreated=new l.EventEmitter,this.hotspotResolved=new l.EventEmitter,this.commentAdded=new l.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.store.select(function(e){return e.introduction}).subscribe(function(t){e.introductionState=t,t.isVisible&&(e.handleIntroduction=e.sourceFunctionMap[t.source].bind(e)())})},e.prototype.ngOnDestroy=function(){this.store.dispatch(this.introductionActions.cancelIntroduction())},e.prototype.createHotspotIntroduction=function(){var e=this,t=Object.assign({},this.hotspot,{visibility:this.hotspot.visibility,commentText:this.introductionState.args.text});return this.createIntroduction("createHotspot",t,function(t){e.currentUserService.user=t,e.usersOnlineService.setCurrentUserId(t.id),e.store.dispatch(e.introductionActions.cancelIntroduction()),e.hotspotCreated.emit()})},e.prototype.addCommentIntroduction=function(){var e=this;return this.createIntroduction("addComment",{hotspotId:this.hotspot.id,text:this.introductionState.args.text},function(t){e.currentUserService.user=t,e.usersOnlineService.setCurrentUserId(t.id),e.store.dispatch(e.introductionActions.cancelIntroduction()),e.commentAdded.emit()})},e.prototype.resolveHotspotIntroduction=function(){var e=this;return this.createIntroduction("resolveHotspot",{hotspotId:this.hotspot.id,resolved:!this.introductionState.args.resolved},function(t){e.currentUserService.user=t,e.usersOnlineService.setCurrentUserId(t.id),e.store.dispatch(e.introductionActions.cancelIntroduction()),e.hotspotResolved.emit()})},e.prototype.createIntroduction=function(e,t,n){var l=this;return function(e){var o=l.introductionState,i=o.step,r=o.source,s=l.readUserData(e.values,i);l.reset(s.email,i),1===i&&(l.isProcessingIntroduction=!0),l.introduceResponseSubscription$=l.socketIOService.introduce(s,r,t,l.emailConfirmed.get(s.email)).subscribe(function(e){l.isProcessingIntroduction=!1,e.user&&(0===i&&l.handleInitialState(e.user),1===i&&n(e.user)),l.emailConfirmed.set(s.email,!0)}),l.introductionForm.handleNextStep()}},e.prototype.handleInitialState=function(e){this.accessService.isTeamMember(e)?(this.introductionForm.teamMember=!0,this.cacheService.setItem("comment",JSON.stringify({comment:this.introductionState.args.text,hotspot:this.hotspot}),36e5)):this.introductionForm.setReturningGuest(e.firstName,e.lastName)},e.prototype.readUserData=function(e,t){var n=e.email;return 1===t?{email:n,firstName:e.firstName,lastName:e.lastName}:{email:n}},e.prototype.reset=function(e,t){this.introduceResponseSubscription$&&this.introduceResponseSubscription$.unsubscribe(),0===t&&this.emailConfirmed.set(e,!1)},e.prototype.handleIntroductionBack=function(){this.store.dispatch(this.introductionActions.prevStep())},e.prototype.handleIntroductionNext=function(){this.store.dispatch(this.introductionActions.nextStep())},e.prototype.handleIntroductionCancel=function(){this.store.dispatch(this.introductionActions.cancelIntroduction())},e}(),Yl=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Xl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,2,"introduction-form",[],null,[[null,"back"],[null,"next"],[null,"cancel"],[null,"submitHandler"],["document","keydown"]],function(e,t,n){var o=!0,i=e.component;return"document:keydown"===t&&(o=!1!==l["ɵnov"](e,3).handleEnter(n)&&o),"back"===t&&(o=!1!==i.handleIntroductionBack()&&o),"next"===t&&(o=!1!==i.handleIntroductionNext()&&o),"cancel"===t&&(o=!1!==i.handleIntroductionCancel()&&o),"submitHandler"===t&&(o=!1!==i.handleIntroduction(n)&&o),o},Wl,Ll)),l["ɵdid"](3,770048,[[1,4],["introductionForm",4]],0,Vl,[G.FormBuilder,ee,l.Renderer],{variation:[0,"variation"],displayMode:[1,"displayMode"],popupId:[2,"popupId"],isProcessing:[3,"isProcessing"],currentStep:[4,"currentStep"]},{back:"back",next:"next",cancel:"cancel",submitHandler:"submitHandler"}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,3,0,n.hotspot.variation,n.hotspot.displayMode,n.hotspot.popupId,n.isProcessingIntroduction,n.introductionState.step)},null)}function Jl(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{introductionForm:0}),(e()(),l["ɵand"](16777216,null,null,1,null,Xl)),l["ɵdid"](2,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,2,0,n.introductionState.isVisible&&n.introductionState.hotspotId===n.hotspot.id)},null)}var Zl=function(){function e(){this.displayNamePipe=new D}return e.prototype.transform=function(e){var t=this,n="";if(!e||!e.length)return n;var l=function(e,t){return void 0===t&&(t=""),'<span class="'+t+'">'+e+"</span>"};if(e.length>2)n="several users are typing...";else{var o=[],i=e.length>1?"are":"is";e.forEach(function(e){o.push(l(t.displayNamePipe.transform(e,!0),"t-typings__items"))}),n=o.join(l(",&nbsp;","t-typings__tag"))+l("&nbsp;","t-typings__tag")+l(i+" typing...","t-typings__tag")}return n},e}(),Ql=l["ɵcrt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"reveal",definitions:[{type:1,expr:"* => fromTopLeft",animation:[{type:4,styles:{type:5,steps:[{type:6,styles:{transformOrigin:"0 0",transform:"scale(0)",borderRadius:"60%",borderTopLeftRadius:"0",offset:0},offset:null},{type:6,styles:{transform:"scale(1)",borderRadius:"0",offset:1},offset:null}]},timings:200}],options:null},{type:1,expr:"* => fromTopRight",animation:[{type:4,styles:{type:5,steps:[{type:6,styles:{transformOrigin:"100% 0",transform:"scale(0)",borderRadius:"60%",borderTopRightRadius:"0",offset:0},offset:null},{type:6,styles:{transform:"scale(1)",borderRadius:"0",offset:1},offset:null}]},timings:200}],options:null},{type:1,expr:"* => fromBottomLeft",animation:[{type:4,styles:{type:5,steps:[{type:6,styles:{transformOrigin:"0 100%",transform:"scale(0)",borderRadius:"60%",borderBottomLeftRadius:"0",offset:0},offset:null},{type:6,styles:{transform:"scale(1)",borderRadius:"0",offset:1},offset:null}]},timings:200}],options:null},{type:1,expr:"* => fromBottomRight",animation:[{type:4,styles:{type:5,steps:[{type:6,styles:{transformOrigin:"100% 100%",transform:"scale(0)",borderRadius:"60%",borderBottomRightRadius:"0",offset:0},offset:null},{type:6,styles:{transform:"scale(1)",borderRadius:"0",offset:1},offset:null}]},timings:200}],options:null},{type:1,expr:"fromTopLeft => void",animation:[{type:4,styles:{type:5,steps:[{type:6,styles:{transform:"scale(1)",transformOrigin:"0 0",offset:0},offset:null},{type:6,styles:{transform:"scale(0)",borderRadius:"60%",borderTopLeftRadius:"0",offset:1},offset:null}]},timings:200}],options:null},{type:1,expr:"fromTopRight => void",animation:[{type:4,styles:{type:5,steps:[{type:6,styles:{transform:"scale(1)",transformOrigin:"100% 0",offset:0},offset:null},{type:6,styles:{transform:"scale(0)",borderRadius:"60%",borderTopRightRadius:"0",offset:1},offset:null}]},timings:200}],options:null},{type:1,expr:"fromBottomLeft => void",animation:[{type:4,styles:{type:5,steps:[{type:6,styles:{transform:"scale(1)",transformOrigin:"0 100%",offset:0},offset:null},{type:6,styles:{transform:"scale(0)",borderRadius:"60%",borderBottomLeftRadius:"0",offset:1},offset:null}]},timings:200}],options:null},{type:1,expr:"fromBottomRight => void",animation:[{type:4,styles:{type:5,steps:[{type:6,styles:{transform:"scale(1)",transformOrigin:"100% 100%",offset:0},offset:null},{type:6,styles:{transform:"scale(0)",borderRadius:"60%",borderBottomRightRadius:"0",offset:1},offset:null}]},timings:200}],options:null}],options:{}},{type:7,name:"fadeInOut",definitions:[{type:1,expr:"void => in",animation:[{type:6,styles:{opacity:"0",offset:0},offset:null},{type:4,styles:{type:6,styles:{opacity:"1",offset:1},offset:null},timings:"0.3s 250ms"}],options:null}],options:{}}]}});function eo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,28,"ip-dropdown",[],null,[[null,"change"]],function(e,t,n){var l=!0;return"change"===t&&(l=!1!==e.component.onVisibilityChange(n.value)&&l),l},m.b,m.a)),l["ɵprd"](512,null,p.IpDropdownService,p.IpDropdownService,[]),l["ɵdid"](2,1294336,[[2,4],["visibility",4]],4,h.IpDropdownComponent,[v.DOCUMENT,l.ElementRef,p.IpDropdownService],{disabled:[0,"disabled"],value:[1,"value"]},{change:"change"}),l["ɵqud"](335544320,6,{customScrollContainer:0}),l["ɵqud"](335544320,7,{scrollSercheableContainer:0}),l["ɵqud"](335544320,8,{scrollSercheableHeader:0}),l["ɵqud"](603979776,9,{contentGroups:1}),(e()(),l["ɵted"](-1,1,[" "])),(e()(),l["ɵeld"](8,0,null,0,7,"button",[["class","c-button c-button--simple"],["ip-dropdown-trigger",""]],[[2,"is-disabled",null]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](10,0,null,null,1,"span",[["class","c-button__text u-text--less-important"]],null,null,null,null,null)),(e()(),l["ɵted"](11,null,["Visible to ",""])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](13,0,null,null,1,"i",[["class","material-icons c-button__icon u-text--less-important"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["arrow_drop_down"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,1,[" "])),(e()(),l["ɵeld"](17,0,null,2,10,"ip-dropdown-group",[],null,null,null,g.b,g.a)),l["ɵdid"](18,49152,[[9,4]],0,y.IpDropdownGroupComponent,[],null,null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](20,0,null,0,2,"ip-dropdown-item",[["class","u-text--less-important"],["value","1"]],null,null,null,c.b,c.a)),l["ɵdid"](21,4243456,null,0,d.IpDropdownItemComponent,[p.IpDropdownService,l.ElementRef,h.IpDropdownComponent],{disabled:[0,"disabled"],value:[1,"value"]},null),(e()(),l["ɵted"](-1,0,["Visible to Team"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](24,0,null,0,2,"ip-dropdown-item",[["class","u-text--less-important"],["value","0"]],null,null,null,c.b,c.a)),l["ɵdid"](25,4243456,null,0,d.IpDropdownItemComponent,[p.IpDropdownService,l.ElementRef,h.IpDropdownComponent],{disabled:[0,"disabled"],value:[1,"value"]},null),(e()(),l["ɵted"](-1,0,["Visible to Everyone"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,1,[" "]))],function(e,t){var n=t.component;e(t,2,0,!n.canSeeVisibilityDropdown,n.hotspot.visibility),e(t,21,0,!n.canChangeTeamVisibility,"1"),e(t,25,0,!n.canChangeEveryoneVisibility,"0")},function(e,t){var n=t.component;e(t,8,0,!n.canSeeVisibilityDropdown),e(t,11,0,n.hotspot.visibility?"Team":"Everyone")})}function to(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["class","u-text--small u-text--less-important"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" Visible to Everyone "]))],null,null)}function no(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,9,"label",[["class","c-mark"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,0,"input",[["class","c-mark__input"],["type","checkbox"]],[[8,"checked",0]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.onResolveClick(n)&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,1,"span",[["class","c-mark__label u-text--small u-text--less-important"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Resolve"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](7,0,null,null,1,"i",[["class","c-mark__icon c-mark__icon--checkbox material-icons"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["check"])),(e()(),l["ɵted"](-1,null,[" "]))],null,function(e,t){e(t,2,0,t.component.resolved)})}function lo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"comment",[],null,[[null,"editModeHandler"],[null,"preventScroll"],[null,"editHandler"],[null,"removeHandler"]],function(e,t,n){var l=!0,o=e.component;return"editModeHandler"===t&&(l=!1!==o.onEditMode(n)&&l),"preventScroll"===t&&(l=!1!==o.onPreventScroll(n)&&l),"editHandler"===t&&(l=!1!==o.onEdit(n)&&l),"removeHandler"===t&&(l=!1!==o.onRemove(n)&&l),l},Dl,Cl)),l["ɵdid"](1,6537216,null,0,Sl,[re,ut,oe,yl,l.ElementRef,Z,zt],{resolved:[0,"resolved"],comment:[1,"comment"],mentionsUsers:[2,"mentionsUsers"],hotspotViewedAt:[3,"hotspotViewedAt"],last:[4,"last"]},{removeHandler:"removeHandler",editHandler:"editHandler",editModeHandler:"editModeHandler",preventScroll:"preventScroll"}),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,1,0,n.resolved,t.context.$implicit,n.mentionsUsers,n.hotspot.viewedAt,!t.context.first&&t.context.last)},null)}function oo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,[[4,0],["commentsContainer",1]],null,5,"ul",[["class","t-comments t-conversation__content"],["tabindex","0"]],null,[[null,"scroll"]],function(e,t,n){var l=!0;return"scroll"===t&&(l=!1!==e.component.onScroll(n)&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,2,null,lo)),l["ɵdid"](3,802816,null,0,f.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),l["ɵpid"](131072,f.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n,o=t.component;e(t,3,0,null==(n=l["ɵunv"](t,3,0,l["ɵnov"](t,4).transform(o.comments$)))?null:n.currentEntries)},null)}function io(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,43,"footer",[["class","t-conversation__footer l-space-top-tertiary l-space-bottom-quaternary l-space-hor-quaternary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,11,"ip-form-text-field",[["label","Write a comment or @mention..."]],null,null,null,F.b,F.a)),l["ɵdid"](3,1294336,null,1,j.IpTextFieldComponent,[],{label:[0,"label"]},null),l["ɵqud"](335544320,10,{formTextInput:0}),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵeld"](6,16777216,null,0,6,"ip-form-textarea-autosize",[["ip-notification",""],["maxRows","3"],["minRows","1"],["rows","1"]],null,[[null,"keydown"],[null,"keyup"],[null,"focus"],[null,"blur"]],function(e,t,n){var o=!0,i=e.component;return"keydown"===t&&(o=!1!==l["ɵnov"](e,9).onKeyDown(n)&&o),"keyup"===t&&(o=!1!==l["ɵnov"](e,10).handleKeyUp(n)&&o),"focus"===t&&(o=!1!==l["ɵnov"](e,10).handleHostFocus(n)&&o),"blur"===t&&(o=!1!==l["ɵnov"](e,10).handeHostBlur()&&o),"keydown"===t&&(o=!1!==i.handleKeyDown(n)&&o),"keyup"===t&&(o=!1!==i.handleKeyUp(n)&&o),o},ll.b,ll.a)),l["ɵprd"](5120,null,G.NG_VALUE_ACCESSOR,function(e){return[e]},[ol.IpTextareaAutosizeComponent]),l["ɵdid"](8,4308992,[[1,4],["textarea",4]],0,ol.IpTextareaAutosizeComponent,[[2,j.IpTextFieldComponent]],{rows:[0,"rows"],minRows:[1,"minRows"],maxRows:[2,"maxRows"],value:[3,"value"]},{keydown:"keydown",keyup:"keyup",focus:"focus",blur:"blur"}),l["ɵdid"](9,212992,null,0,hl,[l.ElementRef,l.ApplicationRef,vt,l.Injector,mt,v.DOCUMENT],{data:[0,"data"]},null),l["ɵdid"](10,212992,null,0,Pl,[l.ElementRef,l.ComponentFactoryResolver,l.Injector,l.ViewContainerRef,l.ApplicationRef,mt,vt,ut,v.DOCUMENT],{notificationType:[0,"notificationType"]},null),l["ɵprd"](2048,[[10,4]],q.IpFormTextInputElement,null,[ol.IpTextareaAutosizeComponent]),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](15,0,null,null,27,"div",[["class","l-group l-group--block l-group--ver-center u-relative"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](17,0,null,null,6,"div",[["class","l-group__item l-group__item--grow u-text--x-small u-text--less-important"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](19,0,null,null,3,"div",[["class","t-typings"]],[[8,"innerHTML",1]],null,null,null,null)),l["ɵpid"](131072,f.AsyncPipe,[l.ChangeDetectorRef]),l["ɵppd"](21,1),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](25,0,null,null,7,"div",[["class","l-group__item l-group__item--no-shrink"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](27,0,null,null,4,"button",[["class","c-btn c-btn--regular-tertiary c-btn--regular-tertiary-action c-btn--regular-tertiary-small"]],null,[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleCancel(n)&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](29,0,null,null,1,"span",[["class","c-btn__content"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Cancel"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](34,0,null,null,7,"div",[["class","l-group__item l-group__item--no-shrink"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](36,0,null,null,4,"button",[["class","c-btn c-btn--regular-secondary c-btn--regular-secondary-action c-btn--regular-secondary-small"]],[[8,"disabled",0],[2,"is-disabled",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleCommentClick(n)&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](38,0,null,null,1,"span",[["class","c-btn__content"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Comment"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,3,0,"Write a comment or @mention..."),e(t,8,0,"1","1","3",n.commentText),e(t,9,0,n.mentionsUsers),e(t,10,0,n.hotspot.visibility)},function(e,t){var n=t.component;e(t,19,0,l["ɵunv"](t,19,0,e(t,21,0,l["ɵnov"](t.parent.parent,0),l["ɵunv"](t,19,0,l["ɵnov"](t,20).transform(n.typingUsers$))))),e(t,36,0,n.commentButtonDisabled||!n.conversationService.canSend$.getValue(),n.commentButtonDisabled||!n.conversationService.canSend$.getValue())})}function ro(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,12,"footer",[["class","t-conversation__footer"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,9,"div",[["class","l-group l-group--block l-group--ver-center l-space-left-quinary l-space-right-quaternary l-space-top-quaternary l-space-bottom-quinary u-text--small u-text--less-important"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,2,"div",[["class","l-group__item l-group__item--no-shrink"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,1,"i",[["class","material-icons u-block u-icon--large"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["check"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](8,0,null,null,2,"div",[["class","l-group__item l-group__item--grow l-space-left-secondary"]],null,null,null,null,null)),(e()(),l["ɵted"](9,null,[""," resolved this conversation"])),l["ɵppd"](10,1),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],null,function(e,t){var n=t.component;e(t,9,0,l["ɵunv"](t,9,0,e(t,10,0,l["ɵnov"](t.parent.parent,1),n.hotspot.resolvedBy)))})}function so(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,[[3,0],["wrapper",1]],null,36,"div",[],[[24,"@reveal",0]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.onClick(n)&&l),l},null,null)),l["ɵdid"](1,278528,null,0,f.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer],{ngClass:[0,"ngClass"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](3,0,null,null,28,"div",[["class","t-conversation"]],[[8,"hidden",0],[24,"@fadeInOut",0]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](5,0,null,null,16,"header",[["class","t-conversation__header l-group l-group--block l-group--ver-center l-group--hor-space-between l-space-ver-tertiary l-space-hor-quaternary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](7,0,null,null,7,"div",[["class","l-group__item"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,eo)),l["ɵdid"](10,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,to)),l["ɵdid"](13,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](16,0,null,null,4,"div",[["class","l-group__item"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,no)),l["ɵdid"](19,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,oo)),l["ɵdid"](24,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,io)),l["ɵdid"](27,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,ro)),l["ɵdid"](30,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](33,0,null,null,2,"introduction-container",[],null,[[null,"commentAdded"],[null,"hotspotCreated"],[null,"hotspotResolved"]],function(e,t,n){var l=!0,o=e.component;return"commentAdded"===t&&(l=!1!==o.afterAddCommentIntroduction()&&l),"hotspotCreated"===t&&(l=!1!==o.afterCreateHotspotIntroduction()&&l),"hotspotResolved"===t&&(l=!1!==o.afterResolveHotspotIntroduction()&&l),l},Jl,Yl)),l["ɵdid"](34,245760,null,0,Kl,[W.m,ct,oe,pt,re,at,_e,be],{hotspot:[0,"hotspot"]},{hotspotCreated:"hotspotCreated",hotspotResolved:"hotspotResolved",commentAdded:"commentAdded"}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,1,0,n.cssClass),e(t,10,0,n.canChangeEveryoneVisibility&&n.canChangeTeamVisibility),e(t,13,0,!(n.canChangeEveryoneVisibility&&n.canChangeTeamVisibility||n.accessService.isAnonymous(n.hotspot.author))),e(t,19,0,n.hotspot.persistant),e(t,24,0,n.hotspot.persistant),e(t,27,0,!n.resolved),e(t,30,0,n.resolved),e(t,34,0,n.hotspot)},function(e,t){var n=t.component;e(t,0,0,n.revealAnimationState),e(t,3,0,n.introductionState.isVisible&&n.introductionState.hotspotId===n.hotspot.id||n.invisible,n.fadeInOutAnimationState)})}function uo(e){return l["ɵvid"](0,[l["ɵpid"](0,Zl,[]),l["ɵpid"](0,D,[]),l["ɵqud"](671088640,1,{textarea:0}),l["ɵqud"](671088640,2,{visibility:0}),l["ɵqud"](671088640,3,{wrapperRef:0}),l["ɵqud"](671088640,4,{commentsContainerRef:0}),l["ɵqud"](402653184,5,{introductionContainer:0}),(e()(),l["ɵand"](16777216,null,null,1,null,so)),l["ɵdid"](8,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,8,0,t.component.opened)},null)}var ao=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function co(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"i",[["class","c-button__icon material-icons"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["person"]))],null,null)}function po(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"i",[["class","c-button__text"],["style","pointer-events:none"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["+"]))],null,null)}function ho(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"i",[["class","c-button__icon material-icons"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["check"]))],null,null)}function mo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"span",[["class","c-button__text"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),l["ɵted"](3,null,["",""])),(e()(),l["ɵted"](-1,null,[" "]))],null,function(e,t){e(t,3,0,t.component.data.number)})}function fo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","c-badge c-badge--action c-badge--for-button t-hotspot-badge"]],null,null,null,null,null))],null,null)}function vo(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{draggable:0}),l["ɵqud"](402653184,2,{conversationContainer:0}),(e()(),l["ɵeld"](2,0,null,null,31,"div",[["draggableHandleCssClass","t-hotspot-dot"]],[[2,"t-hotspot",null],[2,"resolved",null],[2,"opened",null],[2,"loading",null],[4,"left","px"],[4,"top","px"]],[[null,"click"],[null,"onDragEnd"],[null,"mousedown"]],function(e,t,n){var o=!0,i=e.component;return"mousedown"===t&&(o=!1!==l["ɵnov"](e,3).onMousedown(n)&&o),"click"===t&&(o=!1!==i.onClick(n)&&o),"onDragEnd"===t&&(o=!1!==i.onDragEnd(n)&&o),o},null,null)),l["ɵdid"](3,212992,[[1,4]],0,nl,[l.ElementRef,l.Renderer,v.DOCUMENT],{enabled:[0,"enabled"],containment:[1,"containment"],scrollSelector:[2,"scrollSelector"],draggableHandleCssClass:[3,"draggableHandleCssClass"],elementSize:[4,"elementSize"]},{onDragEnd:"onDragEnd"}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](5,0,null,null,23,"div",[],null,null,null,null,null)),l["ɵdid"](6,278528,null,0,f.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer],{ngClass:[0,"ngClass"]},null),l["ɵpod"](7,{"t-hotspot-dot-holder":0,loading:1,resolved:2}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](9,0,null,null,15,"button",[["class","c-button c-button--floating c-button--danger t-hotspot-dot"]],[[2,"u-cursor--move",null]],null,null,null,null)),l["ɵdid"](10,278528,null,0,f.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](11,{"is-resolved":0,"is-resolved--success":1}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,co)),l["ɵdid"](14,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,po)),l["ɵdid"](17,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,ho)),l["ɵdid"](20,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,mo)),l["ɵdid"](23,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,fo)),l["ɵdid"](27,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](30,0,null,null,2,"conversation",[],null,[[null,"resolve"],[null,"changeVisibility"],[null,"add"],[null,"introduction"]],function(e,t,n){var l=!0,o=e.component;return"resolve"===t&&(l=!1!==o.onResolve(n)&&l),"changeVisibility"===t&&(l=!1!==o.onVisibilityChange(n)&&l),"add"===t&&(l=!1!==o.onAdd(n)&&l),"introduction"===t&&(l=!1!==o.handleIntroduction(n)&&l),l},uo,Ql)),l["ɵdid"](31,6471680,[[2,4],["conversation",4]],0,yl,[W.m,re,Ce,_e,be,ue,ct,oe,ut,vt,v.DOCUMENT,l.Renderer,Ie,pt,Ge,Z,l.ChangeDetectorRef],{hotspot:[0,"hotspot"],resolved:[1,"resolved"],opened:[2,"opened"]},{add:"add",resolve:"resolve",changeVisibility:"changeVisibility",introduction:"introduction"}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,3,0,!n.data.persistant,n.draggableContainment,n.draggableScrollSelector,"t-hotspot-dot",n.elementSize),e(t,6,0,e(t,7,0,!0,n.loading,n.resolved)),e(t,10,0,"c-button c-button--floating c-button--danger t-hotspot-dot",e(t,11,0,n.resolved&&!n.opened&&!n.hasUnreadComments,n.resolved&&!n.hasUnreadComments)),e(t,14,0,n.introductionVisible),e(t,17,0,!n.introductionVisible&&!n.data.persistant),e(t,20,0,!n.introductionVisible&&n.resolved),e(t,23,0,!n.introductionVisible&&n.data.number&&!n.resolved),e(t,27,0,n.hasUnreadComments),e(t,31,0,n.data,n.resolved,n.opened)},function(e,t){var n=t.component;e(t,2,0,!0,n.resolved,n.opened,n.loading,n.data.x+n.positionShift+n.commentableShift,n.top),e(t,9,0,n.draggable&&n.draggable.enabled)})}var go=function(){function e(){this.tooltipDisplay="none"}return e.prototype.setTooltipPosition=function(e,t){this.tooltipX=e,this.tooltipY=t},e.prototype.setTooltipClasses=function(e){this.tooltipClasses=e},e.prototype.showTooltip=function(e){this.tooltipDisplay=e?"inline-block":"none"},e}(),yo=function(){function e(e,t,n,l){this.element=e,this.componentResolver=t,this.viewContainerRef=n,this.window=l,this.isMouseDown=!1}return e.prototype.ngOnInit=function(){this.createTooltipComponent()},e.prototype.onMouseMove=function(e){var t=e.clientX,n=e.clientY,l=e.offsetX,o=e.offsetY;e.currentTarget!==e.target||this.isMouseDown?this.tooltipComponent.showTooltip(!1):(this.positionTooltip(t,n,l,o),this.tooltipComponent.showTooltip(!0))},e.prototype.onMouseEnter=function(){this.tooltipComponent.showTooltip(!0)},e.prototype.onMouseLeave=function(){this.tooltipComponent.showTooltip(!1)},e.prototype.onMouseClick=function(){this.isCovered||this.tooltipComponent.showTooltip(!1)},e.prototype.onMouseDown=function(){this.isMouseDown=!0},e.prototype.onMouseUp=function(){this.isMouseDown=!1},e.prototype.positionTooltip=function(e,t,n,l){var o=window.innerWidth,i=this.tooltipComponent,r=e-88,s=t-13,u=new Set(["c-tooltip"]);e<90?(r=e+24,u.add("c-tooltip--right")):e>o-90?(r=e-196,u.add("c-tooltip--left")):t<92?(s=t+25,u.add("c-tooltip--bottom")):(s=t-50,u.add("c-tooltip--top")),i.setTooltipClasses(u),i.setTooltipPosition(r,s)},e.prototype.createTooltipComponent=function(){var e=this.componentResolver.resolveComponentFactory(go),t=this.viewContainerRef.createComponent(e);this.tooltipComponent=t.instance},e}(),bo=function(){function e(e,t,n,l,o,i,r,s){this.store=e,this.hotspotsActions=t,this.commentsActions=n,this.pageService=l,this.currentUserService=o,this.window=i,this.multiActionsDispatcher=r,this.sanitizer=s,this.heightOverflow=0,this.pendingEntry=null,this.hotspotCommentableShift=0,this.entries=null,this.openedHotspotId=null}return e.prototype.handleKeyDown=function(e){if(Et("Escape",e)){var t=function(e){var t;return e.take(1).subscribe(function(e){return t=e}),t}(this.store);t.comments.currentHotspotId?this.multiActionsDispatcher.deactivateHotspot(t.comments.currentHotspotId):t.hotspots.pendingEntry&&(this.store.dispatch(this.hotspotsActions.cleanupUnsaved()),this.heightOverflow=0)}},Object.defineProperty(e.prototype,"hotspotsOverlayMargins",{get:function(){return e.HOTSPOTS_OVERLAY_MARGINS},enumerable:!0,configurable:!0}),e.prototype.click=function(e){var t=this,n=e.target.classList;if(n.contains("t-hotspots")||n.contains("c-iframe-overlay")){if(this.pendingEntry)return this.store.dispatch(this.hotspotsActions.cleanupUnsaved()),this.heightOverflow=0,!1;if(this.openedHotspotId)return this.store.dispatch(this.hotspotsActions.deactivate(this.openedHotspotId)),this.store.dispatch(this.commentsActions.deactivateHotspot(this.openedHotspotId)),!1;var l=this.getProperXCoord(e.clientX);if(!function(e,t,n){return t===ie.displayModes.MOBILE?e>=0&&e<=400:e>=le/2-n/2&&e<=le/2+n/2}(l,this.uiState.displayMode,this.minWidth))return!1;var o=this.currentUserService.user;this.subscription$=this.pageService.getCurrentVariationPageBlockByY(e.offsetY).subscribe(function(n){t.store.dispatch(t.hotspotsActions.add({author:o,x:l,y:t.getProperYCoord(e.offsetY,n.begin),section:n.id,visibility:ie.roles.isTeamMember(o.role)?ie.visibilities.TEAM:ie.visibilities.ALL,displayMode:t.uiState.displayMode,variation:t.uiState.variation,popupId:t.uiState.openedPopup?t.uiState.openedPopup.id:null,persistant:!1}))},function(e){return console.log(e)})}},e.prototype.onCommentAdd=function(e){this.store.dispatch(this.commentsActions.add(e.hotspot.id,e.comment,e.options))},e.prototype.onHotspotSave=function(e,t,n){this.store.dispatch(this.hotspotsActions.save(e.hotspot,e.comment,e.options)),this.heightOverflow=0},e.prototype.onHotspotClick=function(e){e.persistant?e.opened?this.multiActionsDispatcher.deactivateHotspot(e.id):this.multiActionsDispatcher.activateHotspot(e.id):(this.store.dispatch(this.hotspotsActions.cleanupUnsaved()),this.heightOverflow=0)},e.prototype.onHotspotEdit=function(e){var t=this;"coords"===e.mode&&(this.subscription$=this.pageService.getCurrentVariationPageBlockByY(e.data.y).subscribe(function(n){t.store.dispatch(e.hotspot.persistant&&e.index?t.hotspotsActions.editByIndex(e.index,{x:e.data.x,y:t.getProperYCoord(e.data.y,n.begin),section:n.id}):t.hotspotsActions.editPendingEntry({x:e.data.x,y:t.getProperYCoord(e.data.y,n.begin),section:n.id}))},function(e){return console.log(e)}),this.heightOverflow=this.calculateOverflowHeight(e))},e.prototype.getProperXCoord=function(e){var t=this.overlayElementRef.nativeElement.offsetWidth,n=this.uiState.displayMode===ie.displayModes.MOBILE?200:480;return e-(t/2-(t/2<n?t/2:n))-this.overlayElementRef.nativeElement.getBoundingClientRect().left},e.prototype.getProperYCoord=function(e,t){var n=this.uiState.openedPopup;return e-(n?Math.round(n.top+n.height/2):t)},e.prototype.ngOnInit=function(){var e=this;this.uiSubscription$=xe(this.store).subscribe(function(t){e.heightOverflow=0,e.uiState=t}),this.commentsSubscription$=Ve(this.store).subscribe(function(t){e.openedHotspotId=t.currentHotspotId}),this.initHotspotsObservable()},e.prototype.ngOnDestroy=function(){this.subscription$&&this.subscription$.unsubscribe(),this.uiSubscription$&&this.uiSubscription$.unsubscribe(),this.hotspotsSubscription$&&this.hotspotsSubscription$.unsubscribe(),this.commentsSubscription$&&this.commentsSubscription$.unsubscribe()},e.prototype.ngAfterViewChecked=function(){!this.uiState||this.uiState.loading||this.draggableContainment||this.initDraggableContainment()},e.prototype.initDraggableContainment=function(){this.hotspotsContainerRef&&(this.draggableContainment=[-15,-15,this.hotspotsContainerRef.nativeElement.clientWidth+-15,this.hotspotsContainerRef.nativeElement.clientHeight+-15])},e.prototype.hotspotsTrackBy=function(e,t){return t?t.opened?t.id:t:null},e.prototype.initHotspotsObservable=function(){var e=this;this.hotspotsSubscription$=Ne(this.store).flatMap(function(t){return e.pageService.getCurrentVariationPageBlocksYsAsMap().map(function(n){var l,o=e.uiState.openedPopup;return o&&(l=Math.round(o.top+o.height/2)),t.entries.length&&(t.entries=t.entries.filter(function(e){return n.has(e.section)||null!==o}).map(function(e){return e.sectionY=o?l:n.get(e.section).begin,e})),t.pendingEntry&&(t.pendingEntry.sectionY=o?l:n.get(t.pendingEntry.section).begin),t})}).subscribe(function(t){e.pendingEntry=t.pendingEntry,e.entries=t.entries,e.hotspotCommentableShift=e.minWidth/2-(e.uiState.displayMode===ie.displayModes.MOBILE?400:le)/2})},e.prototype.calculateHotspotsContainerHeight=function(){return this.sanitizer.bypassSecurityTrustStyle("calc(100% - "+(this.heightOverflow+this.hotspotsOverlayMargins)+"px)")},e.prototype.calculateOverflowHeight=function(e){var t=e.data.y+e.conversation.height-this.height;return"Top"===e.conversation.fromY&&t>0?t:0},e}();bo.HOTSPOTS_OVERLAY_MARGINS=30;var Eo=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function So(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"hotspot",[],null,[[null,"saveHandler"],[null,"clickHandler"]],function(e,t,n){var l=!0,o=e.component;return"saveHandler"===t&&(l=!1!==o.onCommentAdd(n)&&l),"clickHandler"===t&&(l=!1!==o.onHotspotClick(n)&&l),l},vo,ao)),l["ɵdid"](1,770048,null,0,tl,[W.m,l.ElementRef,be,Ce,oe],{index:[0,"index"],data:[1,"data"],commentableShift:[2,"commentableShift"],opened:[3,"opened"]},{saveHandler:"saveHandler",clickHandler:"clickHandler"}),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,1,0,t.context.index,t.context.$implicit,t.component.hotspotCommentableShift,t.context.$implicit.opened)},null)}function Co(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"hotspot",[],null,[[null,"saveHandler"],[null,"clickHandler"],[null,"editHandler"]],function(e,t,n){var l=!0,o=e.component;return"saveHandler"===t&&(l=!1!==o.onHotspotSave(n)&&l),"clickHandler"===t&&(l=!1!==o.onHotspotClick(n)&&l),"editHandler"===t&&(l=!1!==o.onHotspotEdit(n)&&l),l},vo,ao)),l["ɵdid"](1,770048,null,0,tl,[W.m,l.ElementRef,be,Ce,oe],{data:[0,"data"],draggableContainment:[1,"draggableContainment"],draggableScrollSelector:[2,"draggableScrollSelector"],commentableShift:[3,"commentableShift"],opened:[4,"opened"]},{saveHandler:"saveHandler",clickHandler:"clickHandler",editHandler:"editHandler"}),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,1,0,n.pendingEntry,n.draggableContainment,".c-iframe-holder",n.hotspotCommentableShift,!0)},null)}function Ao(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,[[1,0],["overlayElement",1]],null,14,"div",[["class","c-iframe-overlay"]],[[4,"height","px"],[4,"min-width","px"],[4,"overflow",null]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,11,"div",[["class","t-hotspots-overlay"]],[[4,"min-width","px"],[4,"height",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.click(n)&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,16777216,[[2,0],["hotspotsContainer",1]],null,8,"div",[["class","t-hotspots"],["cursor-tooltip",""]],[[4,"min-width","px"]],[[null,"mousemove"],[null,"mouseenter"],[null,"mouseleave"],[null,"click"],[null,"mousedown"],[null,"mouseup"]],function(e,t,n){var o=!0;return"mousemove"===t&&(o=!1!==l["ɵnov"](e,5).onMouseMove(n)&&o),"mouseenter"===t&&(o=!1!==l["ɵnov"](e,5).onMouseEnter()&&o),"mouseleave"===t&&(o=!1!==l["ɵnov"](e,5).onMouseLeave()&&o),"click"===t&&(o=!1!==l["ɵnov"](e,5).onMouseClick()&&o),"mousedown"===t&&(o=!1!==l["ɵnov"](e,5).onMouseDown()&&o),"mouseup"===t&&(o=!1!==l["ɵnov"](e,5).onMouseUp()&&o),o},null,null)),l["ɵdid"](5,81920,null,0,yo,[l.ElementRef,l.ComponentFactoryResolver,l.ViewContainerRef,Z],{isCovered:[0,"isCovered"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,So)),l["ɵdid"](8,802816,null,0,f.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Co)),l["ɵdid"](11,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,5,0,null!==n.pendingEntry),e(t,8,0,n.entries,n.hotspotsTrackBy),e(t,11,0,n.pendingEntry)},function(e,t){var n=t.component;e(t,0,0,n.height+n.hotspotsOverlayMargins+n.heightOverflow,n.minWidth,1===n.uiState.displayMode?"inherit":"hidden"),e(t,2,0,n.minWidth,n.calculateHotspotsContainerHeight()),e(t,4,0,n.minWidth)})}function Io(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{overlayElementRef:0}),l["ɵqud"](671088640,2,{hotspotsContainerRef:0}),(e()(),l["ɵand"](16777216,null,null,1,null,Ao)),l["ɵdid"](3,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,3,0,t.component.enabled)},null)}var To=n(90),_o=n(56),Oo=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function wo(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{modal:0}),(e()(),l["ɵeld"](1,0,null,null,15,"ip-modal",[["modalTitle","Direct links may not work in preview mode"]],null,[[null,"close"]],function(e,t,n){var l=!0;return"close"===t&&(l=!1!==e.component.handleClose()&&l),l},To.b,To.a)),l["ɵdid"](2,114688,[[1,4],["modal",4]],0,_o.IpModalComponent,[],{modalTitle:[0,"modalTitle"],opened:[1,"opened"]},{close:"close"}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,1,4,"div",[["class","c-modal__body l-space-top-secondary"],["ip-modal-content",""]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](6,0,null,null,1,"p",[["class","l-space-bottom-quaternary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" Please mind because of internet security some direct links may not work in preview mode. If this link did not work please do not worry and test it on fully published page. "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](10,0,null,2,5,"div",[["class","c-modal__footer l-space-top-secondary"],["ip-modal-footer",""]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](12,0,null,null,2,"ip-button",[],[[2,"u-pointer-none",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleClose()&&l),l},A.b,A.a)),l["ɵdid"](13,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],null,null),(e()(),l["ɵted"](-1,0,["CLOSE"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,2,0,"Direct links may not work in preview mode",t.component.opened),e(t,13,0)},function(e,t){e(t,12,0,l["ɵnov"](t,13).disabled)})}var Mo=l["ɵccf"]("redirect-modal",Xn,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"redirect-modal",[],null,null,null,wo,Oo)),l["ɵdid"](1,49152,null,0,Xn,[],null,null)],null,null)},{opened:"opened"},{},[]),Do=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ko(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ip-heatmap",[],null,[["window","resize"]],function(e,t,n){var o=!0;return"window:resize"===t&&(o=!1!==l["ɵnov"](e,1).onResize(n)&&o),o},Kn,Wn)),l["ɵdid"](1,4374528,null,0,qn,[W.m,yt,De,Qe,Z],{width:[0,"width"],height:[1,"height"],hasAccessToHeatmap:[2,"hasAccessToHeatmap"]},null)],function(e,t){var n=t.component;e(t,1,0,n.heatmapModeMinWidth,n.iframeHeight+"px",n.hasAccessToHeatmap)},null)}function Ro(e){return l["ɵvid"](0,[l["ɵpid"](0,Yn,[v.DomSanitizer]),l["ɵqud"](402653184,1,{iframe:0}),l["ɵqud"](402653184,2,{wrapper:0}),(e()(),l["ɵeld"](3,0,[[2,0],["wrapper",1]],null,15,"div",[["class","c-iframe-holder"]],[[4,"overflow",null]],[[null,"scroll"]],function(e,t,n){var l=!0;return"scroll"===t&&(l=!1!==e.component.handleWrapperScroll(n)&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](5,0,null,null,5,"div",[["style","width:100%"]],[[4,"min-width",null],[4,"height",null]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](7,0,[[1,0],["iframe",1]],null,2,"iframe",[["id","ip_canvas"],["sandbox","allow-scripts allow-forms"],["scrolling","yes"]],[[2,"c-iframe",null],[2,"iframe",null],[2,"t-blur-primary",null],[8,"src",5]],null,null,null,null)),l["ɵppd"](8,2),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](12,0,null,null,2,"iframe-overlay",[],null,[["document","keydown"]],function(e,t,n){var o=!0;return"document:keydown"===t&&(o=!1!==l["ɵnov"](e,13).handleKeyDown(n)&&o),o},Io,Eo)),l["ɵdid"](13,8634368,[["commentsOverlay",4]],0,bo,[W.m,be,Ce,Ye,oe,Z,Ge,v.DomSanitizer],{enabled:[0,"enabled"],height:[1,"height"],minWidth:[2,"minWidth"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,ko)),l["ɵdid"](17,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,13,0,n.commentsModeEnabled,n.overlayHeight,n.commentModeMinWidth),e(t,17,0,n.heatmapModeEnabled&&n.iframeHeight)},function(e,t){var n=t.component;e(t,3,0,n.commentsModeEnabled||n.heatmapModeEnabled?"auto":""),e(t,5,0,!n.commentsModeEnabled&&!n.heatmapModeEnabled||n.isPopupOpen()?"":n.commentModeMinWidth+"px",n.commentsModeEnabled||n.heatmapModeEnabled?n.iframeHeight+"px":"100%"),e(t,7,0,!0,!0,n.heatmapModeEnabled&&!n.hasAccessToHeatmap,l["ɵunv"](t,7,3,e(t,8,0,l["ɵnov"](t,0),n.src,"resourceUrl")))})}var Po=n(97),Ho=function(){function e(){this.trialModalClose=new l.EventEmitter,this.tryFeature=new l.EventEmitter}return e.prototype.handleClose=function(){this.opened&&this.trialModalClose.emit()},e.prototype.handleTryFeature=function(e){this.tryFeature.emit(this.modalCheckbox.nativeElement.checked)},e}(),xo=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function No(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{modalCheckbox:0}),(e()(),l["ɵeld"](1,0,null,null,38,"ip-modal",[["data-at","modalTitle"],["size","x-large"],["type",""]],null,[[null,"close"]],function(e,t,n){var l=!0;return"close"===t&&(l=!1!==e.component.handleClose()&&l),l},To.b,To.a)),l["ɵdid"](2,114688,null,0,_o.IpModalComponent,[],{modalTitle:[0,"modalTitle"],closeButton:[1,"closeButton"],size:[2,"size"],type:[3,"type"],opened:[4,"opened"]},{close:"close"}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,1,3,"div",[["class","c-modal__body l-space-top-secondary l-space-bottom-quaternary"],["ip-modal-content",""]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](6,0,null,null,0,"div",[["data-at","modalText"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](9,0,null,2,29,"div",[["class","c-modal__footer l-space-top-quaternary"],["ip-modal-footer",""]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](11,0,null,null,26,"div",[["class","l-group l-group--block l-group--ver-center"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](13,0,null,null,12,"div",[["class","l-group__item l-group__item--grow u-text--left"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](15,0,null,null,9,"label",[["class","c-mark c-mark--small"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](17,0,[[1,0],["checkbox",1]],null,0,"input",[["class","c-mark__input"],["type","checkbox"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](19,0,null,null,1,"i",[["class","c-mark__icon c-mark__icon--checkbox material-icons"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["check"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](22,0,null,null,1,"span",[["class","c-mark__label"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Don’t show me this again for this feature."])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](27,0,null,null,9,"div",[["class","l-group__item l-group__item--no-shrink"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](29,0,null,null,2,"ip-button",[["data-at","closeBtn"],["type","regular"]],[[2,"u-pointer-none",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleClose()&&l),l},A.b,A.a)),l["ɵdid"](30,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],{type:[0,"type"]},null),(e()(),l["ɵted"](-1,0,["Close"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](33,0,null,null,2,"ip-button",[["color","action"],["data-at","tryThisFeatureBtn"],["type","regular"]],[[2,"u-pointer-none",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleTryFeature(n)&&l),l},A.b,A.a)),l["ɵdid"](34,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],{color:[0,"color"],type:[1,"type"]},null),(e()(),l["ɵted"](-1,0,["Try this feature"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,2,0,n.modalTitle,!0,"x-large","",n.opened),e(t,30,0,"regular"),e(t,34,0,"action","regular")},function(e,t){e(t,6,0,t.component.innerHTML),e(t,29,0,l["ɵnov"](t,30).disabled),e(t,33,0,l["ɵnov"](t,34).disabled)})}var Vo=function(){function e(e,t){this.currentUserService=e,this.window=t,this._opened=!1}return Object.defineProperty(e.prototype,"opened",{get:function(){return this._opened},set:function(e){this._opened=e,this.modal&&(this.modal.opened=e)},enumerable:!0,configurable:!0}),e.prototype.handleClose=function(){this.opened=!1,this.currentUserService.setIntroModalSeen().subscribe(function(){})},e.prototype.learnMore=function(){this.window.open("https://instapage.com/blog/marketing-team-collaboration#demovideo","_blank")},e}(),Lo=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Uo(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{modal:0}),(e()(),l["ɵeld"](1,0,null,null,22,"ip-modal",[["modalTitle","New Collaboration Solution"],["size","x-large"],["type",""]],null,[[null,"close"]],function(e,t,n){var l=!0;return"close"===t&&(l=!1!==e.component.handleClose()&&l),l},To.b,To.a)),l["ɵdid"](2,114688,[[1,4],["modal",4]],0,_o.IpModalComponent,[],{modalTitle:[0,"modalTitle"],size:[1,"size"],type:[2,"type"],opened:[3,"opened"]},{close:"close"}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,1,7,"div",[["class","c-modal__body"],["ip-modal-content",""]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](6,0,null,null,1,"p",[["class","l-space-bottom-secondary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" See how the new Collaboration Solution can improve your workflow. "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](9,0,null,null,1,"iframe",[["frameborder","0"],["height","350"],["src","https://www.youtube.com/embed/Q4PLucs9Hk8?autoplay=1"],["width","620"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](13,0,null,2,9,"div",[["class","c-modal__footer l-space-top-quaternary"],["ip-modal-footer",""]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](15,0,null,null,2,"ip-button",[],[[2,"u-pointer-none",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleClose()&&l),l},A.b,A.a)),l["ɵdid"](16,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],null,null),(e()(),l["ɵted"](-1,0,["SKIP"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](19,0,null,null,2,"ip-button",[["color","action"]],[[2,"u-pointer-none",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.learnMore()&&l),l},A.b,A.a)),l["ɵdid"](20,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],{color:[0,"color"]},null),(e()(),l["ɵted"](-1,0,[" LEARN MORE "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,2,0,"New Collaboration Solution","x-large","",t.component.opened),e(t,16,0),e(t,20,0,"action")},function(e,t){e(t,15,0,l["ɵnov"](t,16).disabled),e(t,19,0,l["ɵnov"](t,20).disabled)})}var $o=function(){function e(e,t,n,o){this.window=e,this.analytics=t,this.pageService=n,this.titleService=o,this._opened=!1,this.modalClose=new l.EventEmitter}return Object.defineProperty(e.prototype,"opened",{get:function(){return this._opened},set:function(e){this._opened=e,this.modal&&(this.modal.opened=e),this.opened&&this.trackLimitedCollaborationEvent("CollabUpgradeModalView")},enumerable:!0,configurable:!0}),e.prototype.handleClose=function(){this.trackLimitedCollaborationEvent("CollabUpgradeModalCancel"),this.opened=!1,this.modalClose.emit()},e.prototype.handleCancel=function(){this.handleClose()},e.prototype.trackLimitedCollaborationEvent=function(e){var t=this;this.pageService.getCustomerInformation().subscribe(function(n){var l=n.ownerEmail;t.analytics.trackEvent(e,{accountID:n.ownerId,userID:t.analytics.currentUserService.id,subaccountID:n.customerId,eventDT:~~(Date.now()/1e3),accountCreatedDT:"",userCreatedDT:"",accountOwnerEmail:l,email:t.analytics.currentUserService.user.email,isEmailVerified:"",permissionType:ie.roles.getRole(t.analytics.currentUserService.user.role),signUpMethod:"",subaccountName:"",plan:"",publishedPagesCount:"",title:t.titleService.getTitle(),agency:"",source:"",page:t.window.location.href})})},e.prototype.contactUs=function(){this.trackLimitedCollaborationEvent("CollabUpgradeModalContactUs"),this.window.open("https://app.instapage.com/contact-us","_blank")},e}(),Fo=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function jo(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{modal:0}),(e()(),l["ɵeld"](1,0,null,null,27,"ip-modal",[["modalTitle","Collaboration is an Enterprise feature"],["size","x-large"],["type",""]],null,[[null,"close"]],function(e,t,n){var l=!0;return"close"===t&&(l=!1!==e.component.handleClose()&&l),l},To.b,To.a)),l["ɵdid"](2,114688,[[1,4],["modal",4]],0,_o.IpModalComponent,[],{modalTitle:[0,"modalTitle"],size:[1,"size"],type:[2,"type"],opened:[3,"opened"]},{close:"close"}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,1,12,"div",[["class","c-modal__body"],["ip-modal-content",""]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](6,0,null,null,9,"div",[["class","l-space-bottom-quinary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](8,0,null,null,0,"img",[["src","https://storage.googleapis.com/instapage-app-assets/1544197398_collaboration.gif"]],[[4,"height","px"],[4,"width","px"]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](10,0,null,null,1,"p",[["class","l-space-top-tertiary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Our collaboration solution streamlines design review processes, allowing marketing teams and agencies to leave comments, provide feedback and communicate in real time; all within the Instapage platform."])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](13,0,null,null,1,"p",[["class","l-space-top-tertiary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Contact us to switch to an Enterprise plan and start collaborating with your team."])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](18,0,null,2,9,"div",[["class","c-modal__footer l-space-top-quaternary"],["ip-modal-footer",""]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](20,0,null,null,2,"ip-button",[],[[2,"u-pointer-none",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleCancel()&&l),l},A.b,A.a)),l["ɵdid"](21,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],null,null),(e()(),l["ɵted"](-1,0,["CANCEL"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](24,0,null,null,2,"ip-button",[["color","action"]],[[2,"u-pointer-none",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.contactUs()&&l),l},A.b,A.a)),l["ɵdid"](25,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],{color:[0,"color"]},null),(e()(),l["ɵted"](-1,0,[" CONTACT US "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,2,0,"Collaboration is an Enterprise feature","x-large","",t.component.opened),e(t,21,0),e(t,25,0,"action")},function(e,t){e(t,8,0,323,620),e(t,20,0,l["ɵnov"](t,21).disabled),e(t,24,0,l["ɵnov"](t,25).disabled)})}var Bo=function(){function e(){this.modalClose=new l.EventEmitter,this.login=new l.EventEmitter}return e.prototype.handleClose=function(){this.modalClose.emit()},e.prototype.handleTryFeature=function(){window.open("https://app.instapage.com/auth/login")},e}(),Go=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function zo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,19,"ip-modal",[["data-at","title"],["modalTitle","Login required for Heatmap Mode."],["size","x-large"]],null,[[null,"close"]],function(e,t,n){var l=!0;return"close"===t&&(l=!1!==e.component.handleClose()&&l),l},To.b,To.a)),l["ɵdid"](1,114688,null,0,_o.IpModalComponent,[],{modalTitle:[0,"modalTitle"],closeButton:[1,"closeButton"],size:[2,"size"],opened:[3,"opened"]},{close:"close"}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](3,0,null,1,4,"div",[["class","c-modal__body l-space-top-secondary l-space-bottom-quaternary"],["ip-modal-content",""]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](5,0,null,null,1,"div",[["data-at","modalText"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" Please log in to gain access to Heatmap Mode. To view the page without Heatmap mode, select cancel. "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](9,0,null,2,9,"div",[["class","c-modal__footer"],["ip-modal-footer",""]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](11,0,null,null,2,"ip-button",[],[[2,"u-pointer-none",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleClose()&&l),l},A.b,A.a)),l["ɵdid"](12,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],null,null),(e()(),l["ɵted"](-1,0,[" Cancel "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](15,0,null,null,2,"ip-button",[["color","action"]],[[2,"u-pointer-none",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleTryFeature()&&l),l},A.b,A.a)),l["ɵdid"](16,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],{color:[0,"color"]},null),(e()(),l["ɵted"](-1,0,[" Login "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,1,0,"Login required for Heatmap Mode.",!0,"x-large",t.component.opened),e(t,12,0),e(t,16,0,"action")},function(e,t){e(t,11,0,l["ɵnov"](t,12).disabled),e(t,15,0,l["ɵnov"](t,16).disabled)})}var qo=l["ɵcrt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routeAnimation",definitions:[{type:0,name:"*",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"0.5s ease-in"}],options:null},{type:1,expr:"* => void",animation:[{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"0.5s ease-out"}],options:null}],options:{}}]}});function Wo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"ip-dropdown-item",[],[[2,"is-active",null],[1,"data-at",0]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.switchVariation(e.context.$implicit.variationName)&&l),l},c.b,c.a)),l["ɵdid"](1,4243456,null,0,d.IpDropdownItemComponent,[p.IpDropdownService,l.ElementRef,h.IpDropdownComponent],null,{click:"click"}),(e()(),l["ɵted"](2,0,["",""]))],null,function(e,t){var n=t.component;e(t,0,0,t.context.$implicit.variationName===n.uiState.variation,t.context.$implicit.variationName),e(t,2,0,n.resolveVariationName(t.context.$implicit))})}function Ko(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,24,"ip-dropdown",[["dropdownAlign","left"],["ngClass","t-variation-dropdown"]],null,null,null,m.b,m.a)),l["ɵdid"](1,278528,null,0,f.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer],{ngClass:[0,"ngClass"]},null),l["ɵprd"](512,null,p.IpDropdownService,p.IpDropdownService,[]),l["ɵdid"](3,1294336,null,4,h.IpDropdownComponent,[v.DOCUMENT,l.ElementRef,p.IpDropdownService],{disabled:[0,"disabled"],dropdownAlign:[1,"dropdownAlign"]},null),l["ɵqud"](335544320,2,{customScrollContainer:0}),l["ɵqud"](335544320,3,{scrollSercheableContainer:0}),l["ɵqud"](335544320,4,{scrollSercheableHeader:0}),l["ɵqud"](603979776,5,{contentGroups:1}),(e()(),l["ɵted"](-1,1,[" "])),(e()(),l["ɵeld"](9,0,null,0,7,"button",[["class","c-button c-button--simple"],["ip-dropdown-trigger",""]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](11,0,null,null,1,"span",[["class","c-button__text"]],[[1,"data-at",0]],null,null,null,null)),(e()(),l["ɵted"](12,null,["",""])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](14,0,null,null,1,"i",[["class","material-icons c-button__icon"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["arrow_drop_down"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,1,[" "])),(e()(),l["ɵeld"](18,0,null,2,5,"ip-dropdown-group",[],null,null,null,g.b,g.a)),l["ɵdid"](19,49152,[[5,4]],0,y.IpDropdownGroupComponent,[],null,null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,0,1,null,Wo)),l["ɵdid"](22,802816,null,0,f.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,1,[" "]))],function(e,t){var n=t.component;e(t,1,0,"t-variation-dropdown"),e(t,3,0,n.uiState.loading,"left"),e(t,22,0,n.variations)},function(e,t){var n=t.component;e(t,11,0,n.resolveCurrentVariationName()),e(t,12,0,n.resolveCurrentVariationName())})}function Yo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","l-group__item l-group__item--no-shrink l-space-right-primary"],["data-at","navVariationDropdown"]],[[2,"l-space-left-tertiary",null]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Ko)),l["ɵdid"](3,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,3,0,t.component.variations)},function(e,t){e(t,0,0,!t.component.userCanEditPage)})}function Xo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"ip-switch",[["data-at","heatmapMode"],["label","Heatmap Mode"]],null,[[null,"change"]],function(e,t,n){var l=!0;return"change"===t&&(l=!1!==e.component.switchHeatmapsMode(n.checked)&&l),l},b.b,b.a)),l["ɵdid"](1,49152,null,0,E.IpSwitchComponent,[],{label:[0,"label"],checked:[1,"checked"],disabled:[2,"disabled"]},{change:"change"}),l["ɵpid"](131072,f.AsyncPipe,[l.ChangeDetectorRef])],function(e,t){var n=t.component;e(t,1,0,"Heatmap Mode",l["ɵunv"](t,1,1,l["ɵnov"](t,2).transform(n.isHeatmapModeEnabled())),n.uiState.loading)},null)}function Jo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"carousel",[],null,null,null,H,R)),l["ɵdid"](1,573440,null,0,k,[l.ElementRef],{items:[0,"items"]},null)],function(e,t){e(t,1,0,t.component.items)},null)}function Zo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,67,"section",[["class","c-preview__top u-relative"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,64,"nav",[["class","l-group l-group--block l-group--ver-center stop-bar-container l-space-left-tertiary"],["role","navigation"]],null,[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.onNavClick(n)&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Yo)),l["ɵdid"](5,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](7,0,null,null,16,"div",[["class","l-group__item l-group__item--no-shrink"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](9,0,null,null,13,"ip-toggle",[],null,null,null,x.b,x.a)),l["ɵdid"](10,1228800,null,1,N.IpToggleComponent,[l.ChangeDetectorRef],null,null),l["ɵqud"](603979776,6,{contentChildren:1}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](13,0,null,0,3,"ip-toggle-item",[["data-at","desktop"],["value","desktop"]],null,[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.switchToDesktop()&&l),l},V.b,V.a)),l["ɵdid"](14,3194880,[[6,4]],0,L.IpToggleItemComponent,[],{value:[0,"value"],selected:[1,"selected"],disabled:[2,"disabled"]},{click:"click"}),l["ɵpid"](131072,f.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["ɵted"](-1,0,[" DESKTOP "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](18,0,null,0,3,"ip-toggle-item",[["data-at","mobile"],["value","mobile"]],null,[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.switchToMobile()&&l),l},V.b,V.a)),l["ɵdid"](19,3194880,[[6,4]],0,L.IpToggleItemComponent,[],{value:[0,"value"],selected:[1,"selected"],disabled:[2,"disabled"]},{click:"click"}),l["ɵpid"](131072,f.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["ɵted"](-1,0,[" MOBILE "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](25,0,null,null,4,"div",[["class","l-group__item l-group__item--no-shrink u-text--small l-space-hor-secondary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](27,0,null,null,1,"ip-switch",[["data-at","commentMode"],["label","Comment Mode"]],null,[[null,"change"],[null,"click"]],function(e,t,n){var l=!0,o=e.component;return"change"===t&&(l=!1!==o.switchCommentsMode(n.checked)&&l),"click"===t&&(l=!1!==o.clickCommentsMode(n)&&l),l},b.b,b.a)),l["ɵdid"](28,49152,null,0,E.IpSwitchComponent,[],{label:[0,"label"],checked:[1,"checked"],disabled:[2,"disabled"]},{change:"change"}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](31,0,null,null,5,"div",[["class","l-group__item l-group__item--no-shrink u-text--small"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,2,null,Xo)),l["ɵdid"](34,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["ɵpid"](131072,f.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](38,0,null,null,4,"div",[["class","l-group__item l-group__item--grow l-space-hor-secondary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Jo)),l["ɵdid"](41,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](44,0,null,null,21,"div",[["class","l-group__item l-group__item--no-shrink l-space-right-tertiary l-space-primary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](46,0,null,null,4,"button",[["class","c-btn c-btn--regular c-btn--regular-action"]],null,[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.toggleShare(n)&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](48,0,null,null,1,"span",[["class","c-btn__content"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["SHARE"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](52,0,null,null,12,"div",[["class","u-relative t-share-holder"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](54,0,null,null,9,"ip-popover",[["size","large"]],null,[[null,"close"]],function(e,t,n){var l=!0;return"close"===t&&(l=!1!==e.component.shareClose(n)&&l),l},U.b,U.a)),l["ɵdid"](55,770048,null,0,$.IpPopoverComponent,[v.DOCUMENT,l.ElementRef],{size:[0,"size"],opened:[1,"opened"],arrow:[2,"arrow"]},{close:"close"}),l["ɵpad"](56,2),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵeld"](58,0,null,0,4,"div",[["class","l-space-quaternary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](60,0,null,null,1,"share",[],null,null,null,Nt,Ot)),l["ɵdid"](61,245760,null,0,Ct,[$.IpPopoverComponent,Z,re,ht,Ye,we,ue,ut,W.m],null,null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,5,0,!(null!=n.uiState&&n.uiState.controlVariation)),e(t,14,0,"desktop",!l["ɵunv"](t,14,1,l["ɵnov"](t,15).transform(n.isMobile$)),n.uiState.loading),e(t,19,0,"mobile",l["ɵunv"](t,19,1,l["ɵnov"](t,20).transform(n.isMobile$)),n.uiState.loading),e(t,28,0,"Comment Mode",!!n.uiState.hasAccessToCollaboration&&n.isCommentModeEnabled(n.uiState.featureModeEnabled),!n.uiState.hasAccessToCollaboration||n.uiState.loading),e(t,34,0,!l["ɵunv"](t,34,0,l["ɵnov"](t,35).transform(n.isAmp$))),e(t,41,0,n.isCommentModeEnabled(n.uiState.featureModeEnabled)&&n.uiState.hasAccessToCollaboration),e(t,55,0,"large",n.shareOpened,e(t,56,0,"top","right")),e(t,61,0)},null)}function Qo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"feed",[["data-at","feed"]],null,null,null,gn,Zt)),l["ɵdid"](1,245760,null,0,qt,[zt,l.ChangeDetectorRef,W.m,ue,Ie,dt,et,oe],null,null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,1,0)},null)}function ei(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"heatmap-menu",[["data-at","heatmapMenu"]],null,null,null,Fn,Pn)),l["ɵdid"](1,245760,null,0,Rn,[Ye,yt,W.m,ue,De],null,null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,1,0)},null)}function ti(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,30,"section",[["id","iframe-container"]],null,null,null,null,null)),l["ɵdid"](1,278528,null,0,f.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer],{ngClass:[0,"ngClass"]},null),l["ɵpid"](131072,f.AsyncPipe,[l.ChangeDetectorRef]),l["ɵpod"](3,{"c-preview__middle":0,"is-mobile":1,"is-commentable":2,"popup-opened":3}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](5,0,null,null,9,"div",[["class","preview-container"]],null,null,null,null,null)),l["ɵdid"](6,278528,null,0,f.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpid"](131072,f.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](9,0,null,null,4,"ip-experience-preview",[],[[8,"popup",0]],[[null,"loaded"],[null,"iframeError"],[null,"popupTop"],[null,"popupPositionChanged"],[null,"popupDimensionsChanged"],[null,"popupOpened"],[null,"popupClosed"],["window","resize"]],function(e,t,n){var o=!0,i=e.component;return"window:resize"===t&&(o=!1!==l["ɵnov"](e,11).onResize(n)&&o),"loaded"===t&&(o=!1!==i.onPreviewLoaded(n)&&o),"iframeError"===t&&(o=!1!==i.onIframeError(n)&&o),"popupTop"===t&&(o=!1!==i.setPopupTop(n)&&o),"popupPositionChanged"===t&&(o=!1!==i.onPopupPositionChanged(n)&&o),"popupDimensionsChanged"===t&&(o=!1!==i.onPopupDimensionsChanged(n)&&o),"popupOpened"===t&&(o=!1!==i.onPopupOpened(n)&&o),"popupClosed"===t&&(o=!1!==i.onPopupClosed(n)&&o),o},Ro,Do)),l["ɵprd"](8704,null,l.ComponentFactoryResolver,l["ɵCodegenComponentFactoryResolver"],[[8,[Mo]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["ɵdid"](11,13287424,null,0,el,[Z,l.ApplicationRef,l.ComponentFactoryResolver,l.Injector,Qe,Ye],{src:[0,"src"],mode:[1,"mode"],commentsModeEnabled:[2,"commentsModeEnabled"],heatmapModeEnabled:[3,"heatmapModeEnabled"],hasAccessToHeatmap:[4,"hasAccessToHeatmap"],variation:[5,"variation"]},{loaded:"loaded",popupOpened:"popupOpened",popupClosed:"popupClosed",popupTop:"popupTop",popupPositionChanged:"popupPositionChanged",popupDimensionsChanged:"popupDimensionsChanged",iframeError:"iframeError"}),l["ɵpid"](131072,f.AsyncPipe,[l.ChangeDetectorRef]),l["ɵpid"](131072,f.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Qo)),l["ɵdid"](17,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,2,null,ei)),l["ɵdid"](20,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["ɵpid"](131072,f.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](23,0,null,null,4,"ip-snackbar",[["status","danger"]],null,[[null,"done"]],function(e,t,n){var l=!0;return"done"===t&&(l=!1!==e.component.resetError(n)&&l),l},s.c,s.b)),l["ɵdid"](24,180224,null,0,Po.IpSnackbarComponent,[l.ChangeDetectorRef],{lifetime:[0,"lifetime"],status:[1,"status"],visible:[2,"visible"]},{done:"done"}),l["ɵpid"](131072,f.AsyncPipe,[l.ChangeDetectorRef]),l["ɵpid"](131072,f.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["ɵted"](27,0,[" "," "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](29,16777216,[[1,3],["mentionsAnchor",1]],null,0,"div",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,1,0,e(t,3,0,!0,l["ɵunv"](t,1,0,l["ɵnov"](t,2).transform(n.isMobile$)),!n.isSampleModeEnabled(n.uiState.featureModeEnabled),n.uiState.openedPopup)),e(t,6,0,"preview-container",l["ɵunv"](t,6,1,l["ɵnov"](t,7).transform(n.isMobile$))?"c-sub-preview-mobile":"c-sub-preview-desktop"),e(t,11,0,n.url,l["ɵunv"](t,11,1,l["ɵnov"](t,12).transform(n.displayMode$)),n.isCommentModeEnabled(n.uiState.featureModeEnabled)&&n.uiState.hasAccessToCollaboration,l["ɵunv"](t,11,3,l["ɵnov"](t,13).transform(n.isHeatmapModeEnabled())),n.uiState.hasAccessToHeatmap,n.uiState.variation),e(t,17,0,n.isCommentModeEnabled(n.uiState.featureModeEnabled)&&n.uiState.hasAccessToCollaboration),e(t,20,0,l["ɵunv"](t,20,0,l["ɵnov"](t,21).transform(n.isHeatmapModeEnabled()))),e(t,24,0,l["ɵunv"](t,24,0,l["ɵnov"](t,25).transform(n.errorMessageTime$)),"danger",l["ɵunv"](t,24,2,l["ɵnov"](t,26).transform(n.error$)).visible)},function(e,t){var n=t.component;e(t,9,0,n.uiState.openedPopup),e(t,27,0,(null==n.uiState.error?null:n.uiState.error.message)||"ERROR")})}function ni(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,14,"div",[["class","c-modal-backdrop"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,11,"div",[["class","c-modal-holder"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,8,"span",[["class","c-spinner c-spinner--large"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](6,0,null,null,5,"span",[["class","c-spinner__content"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](8,0,null,null,0,"span",[["class","c-spinner__side c-spinner__side--left"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](10,0,null,null,0,"span",[["class","c-spinner__side c-spinner__side--right"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],null,null)}function li(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["class","c-button__text"],["ip-custom",""]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.uiState.modal.button.label)})}function oi(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{mentionsAnchorRef:0}),(e()(),l["ɵeld"](1,0,null,null,78,"main",[["class","c-preview"],["role","main"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Zo)),l["ɵdid"](4,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,ti)),l["ɵdid"](7,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,ni)),l["ɵdid"](10,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](12,0,null,null,18,"ip-modal",[["size","small"],["type",""]],null,[[null,"close"]],function(e,t,n){var l=!0;return"close"===t&&(l=!1!==e.component.closeModal()&&l),l},To.b,To.a)),l["ɵdid"](13,114688,null,0,_o.IpModalComponent,[],{closeButton:[0,"closeButton"],size:[1,"size"],type:[2,"type"],opened:[3,"opened"]},{close:"close"}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](15,0,null,0,1,"p",[["ip-modal-header",""]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" You are being redirected to a team member only conversation. To view the comment please log in. "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](18,0,null,2,11,"div",[["class","c-modal__footer"],["ip-modal-footer",""]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](20,0,null,null,2,"ip-button",[],[[2,"u-pointer-none",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.closeModal()&&l),l},A.b,A.a)),l["ɵdid"](21,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],null,null),(e()(),l["ɵted"](-1,0,["CANCEL "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](24,0,null,null,4,"a",[["class","c-button fx-ripple-effect c-button--regular c-button--action"]],[[8,"href",4]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](26,0,null,null,1,"span",[["class","c-button__text"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["LOGIN"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](32,0,null,null,12,"ip-modal",[["size","small"]],null,[[null,"close"]],function(e,t,n){var l=!0;return"close"===t&&(l=!1!==e.component.closeModal()&&l),l},To.b,To.a)),l["ɵdid"](33,114688,null,0,_o.IpModalComponent,[],{closeButton:[0,"closeButton"],size:[1,"size"],opened:[2,"opened"]},{close:"close"}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](35,0,null,0,1,"p",[["ip-modal-header",""]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" The comment you are looking for is no longer avaliable. "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](38,0,null,2,5,"div",[["class","c-modal__footer"],["ip-modal-footer",""]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](40,0,null,null,2,"ip-button",[["color","action"],["type","flat"]],[[2,"u-pointer-none",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.closeModal()&&l),l},A.b,A.a)),l["ɵdid"](41,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],{color:[0,"color"],type:[1,"type"]},null),(e()(),l["ɵted"](-1,0,["CLOSE "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](46,0,null,null,18,"ip-modal",[["size","x-large"],["type",""]],null,[[null,"close"]],function(e,t,n){var l=!0;return"close"===t&&(l=!1!==e.component.closeUpgradeHeatmapModal()&&l),l},To.b,To.a)),l["ɵdid"](47,114688,null,0,_o.IpModalComponent,[],{modalTitle:[0,"modalTitle"],closeButton:[1,"closeButton"],size:[2,"size"],type:[3,"type"],opened:[4,"opened"]},{close:"close"}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](49,0,null,1,4,"div",[["class","c-modal__body l-space-top-secondary l-space-bottom-quaternary"],["ip-modal-content",""]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](51,0,null,null,1,"p",[["data-at","modalText"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](55,0,null,2,8,"div",[["class","c-modal__footer"],["ip-modal-footer",""]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](57,0,null,null,5,"ip-button",[["color","action"],["data-at","actionBtn"],["type","regular"]],[[2,"u-pointer-none",null]],[[null,"click"]],function(e,t,n){var l=!0,o=e.component;return"click"===t&&(l=!1!==o.modalClick(o.uiState.modal.button.label)&&l),l},A.b,A.a)),l["ɵdid"](58,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],{color:[0,"color"],type:[1,"type"]},null),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵand"](16777216,null,1,1,null,li)),l["ɵdid"](61,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](66,0,null,null,1,"trial-access-modal",[],null,[[null,"trialModalClose"],[null,"tryFeature"]],function(e,t,n){var l=!0,o=e.component;return"trialModalClose"===t&&(l=!1!==o.closeUpgradeHeatmapModal()&&l),"tryFeature"===t&&(l=!1!==o.handleTryFeature(n)&&l),l},No,xo)),l["ɵdid"](67,49152,null,0,Ho,[],{opened:[0,"opened"],modalTitle:[1,"modalTitle"],innerHTML:[2,"innerHTML"]},{trialModalClose:"trialModalClose",tryFeature:"tryFeature"}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](69,0,null,null,2,"intro-modal",[],null,null,null,Uo,Lo)),l["ɵdid"](70,49152,null,0,Vo,[oe,Z],{opened:[0,"opened"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](73,0,null,null,2,"limited-collaboration-modal",[],null,[[null,"modalClose"]],function(e,t,n){var l=!0;return"modalClose"===t&&(l=!1!==e.component.closeModal()&&l),l},jo,Fo)),l["ɵdid"](74,49152,null,0,$o,[Z,rt,Ye,v.Title],{opened:[0,"opened"]},{modalClose:"modalClose"}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](77,0,null,null,1,"login-modal",[],null,[[null,"modalClose"]],function(e,t,n){var l=!0;return"modalClose"===t&&(l=!1!==e.component.closeUpgradeHeatmapModal()&&l),l},zo,Go)),l["ɵdid"](78,49152,null,0,Bo,[],{opened:[0,"opened"]},{modalClose:"modalClose"}),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,4,0,n.ready),e(t,7,0,n.ready),e(t,10,0,n.uiState.loading),e(t,13,0,!1,"small","",n.uiState.modal.opened&&"accessDenied"===n.uiState.modal.type),e(t,21,0),e(t,33,0,!1,"small",n.uiState.modal.opened&&"removed"===n.uiState.modal.type),e(t,41,0,"action","flat"),e(t,47,0,n.uiState.modal.title,!0,"x-large","",!n.uiState.hasAccessToHeatmap&&n.uiState.modal.opened&&("upgrade"===n.uiState.modal.type||"close"===n.uiState.modal.type)),e(t,58,0,"action","regular"),e(t,61,0,n.uiState.modal.button),e(t,67,0,n.uiState.modal.opened&&"trial_access"===n.uiState.modal.type,n.uiState.modal.title,n.uiState.modal.message),e(t,70,0,n.showIntroModal),e(t,74,0,n.showLimitedCollaborationModal),e(t,78,0,n.uiState.modal.opened&&"login"===n.uiState.modal.type)},function(e,t){var n=t.component;e(t,20,0,l["ɵnov"](t,21).disabled),e(t,24,0,n.redirectLinkService.getPreviewLink()),e(t,40,0,l["ɵnov"](t,41).disabled),e(t,51,0,n.uiState.modal.message),e(t,57,0,l["ɵnov"](t,58).disabled)})}var ii=l["ɵccf"]("main-container",cl,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,2,"main-container",[],[[40,"@routeAnimation",0],[4,"display",null]],null,null,oi,qo)),l["ɵprd"](4608,null,mt,mt,[l.ApplicationRef,l.ComponentFactoryResolver]),l["ɵdid"](2,114688,null,0,cl,[l.ViewContainerRef,W.m,ue,Ce,be,we,Ye,yt,ct,oe,at,Ie,pt,et,v.Title,ee,il.Router,re,rt,ul,gt],null,null)],function(e,t){e(t,2,0)},function(e,t){e(t,0,0,l["ɵnov"](t,2).routeAnimation,l["ɵnov"](t,2).display)})},{},{},[]),ri=function(){function e(e,t,n,l,o){this.store=e,this.formBuilder=t,this.paramsService=n,this.router=l,this.accessService=o,this.errors={password:"",notMatch:""},this.messages={password:{required:"Password is required.",notMatch:"The password you have entered does not match our record."}},this.passwordVisible=!1}return Object.defineProperty(e.prototype,"routeAnimation",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){return"block"},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.buildForm()},e.prototype.buildForm=function(){var e=this;this.formGroup=this.formBuilder.group({password:["",[G.Validators.required]]}),this.formGroup.valueChanges.subscribe(function(t){return e.onValueChanged(t)}),this.onValueChanged()},e.prototype.onValueChanged=function(e){if(this.formGroup)for(var t in this.errors){this.errors[t]="";var n=this.formGroup.get(t);if(n&&n.dirty&&!n.valid)for(var l in n.errors)this.errors[t]+=this.messages[t][l]+" "}},e.prototype.onSubmit=function(){var e=this;this.accessService.checkAccess(this.formGroup.value.password).subscribe(function(t){t?e.router.navigate(["/preview/"+e.paramsService.roomHash],{preserveQueryParams:!0}):(e.formGroup.get("password").setErrors({notMatch:!0}),e.onValueChanged())})},e.prototype.togglePasswordVisibility=function(e){var t=this;e.preventDefault(),this.passwordVisible=!this.passwordVisible,setTimeout(function(){t.passwordInputRef.element.nativeElement.focus()})},Object.defineProperty(e.prototype,"redirectLink",{get:function(){var e=Le(this.store);return"/redirectToPreview/"+this.paramsService.roomHash+"/"+e.variation+"/"+e.displayMode},enumerable:!0,configurable:!0}),e}(),si=l["ɵcrt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"routeAnimation",definitions:[{type:0,name:"*",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"0.5s ease-in"}],options:null},{type:1,expr:"* => void",animation:[{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"0.5s ease-out"}],options:null}],options:{}}]}});function ui(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["The password for this page has changed since your last login."])),(e()(),l["ɵeld"](2,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Please obtain the new password through the page owner and enter it below."]))],null,null)}function ai(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{passwordInputRef:0}),(e()(),l["ɵeld"](1,0,null,null,73,"main",[["role","main"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](3,0,null,null,70,"div",[["class","c-modal-holder u-bg--tertiary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](5,0,null,null,67,"section",[["class","c-modal c-modal--large"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](7,0,null,null,64,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,t,n){var o=!0,i=e.component;return"submit"===t&&(o=!1!==l["ɵnov"](e,9).onSubmit(n)&&o),"reset"===t&&(o=!1!==l["ɵnov"](e,9).onReset()&&o),"ngSubmit"===t&&(o=!1!==i.onSubmit()&&o),o},null,null)),l["ɵdid"](8,16384,null,0,G["ɵbf"],[],null,null),l["ɵdid"](9,540672,null,0,G.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),l["ɵprd"](2048,null,G.ControlContainer,null,[G.FormGroupDirective]),l["ɵdid"](11,16384,null,0,G.NgControlStatusGroup,[G.ControlContainer],null,null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](13,0,null,null,3,"div",[["class","c-modal__head"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](15,0,null,null,0,"img",[["alt","Instapage logo"],["src","https://storage.googleapis.com/instapage-assets/main_logo_black.svg"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](18,0,null,null,33,"div",[["class","c-modal__body u-text--x-small"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](20,0,null,null,1,"h4",[["class","l-space-top-primary l-space-bottom-primary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["This page preview is password protected"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,ui)),l["ɵdid"](24,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](26,0,null,null,24,"div",[["class","l-space-top-secondary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](28,0,null,null,21,"ip-form-text-field",[["label","Password"]],null,null,null,F.b,F.a)),l["ɵdid"](29,1294336,null,1,j.IpTextFieldComponent,[],{label:[0,"label"],errors:[1,"errors"]},null),l["ɵqud"](335544320,2,{formTextInput:0}),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵeld"](32,0,null,0,10,"ip-form-input",[["formControlName","password"],["id","password"],["name","password"],["ngDefaultControl",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var o=!0;return"input"===t&&(o=!1!==l["ɵnov"](e,33)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==l["ɵnov"](e,33).onTouched()&&o),"compositionstart"===t&&(o=!1!==l["ɵnov"](e,33)._compositionStart()&&o),"compositionend"===t&&(o=!1!==l["ɵnov"](e,33)._compositionEnd(n.target.value)&&o),o},B.b,B.a)),l["ɵdid"](33,16384,null,0,G.DefaultValueAccessor,[l.Renderer2,l.ElementRef,[2,G.COMPOSITION_BUFFER_MODE]],null,null),l["ɵdid"](34,16384,null,0,G.RequiredValidator,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,G.NG_VALIDATORS,function(e){return[e]},[G.RequiredValidator]),l["ɵdid"](36,4308992,[[1,4],["passwordInput",4]],0,z.IpFormInputComponent,[[2,j.IpTextFieldComponent]],{id:[0,"id"],name:[1,"name"],type:[2,"type"],required:[3,"required"],value:[4,"value"]},{blur:"blur",input:"input"}),l["ɵprd"](1024,null,G.NG_VALUE_ACCESSOR,function(e,t){return[e,t]},[z.IpFormInputComponent,G.DefaultValueAccessor]),l["ɵdid"](38,671744,null,0,G.FormControlName,[[3,G.ControlContainer],[2,G.NG_VALIDATORS],[8,null],[2,G.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),l["ɵprd"](2048,null,G.NgControl,null,[G.FormControlName]),l["ɵdid"](40,16384,null,0,G.NgControlStatus,[G.NgControl],null,null),l["ɵprd"](2048,[[2,4]],q.IpFormTextInputElement,null,[z.IpFormInputComponent]),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵeld"](44,0,null,0,4,"button",[["class","c-button c-button--clean c-form-text-item__button c-form-text-item__button--small"],["type","button"]],null,[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.togglePasswordVisibility(n)&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](46,0,null,null,1,"i",[["class","material-icons c-button__icon"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["remove_red_eye"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,0,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](53,0,null,null,17,"div",[["class","c-modal__footer l-space-top-secondary l-space-top-tertiary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](55,0,null,null,14,"div",[["class","l-group l-group--block l-group--ver-center"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](57,0,null,null,4,"div",[["class","l-group__item l-group__item--grow u-text--left"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](59,0,null,null,1,"a",[["class","u-text--small"],["rel","noopener noreferrer"]],[[8,"href",4]],null,null,null,null)),(e()(),l["ɵted"](-1,null,["TEAM MEMBER? LOG IN"])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](63,0,null,null,5,"div",[["class","l-group__item l-group__item--no-shrink"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](65,0,null,null,2,"ip-button",[["color","action"],["htmlType","submit"]],[[2,"u-pointer-none",null]],null,null,A.b,A.a)),l["ɵdid"](66,4833280,null,0,I.IpButtonComponent,[l.ChangeDetectorRef],{htmlType:[0,"htmlType"],color:[1,"color"],disabled:[2,"disabled"]},null),(e()(),l["ɵted"](-1,0,[" CONTINUE "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,9,0,n.formGroup),e(t,24,0,n.accessService.passwordChanged),e(t,29,0,"Password",n.errors.password),e(t,34,0,!0),e(t,36,0,"password","password",n.passwordVisible?"text":"password",!0,n.formGroup.value.password),e(t,38,0,"password"),e(t,66,0,"submit","action",!n.formGroup.valid)},function(e,t){var n=t.component;e(t,7,0,l["ɵnov"](t,11).ngClassUntouched,l["ɵnov"](t,11).ngClassTouched,l["ɵnov"](t,11).ngClassPristine,l["ɵnov"](t,11).ngClassDirty,l["ɵnov"](t,11).ngClassValid,l["ɵnov"](t,11).ngClassInvalid,l["ɵnov"](t,11).ngClassPending),e(t,32,0,l["ɵnov"](t,34).required?"":null,l["ɵnov"](t,40).ngClassUntouched,l["ɵnov"](t,40).ngClassTouched,l["ɵnov"](t,40).ngClassPristine,l["ɵnov"](t,40).ngClassDirty,l["ɵnov"](t,40).ngClassValid,l["ɵnov"](t,40).ngClassInvalid,l["ɵnov"](t,40).ngClassPending),e(t,59,0,n.redirectLink),e(t,65,0,l["ɵnov"](t,66).disabled)})}var ci=l["ɵccf"]("access",ri,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"access",[],[[40,"@routeAnimation",0],[4,"display",null]],null,null,ai,si)),l["ɵdid"](1,114688,null,0,ri,[W.m,G.FormBuilder,ee,il.Router,re],null,null)],function(e,t){e(t,1,0)},function(e,t){e(t,0,0,l["ɵnov"](t,1).routeAnimation,l["ɵnov"](t,1).display)})},{},{},[]),di=function(){},pi=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function hi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"div",[],null,null,null,null,null))],null,null)}var mi=l["ɵccf"]("empty",di,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"empty",[],null,null,null,hi,pi)),l["ɵdid"](1,49152,null,0,di,[],null,null)],null,null)},{},{},[]),fi=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function vi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,[[3,0],["itemRef",1]],null,22,"li",[],[[8,"className",0],[2,"active",null]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.onItemClicked(n,e.context.index)&&l),l},null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,19,"div",[["class","c-list-item__content"]],[[2,"is-selected",null]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,16,"div",[["class","l-group l-group--secondary l-group--block l-group--ver-center"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](6,0,null,null,4,"div",[["class","l-group__item"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](8,0,null,null,1,"ip-avatar",[],null,null,null,M,O)),l["ɵdid"](9,114688,null,0,_,[],{user:[0,"user"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](12,0,null,null,7,"div",[["class","l-group__item u-text--left u-ellipsis-holder"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](14,0,null,null,1,"div",[["class","c-list-item__title u-text--small u-ellipsis"]],null,null,null,null,null)),(e()(),l["ɵted"](15,null,["",""])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](17,0,null,null,1,"div",[["class","c-list-item__description u-text--less-important u-ellipsis"]],null,null,null,null,null)),(e()(),l["ɵted"](18,null,["",""])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,9,0,t.context.$implicit)},function(e,t){var n=t.component;e(t,0,0,l["ɵinlineInterpolate"](1,"c-list-item t-mention type-",t.context.$implicit.type,""),t.context.index===n.activeIndex),e(t,2,0,t.context.index===n.activeIndex),e(t,15,0,t.context.$implicit.label),e(t,18,0,t.context.$implicit.description)})}function gi(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{containerRef:0}),l["ɵqud"](402653184,2,{viewportRef:0}),l["ɵqud"](671088640,3,{itemsRefList:1}),(e()(),l["ɵeld"](3,0,[[2,0],["viewportRef",1]],null,10,"section",[["class","c-popover t-mentions"]],[[4,"visibility",null],[4,"width","px"],[4,"top","px"],[4,"left","px"],[8,"hidden",0]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](5,0,[[1,0],["containerRef",1]],null,7,"div",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](7,0,null,null,4,"ul",[["class","c-list c-list--hover-primary c-list--spacing-tertiary c-list--multiline c-list--with-radius"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,vi)),l["ɵdid"](10,802816,null,0,f.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){e(t,10,0,t.component.displayItems)},function(e,t){var n=t.component;e(t,3,0,n.visibility,n.width,n.position.top,n.position.left,n.hidden)})}var yi=l["ɵccf"]("ip-mentions",dl,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ip-mentions",[],null,null,null,gi,fi)),l["ɵdid"](1,114688,null,0,dl,[],null,null)],function(e,t){e(t,1,0)},null)},{loading:"loading"},{itemClicked:"itemClicked",open:"open"},[]),bi=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Ei(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"div",[["class","l-space-quaternary u-text--center"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,0,"img",[["alt",""],["src","/dist/assets/icon--envelope.svg"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,3,"div",[["class","u-text--small l-space-top-quaternary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Your mention will add people to this"])),(e()(),l["ɵeld"](6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" conversation and send an invitation email."])),(e()(),l["ɵted"](-1,null,[" "]))],null,null)}function Si(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,"div",[["class","l-space-quaternary u-text--center"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](2,0,null,null,0,"img",[["alt",""],["src","/dist/assets/icon--members.svg"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,5,"div",[["class","u-text--small l-space-top-quaternary"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["This is a team conversation only."])),(e()(),l["ɵeld"](6,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["To @mention or invite new guests please adjust"])),(e()(),l["ɵeld"](8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["the visibility setting or start a new conversation. "])),(e()(),l["ɵted"](-1,null,[" "]))],null,null)}function Ci(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{containerRef:0}),(e()(),l["ɵeld"](1,0,[[1,0],["containerRef",1]],null,7,"div",[["class","c-popover"]],[[4,"visibility",null],[4,"width","px"],[4,"top","px"],[4,"left","px"]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Ei)),l["ɵdid"](4,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Si)),l["ɵdid"](7,16384,null,0,f.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](-1,null,[" "]))],function(e,t){var n=t.component;e(t,4,0,0===n.type),e(t,7,0,1===n.type)},function(e,t){var n=t.component;e(t,1,0,n.visibility,n.width,n.position.top,n.position.left)})}var Ai=l["ɵccf"]("ip-notification",kl,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ip-notification",[],null,null,null,Ci,bi)),l["ɵdid"](1,49152,null,0,kl,[],null,null)],null,null)},{},{},[]),Ii=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Ti(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"span",[["aria-disabled","true"]],null,null,null,null,null)),l["ɵdid"](1,278528,null,0,f.NgClass,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer],{ngClass:[0,"ngClass"]},null),l["ɵdid"](2,278528,null,0,f.NgStyle,[l.KeyValueDiffers,l.ElementRef,l.Renderer],{ngStyle:[0,"ngStyle"]},null),l["ɵpod"](3,{top:0,left:1,display:2,position:3}),(e()(),l["ɵted"](-1,null,["Click to start a conversation "]))],function(e,t){var n=t.component;e(t,1,0,n.tooltipClasses),e(t,2,0,e(t,3,0,n.tooltipY+"px",n.tooltipX+"px",n.tooltipDisplay,"fixed"))},null)}var _i=l["ɵccf"]("cursor-tooltip",go,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"cursor-tooltip",[],null,null,null,Ti,Ii)),l["ɵdid"](1,49152,null,0,go,[],null,null)],null,null)},{tooltipX:"tooltipX",tooltipY:"tooltipY",tooltipDisplay:"tooltipDisplay",tooltipClasses:"tooltipClasses"},{},[]),Oi=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function wi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),l["ɵdid"](1,212992,null,0,il.RouterOutlet,[il.ChildrenOutletContexts,l.ViewContainerRef,l.ComponentFactoryResolver,[8,null],l.ChangeDetectorRef],null,null)],function(e,t){e(t,1,0)},null)}var Mi=l["ɵccf"]("avengers",r,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,1,"avengers",[],null,null,null,wi,Oi)),l["ɵdid"](1,49152,null,0,r,[l.ViewContainerRef],null,null)],null,null)},{},{},[]),Di=n(512),ki=n(1091),Ri=n(243),Pi=n(221),Hi=n(217),xi=n(115),Ni=n(422),Vi=n(214),Li=n(284),Ui=n(1092),$i=function(){function e(e,t,n){this.router=e,this.paramsService=t,this.accessService=n}return e.prototype.canActivate=function(){var e=this;return X.Observable.of(this.accessService.hasPreviewAccess).switchMap(function(t){return void 0===t?e.accessService.getPreviewAccess():X.Observable.of(t)}).do(function(t){t&&e.router.navigate(["/preview/"+e.paramsService.roomHash],{preserveQueryParams:!0})}).map(function(e){return!e}).first()},e}(),Fi=function(){function e(e,t,n){this.router=e,this.paramsService=t,this.accessService=n}return e.prototype.canActivate=function(){var e=this;return this.accessService.getPreviewAccess().do(function(t){e.accessService.hasPreviewAccess=t,t||e.router.navigate(["/access/"+e.paramsService.roomHash],{preserveQueryParams:!0})}).first()},e}(),ji=n(1093),Bi=function(){return function(e,t,n,l,o,i,r,s,u){var a=this;this.actions$=e,this.state$=t,this.hotspotsService=n,this.socketIOService=l,this.heatmapService=o,this.uiActions=i,this.hotspotsActions=r,this.heatmapMenuActions=s,this.previewFacade=u,this.setLoading$=this.actions$.ofType(ue.SWITCH_TO_DESKTOP,ue.SWITCH_TO_MOBILE,ue.CHANGE_VARIATION,ue.SET_FEATURE_MODE,ue.SET_POPUP_OPENED,ue.SET_POPUP_CLOSED,De.CHANGE_HEATMAPMODE,De.CHANGE_PAGE_DATA).withLatestFrom(this.state$).filter(function(e){var t=e[1];return!Dn(t.ui.loadedPageInfo,t.heatmapMenu,t.ui.displayMode)||$e(t.ui.featureModeEnabled)&&!t.heatmapMenu.isLoaded}).mapTo(this.uiActions.setLoading()),this.resetHotspots$=this.actions$.ofType(ue.SWITCH_TO_DESKTOP,ue.SWITCH_TO_MOBILE,ue.CHANGE_VARIATION).withLatestFrom(this.state$).map(function(e){return e[1].ui}).filter(function(e){return Fe(e.featureModeEnabled)}).do(function(e){a.socketIOService.joinVariation({variation:e.variation,displayMode:e.displayMode})}).mapTo(this.hotspotsActions.reset()),this.loadHotspots$=this.actions$.ofType(ue.SET_LOADED).withLatestFrom(this.state$).map(function(e){return e[1]}).filter(function(e){return Fe(e.ui.featureModeEnabled)&&!e.hotspots.loading}).mapTo(this.hotspotsActions.load()),this.loadHotspotsOnEnable$=this.actions$.ofType(ue.SET_FEATURE_MODE).filter(function(e){return Fe(e.payload)}).mapTo(this.hotspotsActions.load()),this.resetHotspotsOnDisable$=this.actions$.ofType(ue.SET_FEATURE_MODE).filter(function(e){return e.payload!==he.comment}).mapTo(this.hotspotsActions.reset()),this.joinRoomOnEnableCommentsMode$=this.actions$.ofType(ue.SET_FEATURE_MODE).filter(function(e){return Fe(e.payload)}).withLatestFrom(this.state$).map(function(e){return e[1].ui}).do(function(e){a.socketIOService.joinVariation({variation:e.variation,displayMode:e.displayMode})}),this.popupOpened$=this.actions$.ofType(ue.SET_POPUP_OPENED).do(function(){return a.heatmapService.openPopup.emit()}),this.joinRoomOnPopupOpened$=this.actions$.ofType(ue.SET_POPUP_OPENED).withLatestFrom(this.state$).map(function(e){return e[1].ui}).do(function(e){a.socketIOService.joinVariation({variation:e.variation,displayMode:e.displayMode,popupId:e.openedPopup.id})}),this.popupClosed$=this.actions$.ofType(ue.SET_POPUP_CLOSED).map(function(e){return e.payload}).filter(Boolean).do(function(e){return a.previewFacade.closePopup(e)}),this.leaveVariationOnDisableCommentsMode$=this.actions$.ofType(ue.SET_FEATURE_MODE).filter(function(e){return e.payload===he.sample}).withLatestFrom(this.state$).map(function(e){return e[1].ui}).do(function(e){a.socketIOService.leaveVariation({popupId:e.openedPopup?e.openedPopup.id:null,variation:e.variation,displayMode:e.displayMode})}),this.onError$=this.actions$.ofType(ue.SET_APP_ERROR).map(lt.d).mapTo(this.hotspotsActions.load()),this.onCheckHotspotStatus$=this.actions$.ofType(ue.CHECK_HOTSPOT_STATUS).map(lt.d).switchMap(function(e){return a.hotspotsService.getHotspotStatus(e.id).map(function(e){return a.uiActions.checkHotspotStatusSuccess(e)}).catch(function(){return X.Observable.of(a.uiActions.checkHotspotStatusSuccess({success:!1}))})}),this.switchToMobile$=this.actions$.ofType(ue.SWITCH_TO_MOBILE).withLatestFrom(this.state$).filter(function(e){return $e(e[1].ui.featureModeEnabled)}).map(function(e){return e[1].heatmapMenu.heatmapMode}).switchMap(function(e){return X.Observable.of(a.heatmapMenuActions.changeHeatmapMode(e===ke.mouseMovement?ke.clicks:e))}),this.resetHeatmapMode$=this.actions$.ofType(ue.SET_FEATURE_MODE).filter(function(e){return $e(e.payload)}).withLatestFrom(this.state$).map(function(e){return e[1].ui.displayMode}).switchMap(function(e){return X.Observable.of(a.heatmapMenuActions.changeHeatmapMode(1===e?ke.clicks:ke.mouseMovement))}),this.onPageLoaded$=this.actions$.ofType(ue.PAGE_LOADED).withLatestFrom(this.state$).filter(function(e){var t=e[1];return!$e(t.ui.featureModeEnabled)||t.heatmapMenu.isLoaded}).map(function(e){return e[1].ui}).switchMap(function(e){return X.Observable.of(a.uiActions.setLoaded())}),this.setLoaded$=this.actions$.ofType(De.HEATMAP_LOAD_SUCCESS).withLatestFrom(this.state$).filter(function(e){var t=e[1];return Dn(t.ui.loadedPageInfo,t.heatmapMenu,t.ui.displayMode)}).switchMap(function(e){return X.Observable.of(a.uiActions.setLoaded())}),this.hasAccessToCollaboration$=this.actions$.ofType(ue.HAS_ACCESS_TO_COLLABORATION).filter(function(e){return!e.payload.access&&("yes"===ce("invitation")||"yes"===ce("shared"))}).switchMap(function(){return X.Observable.of(a.uiActions.openLimitedCollaborationModal())}),this.openLimitedCollaborationModal$=this.actions$.ofType(ue.OPEN_LC_MODAL).switchMap(function(){return X.Observable.of(a.uiActions.openModal({success:!1,error:!0,data:{button:{label:"",link:""},has_access:!1,message:"",reaction:"limited_collaboration",title:""}}))})}}();se.b([Object(lt.b)(),se.d("design:type",Object)],Bi.prototype,"setLoading$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Bi.prototype,"resetHotspots$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Bi.prototype,"loadHotspots$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Bi.prototype,"loadHotspotsOnEnable$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Bi.prototype,"resetHotspotsOnDisable$",void 0),se.b([Object(lt.b)({dispatch:!1}),se.d("design:type",Object)],Bi.prototype,"joinRoomOnEnableCommentsMode$",void 0),se.b([Object(lt.b)({dispatch:!1}),se.d("design:type",Object)],Bi.prototype,"popupOpened$",void 0),se.b([Object(lt.b)({dispatch:!1}),se.d("design:type",Object)],Bi.prototype,"joinRoomOnPopupOpened$",void 0),se.b([Object(lt.b)({dispatch:!1}),se.d("design:type",Object)],Bi.prototype,"popupClosed$",void 0),se.b([Object(lt.b)({dispatch:!1}),se.d("design:type",Object)],Bi.prototype,"leaveVariationOnDisableCommentsMode$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Bi.prototype,"onError$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Bi.prototype,"onCheckHotspotStatus$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Bi.prototype,"switchToMobile$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Bi.prototype,"resetHeatmapMode$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Bi.prototype,"onPageLoaded$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Bi.prototype,"setLoaded$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Bi.prototype,"hasAccessToCollaboration$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Bi.prototype,"openLimitedCollaborationModal$",void 0);var Gi=function(){return function(e,t,n,l,o,i,r,s){var u=this;this.actions$=e,this.state$=t,this.pageService=n,this.hotspotsService=l,this.socketIOService=o,this.uiActions=i,this.hotspotsActions=r,this.commentsActions=s,this.loadedHotspots$=this.actions$.ofType(be.LOAD).withLatestFrom(this.state$).map(function(e){return e[1].ui}).switchMap(function(e){return u.hotspotsService.fetch({variation:e.variation,displayMode:e.displayMode,popupId:e.openedPopup?e.openedPopup.id:null}).map(function(e){return u.hotspotsActions.loaded(e)}).catch(function(e){return X.Observable.of(u.hotspotsActions.loaded([]))})}),this.saveHotspot$=this.actions$.ofType(be.SAVE).map(lt.d).mergeMap(function(e){return u.socketIOService.createHotspot(e).take(1).map(function(e){return u.hotspotsActions.saveSuccess(e.hotspot,!0)})}),this.resolve$=this.actions$.ofType(be.RESOLVE).map(lt.d).switchMap(function(e){return u.socketIOService.resolveHotspot(e.id,!0).map(function(e){return!!e.error&&u.uiActions.setError({code:""})}).filter(function(e){return!1!==e})}),this.unresolve$=this.actions$.ofType(be.UNRESOLVE).map(lt.d).switchMap(function(e){return u.socketIOService.resolveHotspot(e.id,!1).map(function(e){return!!e.error&&u.uiActions.setError({code:""})}).filter(function(e){return!1!==e})}),this.changeVisibility$=this.actions$.ofType(be.CHANGE_VISIBILITY).map(lt.d).switchMap(function(e){return u.socketIOService.changeHotspotVisibility(e.id,e.visibility).map(function(e){return!!e.error&&u.uiActions.setError({code:""})}).filter(function(e){return!1!==e})}),this.activeteCommentsOnHotspotSaveSuccess$=this.actions$.ofType(be.SAVE_SUCCESS).map(lt.d).switchMap(function(e){return X.Observable.of(u.commentsActions.activateHotspot(e.hotspot.id,e.justAdded))})}}();se.b([Object(lt.b)(),se.d("design:type",Object)],Gi.prototype,"loadedHotspots$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Gi.prototype,"saveHotspot$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Gi.prototype,"resolve$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Gi.prototype,"unresolve$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Gi.prototype,"changeVisibility$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Gi.prototype,"activeteCommentsOnHotspotSaveSuccess$",void 0);var zi=function(){return function(e,t,n,l,o){var i=this;this.actions$=e,this.state$=t,this.commentsActions=n,this.socketIOService=l,this.hotspotsActions=o,this.activateHotspot$=this.actions$.ofType(Ce.ACTIVATE_HOTSPOT).withLatestFrom(this.state$).map(function(e){return{currentId:e[0].payload.id,previousId:e[1].comments.previousHotspotId}}).do(function(e){e.previousId!==e.currentId&&(e.previousId&&i.socketIOService.leaveHotspot(e.previousId),i.socketIOService.joinHotspot(e.currentId))}),this.deactivateHotspot$=this.actions$.ofType(Ce.DEACTIVATE_HOTSPOT).map(lt.d).do(function(e){i.socketIOService.leaveHotspot(e.id)}),this.addComment$=this.actions$.ofType(Ce.ADD).map(lt.d).do(function(e){i.socketIOService.addComment(e)}),this.cleanUpOnActivate$=this.actions$.ofType(Ce.ACTIVATE_HOTSPOT).map(lt.d).switchMap(function(e){return e.justAdded?X.Observable.of(i.hotspotsActions.cleanupUnsaved()).delay(100):X.Observable.of(i.hotspotsActions.cleanupUnsaved())}),this.edit$=this.actions$.ofType(Ce.EDIT).map(lt.d).do(function(e){i.socketIOService.editComment(e.hotspotId,e.commentId,e.text)}),this.remove$=this.actions$.ofType(Ce.REMOVE).map(lt.d).do(function(e){i.socketIOService.removeComment(e.comment.hotspotId,e.comment.id)})}}();se.b([Object(lt.b)({dispatch:!1}),se.d("design:type",Object)],zi.prototype,"activateHotspot$",void 0),se.b([Object(lt.b)({dispatch:!1}),se.d("design:type",Object)],zi.prototype,"deactivateHotspot$",void 0),se.b([Object(lt.b)({dispatch:!1}),se.d("design:type",Object)],zi.prototype,"addComment$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],zi.prototype,"cleanUpOnActivate$",void 0),se.b([Object(lt.b)({dispatch:!1}),se.d("design:type",Object)],zi.prototype,"edit$",void 0),se.b([Object(lt.b)({dispatch:!1}),se.d("design:type",Object)],zi.prototype,"remove$",void 0);var qi=function(){function e(e,t,n,l,o){var i=this;this.actions$=e,this.state$=t,this.feedActions=n,this.feedService=l,this.pageService=o,this.loadVariations$=this.actions$.ofType(Ie.LOAD_VARIATIONS_DATA).map(lt.d).switchMap(function(e){return i.combineVariations(e.setCurrentAsSeen).map(function(e){var t=i.mergeVariations(e.pageVariations,e.feedVariations);return i.feedActions.loadVariationsDataSuccess(t)}).catch(function(e){return X.Observable.of(i.feedActions.loadVariationsDataSuccess([]))})}),this.loadAll$=this.actions$.ofType(Ie.LOAD_ALL_DATA).map(lt.d).switchMap(function(e){return i.combineAll(e.variation).map(function(e){return i.feedActions.loadAllDataSuccess(e.variations,e.hotspots)}).catch(function(e){return X.Observable.of(i.feedActions.loadAllDataSuccess([],[]))})}),this.loadHotspots$=this.actions$.ofType(Ie.LOAD_HOTSPOTS_DATA).map(lt.d).switchMap(function(e){return X.Observable.combineLatest(i.feedService.getHotspots(e.variation).map(function(e){return e.data.hotspots}),i.pageService.getCurrentVariationPageBlocks(),function(e,t){var n=i.filterValidHotspots(e,t);return i.feedActions.loadHotspotsDataSuccess(n)})}),this.updateVariationSeen$=this.actions$.ofType(Ie.UPDATE_VARIATION_SEEN).map(lt.d).do(function(e){i.feedService.updateVariationSeen(e.name).subscribe(function(e){var t=e.data;return i.feedActions.updateVariationSeenSuccess(t.name,t.seenAt)})}),this.toggleRead$=this.actions$.ofType(Ie.MARK_HOTSPOT_AS_READ,Ie.MARK_HOTSPOT_AS_UNREAD).mapTo(this.feedActions.loadVariationsData())}return e.prototype.combineVariations=function(e){return X.Observable.combineLatest(this.pageService.getVariations(),this.feedService.getVariations(void 0,e),function(e,t){return{pageVariations:e,feedVariations:t.data.variations}})},e.prototype.combineAll=function(e){var t=this;return X.Observable.combineLatest(this.pageService.getCurrentVariationPageBlocks(),this.pageService.getVariations(),this.feedService.getVariations(e),this.feedService.getHotspots(e),function(e,n,l,o){return{variations:t.mergeVariations(n,l.data.variations),hotspots:t.filterValidHotspots(o.data.hotspots,e)}})},e.prototype.mergeVariations=function(e,t){return e.map(function(e){var n=t.filter(function(t){return e.variationName===t.variation}).pop();return Object.assign({},{hotspotsNumber:0,unread:!1,variation:e.variationName,customVariationName:e.customVariationName},n||{})})},e.prototype.filterValidHotspots=function(e,t){var n=t.map(function(e){return e.id});return e.filter(function(e){return n.includes(e.section)})},e}();se.b([Object(lt.b)(),se.d("design:type",Object)],qi.prototype,"loadVariations$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],qi.prototype,"loadAll$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],qi.prototype,"loadHotspots$",void 0),se.b([Object(lt.b)({dispatch:!1}),se.d("design:type",Object)],qi.prototype,"updateVariationSeen$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],qi.prototype,"toggleRead$",void 0);var Wi=function(){return function(e,t,n,l){var o=this;this.actions$=e,this.state$=t,this.heatmapMenuActions=n,this.heatmapService=l,this.changeHeatmapMode$=this.actions$.ofType(De.CHANGE_HEATMAPMODE,De.CHANGE_PAGE_DATA,ue.SWITCH_TO_MOBILE,ue.SWITCH_TO_DESKTOP,ue.SET_POPUP_OPENED,ue.SET_POPUP_CLOSED).withLatestFrom(this.state$).filter(function(e){return $e(e[1].ui.featureModeEnabled)}).map(function(e){var t=e[1];return[t.ui,t.heatmapMenu]}).switchMap(function(e){var t=e[0],n=e[1];return o.heatmapService.getHeatmapData({displayMode:t.displayMode,variation:n.variation,variationHash:n.variationHash,version:n.version,popupId:!!t.openedPopup&&t.openedPopup.id,heatmapMode:n.heatmapMode})}).map(function(e){return o.heatmapMenuActions.heatmapLoadSuccess(e)}),this.defaultMobileHeatmapMode$=this.actions$.ofType(ue.SWITCH_TO_MOBILE).withLatestFrom(this.state$).filter(function(e){var t=e[1];return $e(t.ui.featureModeEnabled)&&t.heatmapMenu.heatmapMode===ke.mouseMovement}).map(function(){return o.heatmapMenuActions.changeHeatmapMode(ke.clicks)}),this.changeUiVariationDropdown$=this.actions$.ofType(ue.CHANGE_VARIATION).withLatestFrom(this.state$).filter(function(e){return $e(e[1].ui.featureModeEnabled)}).map(function(e){var t=e[1];return[t.ui,t.heatmapMenu]}).filter(function(e){return 0!==e[1].variations.length}).switchMap(function(e){var t=e[0],n=e[1],l=In(n.variations,t.variation),i=Tn(n.variations,t.variation);return X.Observable.of(o.heatmapMenuActions.changePageData({version:l,variationHash:i,variation:t.variation}))})}}();se.b([Object(lt.b)(),se.d("design:type",Object)],Wi.prototype,"changeHeatmapMode$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Wi.prototype,"defaultMobileHeatmapMode$",void 0),se.b([Object(lt.b)(),se.d("design:type",Object)],Wi.prototype,"changeUiVariationDropdown$",void 0);var Ki=n(400),Yi=n(411),Xi=n(412),Ji=n(410),Zi=n(213),Qi=n(440),er=n(443),tr=n(445),nr=n(452),lr=n(425),or=n(409),ir=n(430),rr=n(420),sr=n(456),ur=n(460),ar=n(206),cr=n(406),dr=n(403),pr=n(414),hr=n(462),mr=n(448),fr=n(467),vr=n(446),gr=n(218),yr=n(474),br=n(471),Er=n(427),Sr=n(458),Cr=n(399);n.d(t,"a",function(){return Ar});var Ar=l["ɵcmf"](i,[r],function(e){return l["ɵmod"]([l["ɵmpd"](512,l.ComponentFactoryResolver,l["ɵCodegenComponentFactoryResolver"],[[8,[s.a,u.a,a.a,ii,ci,mi,yi,Ai,_i,Mi]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["ɵmpd"](5120,l.LOCALE_ID,l["ɵm"],[[3,l.LOCALE_ID]]),l["ɵmpd"](4608,f.NgLocalization,f.NgLocaleLocalization,[l.LOCALE_ID]),l["ɵmpd"](5120,l.APP_ID,l["ɵf"],[]),l["ɵmpd"](5120,l.IterableDiffers,l["ɵk"],[]),l["ɵmpd"](5120,l.KeyValueDiffers,l["ɵl"],[]),l["ɵmpd"](4608,v.DomSanitizer,v["ɵe"],[f.DOCUMENT]),l["ɵmpd"](6144,l.Sanitizer,null,[v.DomSanitizer]),l["ɵmpd"](4608,v.HAMMER_GESTURE_CONFIG,v.HammerGestureConfig,[]),l["ɵmpd"](5120,v.EVENT_MANAGER_PLUGINS,function(e,t,n,l){return[new v["ɵDomEventsPlugin"](e),new v["ɵKeyEventsPlugin"](t),new v["ɵHammerGesturesPlugin"](n,l)]},[f.DOCUMENT,f.DOCUMENT,f.DOCUMENT,v.HAMMER_GESTURE_CONFIG]),l["ɵmpd"](4608,v.EventManager,v.EventManager,[v.EVENT_MANAGER_PLUGINS,l.NgZone]),l["ɵmpd"](135680,v["ɵDomSharedStylesHost"],v["ɵDomSharedStylesHost"],[f.DOCUMENT]),l["ɵmpd"](4608,v["ɵDomRendererFactory2"],v["ɵDomRendererFactory2"],[v.EventManager,v["ɵDomSharedStylesHost"]]),l["ɵmpd"](5120,Di.a,ki.d,[]),l["ɵmpd"](5120,Di.c,ki.e,[]),l["ɵmpd"](4608,Di.b,ki.c,[Di.a,Di.c]),l["ɵmpd"](5120,l.RendererFactory2,ki.f,[v["ɵDomRendererFactory2"],Di.b,l.NgZone]),l["ɵmpd"](6144,v["ɵSharedStylesHost"],null,[v["ɵDomSharedStylesHost"]]),l["ɵmpd"](4608,l.Testability,l.Testability,[l.NgZone]),l["ɵmpd"](4608,v.Meta,v.Meta,[f.DOCUMENT]),l["ɵmpd"](4608,v.Title,v.Title,[f.DOCUMENT]),l["ɵmpd"](4608,Ri.b,ki.b,[l.RendererFactory2,v.DOCUMENT]),l["ɵmpd"](4608,G["ɵi"],G["ɵi"],[]),l["ɵmpd"](4608,G.FormBuilder,G.FormBuilder,[]),l["ɵmpd"](4608,Pi.IpSnackbarService,Pi.IpSnackbarService,[l.ApplicationRef,l.Injector,l.ComponentFactoryResolver]),l["ɵmpd"](5120,Hi.RadioEventService,Hi.radioEventServiceFactory,[[3,Hi.RadioEventService]]),l["ɵmpd"](5120,xi.ModalOutletService,Ni.modalOutletServiceFactory,[]),l["ɵmpd"](4608,Vi.IpModalService,Vi.IpModalService,[xi.ModalOutletService,l.ComponentFactoryResolver,l.Injector,l.ApplicationRef]),l["ɵmpd"](4608,Li.BodyService,Li.BodyService,[v.DOCUMENT]),l["ɵmpd"](4608,C.IpTooltipService,C.IpTooltipService,[l.ApplicationRef,l.Injector,l.ComponentFactoryResolver]),l["ɵmpd"](5120,il.ActivatedRoute,il["ɵf"],[il.Router]),l["ɵmpd"](4608,il.NoPreloading,il.NoPreloading,[]),l["ɵmpd"](6144,il.PreloadingStrategy,null,[il.NoPreloading]),l["ɵmpd"](135680,il.RouterPreloader,il.RouterPreloader,[il.Router,l.NgModuleFactoryLoader,l.Compiler,l.Injector,il.PreloadingStrategy]),l["ɵmpd"](4608,il.PreloadAllModules,il.PreloadAllModules,[]),l["ɵmpd"](5120,il.ROUTER_INITIALIZER,il["ɵi"],[il["ɵg"]]),l["ɵmpd"](5120,l.APP_BOOTSTRAP_LISTENER,function(e){return[e]},[il.ROUTER_INITIALIZER]),l["ɵmpd"](135680,W.k,W.k,[W.a,W.i,W.j,W.d]),l["ɵmpd"](5120,Ui.c,Ui.d,[Ui.k,Ui.i]),l["ɵmpd"](4608,Ge,Ge,[W.m,Ce,be]),l["ɵmpd"](4608,_e,_e,[]),l["ɵmpd"](4608,we,we,[]),l["ɵmpd"](4608,et,et,[W.m,W.a,ue,Ce,be,Ie,Qe,Ye,v.DOCUMENT]),l["ɵmpd"](4608,pt,pt,[Z]),l["ɵmpd"](4608,ht,ht,[ut,Ye,ee,Y.e,W.m,ue,rt]),l["ɵmpd"](4608,mt,mt,[l.ApplicationRef,l.ComponentFactoryResolver]),l["ɵmpd"](4608,vt,vt,[ut]),l["ɵmpd"](4608,gt,gt,[ee]),l["ɵmpd"](4608,ul,ul,[W.m]),l["ɵmpd"](4608,$i,$i,[il.Router,ee,re]),l["ɵmpd"](4608,zt,zt,[]),l["ɵmpd"](4608,Fi,Fi,[il.Router,ee,re]),l["ɵmpd"](512,f.CommonModule,f.CommonModule,[]),l["ɵmpd"](1024,l.ErrorHandler,v["ɵa"],[]),l["ɵmpd"](1024,l.NgProbeToken,function(){return[il["ɵb"]()]},[]),l["ɵmpd"](512,il["ɵg"],il["ɵg"],[l.Injector]),l["ɵmpd"](1024,l.APP_INITIALIZER,function(e,t,n){return[v["ɵc"](e,t),il["ɵh"](n)]},[[2,v.NgProbeToken],[2,l.NgProbeToken],il["ɵg"]]),l["ɵmpd"](512,l.ApplicationInitStatus,l.ApplicationInitStatus,[[2,l.APP_INITIALIZER]]),l["ɵmpd"](131584,l["ɵe"],l["ɵe"],[l.NgZone,l["ɵConsole"],l.Injector,l.ErrorHandler,l.ComponentFactoryResolver,l.ApplicationInitStatus]),l["ɵmpd"](2048,l.ApplicationRef,null,[l["ɵe"]]),l["ɵmpd"](512,l.ApplicationModule,l.ApplicationModule,[l.ApplicationRef]),l["ɵmpd"](512,v.BrowserModule,v.BrowserModule,[[3,v.BrowserModule]]),l["ɵmpd"](512,ki.a,ki.a,[]),l["ɵmpd"](512,Y.f,Y.f,[]),l["ɵmpd"](512,G["ɵba"],G["ɵba"],[]),l["ɵmpd"](512,G.FormsModule,G.FormsModule,[]),l["ɵmpd"](512,G.ReactiveFormsModule,G.ReactiveFormsModule,[]),l["ɵmpd"](1024,il["ɵa"],il["ɵd"],[[3,il.Router]]),l["ɵmpd"](512,il.UrlSerializer,il.DefaultUrlSerializer,[]),l["ɵmpd"](512,il.ChildrenOutletContexts,il.ChildrenOutletContexts,[]),l["ɵmpd"](256,il.ROUTER_CONFIGURATION,{},[]),l["ɵmpd"](1024,f.LocationStrategy,il["ɵc"],[f.PlatformLocation,[2,f.APP_BASE_HREF],il.ROUTER_CONFIGURATION]),l["ɵmpd"](512,f.Location,f.Location,[f.LocationStrategy]),l["ɵmpd"](512,l.Compiler,l.Compiler,[]),l["ɵmpd"](512,l.NgModuleFactoryLoader,l.SystemJsNgModuleLoader,[l.Compiler,[2,l.SystemJsNgModuleLoaderConfig]]),l["ɵmpd"](1024,il.ROUTES,function(){return[[{path:"preview/:id",component:cl,canActivate:[Fi]},{path:"access/:id",component:ri,canActivate:[$i]},{path:"**",component:di}]]},[]),l["ɵmpd"](1024,il.Router,il["ɵe"],[l.ApplicationRef,il.UrlSerializer,il.ChildrenOutletContexts,f.Location,l.Injector,l.NgModuleFactoryLoader,l.Compiler,il.ROUTES,il.ROUTER_CONFIGURATION,[2,il.UrlHandlingStrategy],[2,il.RouteReuseStrategy]]),l["ɵmpd"](512,il.RouterModule,il.RouterModule,[[2,il["ɵa"]],[2,il.Router]]),l["ɵmpd"](131584,W.a,W.a,[]),l["ɵmpd"](131584,Ui.h,Ui.h,[]),l["ɵmpd"](2048,W.h,null,[Ui.h]),l["ɵmpd"](256,W.r,void 0,[]),l["ɵmpd"](1024,W.d,W.v,[W.r]),l["ɵmpd"](256,W.q,o,[]),l["ɵmpd"](2048,W.t,null,[W.q]),l["ɵmpd"](1024,W.c,W.u,[l.Injector,W.q,W.t]),l["ɵmpd"](256,W.s,W.w,[]),l["ɵmpd"](256,W.e,[],[]),l["ɵmpd"](1024,W.f,W.z,[W.s,W.e]),l["ɵmpd"](131584,W.g,W.g,[W.h,W.d,W.c,W.f]),l["ɵmpd"](2048,W.i,null,[W.g]),l["ɵmpd"](131584,W.j,W.j,[]),l["ɵmpd"](512,W.o,W.o,[W.a,W.i,W.j]),l["ɵmpd"](1024,Ui.k,Ui.e,[]),l["ɵmpd"](512,Ui.l,Ui.l,[Ui.k]),l["ɵmpd"](256,Ui.j,{},[]),l["ɵmpd"](1024,Ui.i,Ui.g,[Ui.j]),l["ɵmpd"](512,Ui.a,Ui.a,[Ui.h,W.a,W.i,Ui.l,W.j,W.d,Ui.i]),l["ɵmpd"](1024,W.l,Ui.f,[Ui.a]),l["ɵmpd"](512,W.m,W.m,[W.l,W.a,W.g]),l["ɵmpd"](512,ji.d,ji.b,[]),l["ɵmpd"](256,ji.f,{stateKey:ji.a},[]),l["ɵmpd"](1024,ji.c,ji.g,[ji.f]),l["ɵmpd"](512,ji.e,ji.e,[W.m,il.Router,ji.d,ji.c]),l["ɵmpd"](1024,lt.i,lt.f,[]),l["ɵmpd"](512,lt.j,lt.j,[lt.i]),l["ɵmpd"](512,lt.c,lt.c,[lt.j]),l["ɵmpd"](131584,lt.k,lt.k,[lt.c,W.m]),l["ɵmpd"](512,lt.a,lt.a,[W.j]),l["ɵmpd"](512,Y.c,Y.c,[]),l["ɵmpd"](512,Y.h,Y.b,[]),l["ɵmpd"](1024,Y.k,Y.l,[]),l["ɵmpd"](512,Y.j,Y.j,[Y.c,Y.h,Y.k]),l["ɵmpd"](512,Y.g,Y.a,[]),l["ɵmpd"](1024,Y.e,Y.m,[Y.j,Y.g]),l["ɵmpd"](1024,Z,Q,[]),l["ɵmpd"](512,ee,ee,[Z]),l["ɵmpd"](512,tt,tt,[Y.e,ee]),l["ɵmpd"](512,be,be,[]),l["ɵmpd"](512,Ce,Ce,[]),l["ɵmpd"](512,ue,ue,[]),l["ɵmpd"](512,Ie,Ie,[]),l["ɵmpd"](512,Ye,Ye,[Y.e,ee]),l["ɵmpd"](512,oe,oe,[Y.e,ee]),l["ɵmpd"](512,rt,rt,[lt.a,Ye,oe]),l["ɵmpd"](512,ut,ut,[Y.e,ee,oe]),l["ɵmpd"](512,at,at,[ut]),l["ɵmpd"](512,re,re,[oe,Y.e,ee]),l["ɵmpd"](512,ct,ct,[W.m,be,Ce,ue,Ie,rt,Z,ee,oe,at,re]),l["ɵmpd"](512,yt,yt,[Y.e,Ye,re]),l["ɵmpd"](512,De,De,[]),l["ɵmpd"](512,Qe,Qe,[]),l["ɵmpd"](512,Bi,Bi,[lt.a,W.m,tt,ct,yt,ue,be,De,Qe]),l["ɵmpd"](512,Gi,Gi,[lt.a,W.m,Ye,tt,ct,ue,be,Ce]),l["ɵmpd"](512,zi,zi,[lt.a,W.m,Ce,ct,be]),l["ɵmpd"](512,dt,dt,[Y.e,Ye,ee]),l["ɵmpd"](512,qi,qi,[lt.a,W.m,Ie,dt,Ye]),l["ɵmpd"](512,Wi,Wi,[lt.a,W.m,De,yt]),l["ɵmpd"](1024,lt.h,lt.e,[Bi,Gi,zi,qi,rt,Wi]),l["ɵmpd"](512,lt.g,lt.g,[lt.c,lt.k,W.m,lt.h,[2,W.n]]),l["ɵmpd"](512,Ui.b,Ui.b,[]),l["ɵmpd"](512,Ki.IpButtonModule,Ki.IpButtonModule,[]),l["ɵmpd"](512,Yi.IpRippleEffectModule,Yi.IpRippleEffectModule,[]),l["ɵmpd"](512,Xi.IpDropdownModule,Xi.IpDropdownModule,[]),l["ɵmpd"](512,Ji.IpToggleModule,Ji.IpToggleModule,[]),l["ɵmpd"](512,Zi.IpFormModule,Zi.IpFormModule,[]),l["ɵmpd"](512,Qi.IpSearchableDropdownModule,Qi.IpSearchableDropdownModule,[]),l["ɵmpd"](512,er.IpSliderModule,er.IpSliderModule,[]),l["ɵmpd"](512,tr.IpSnackbarModule,tr.IpSnackbarModule,[]),l["ɵmpd"](512,nr.IpSwitchModule,nr.IpSwitchModule,[]),l["ɵmpd"](512,lr.IpPaginationModule,lr.IpPaginationModule,[]),l["ɵmpd"](512,or.IpPopoverModule,or.IpPopoverModule,[]),l["ɵmpd"](512,ir.IpRadioModule,ir.IpRadioModule,[]),l["ɵmpd"](512,rr.IpModalModule,rr.IpModalModule,[]),l["ɵmpd"](512,sr.IpTabsModule,sr.IpTabsModule,[]),l["ɵmpd"](512,ur.IpTooltipModule,ur.IpTooltipModule,[]),l["ɵmpd"](512,ar.IpCalendarModule,ar.IpCalendarModule,[]),l["ɵmpd"](512,cr.IpDatepickerModule,cr.IpDatepickerModule,[]),l["ɵmpd"](512,dr.IpCheckboxModule,dr.IpCheckboxModule,[]),l["ɵmpd"](512,pr.IpIconsModule,pr.IpIconsModule,[]),l["ɵmpd"](512,hr.IpTreeListModule,hr.IpTreeListModule,[]),l["ɵmpd"](512,mr.IpStepsModule,mr.IpStepsModule,[]),l["ɵmpd"](512,fr.IpWizardModule,fr.IpWizardModule,[]),l["ɵmpd"](512,vr.IpSpinnerModule,vr.IpSpinnerModule,[]),l["ɵmpd"](512,gr.IpListModule,gr.IpListModule,[]),l["ɵmpd"](512,yr.IpBadgeModule,yr.IpBadgeModule,[]),l["ɵmpd"](512,br.IpColumnViewModule,br.IpColumnViewModule,[]),l["ɵmpd"](512,Er.IpPreventOuterScrollModule,Er.IpPreventOuterScrollModule,[]),l["ɵmpd"](512,Sr.IpTagsModule,Sr.IpTagsModule,[]),l["ɵmpd"](512,Cr.MrWhiteModule,Cr.MrWhiteModule,[]),l["ɵmpd"](512,i,i,[]),l["ɵmpd"](256,o,He,[])])})}},[666]);